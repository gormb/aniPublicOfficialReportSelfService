<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.01">
    <meta http-equiv="Cache-Control" content="no-cache,no-store,must-revalidate"><meta http-equiv="Pragma" content="no-cache"><meta http-equiv="Expires" content="0">
    <link rel="stylesheet" href="index.css">

<style>
table { border-collapse: collapse; width: 100%; margin: 2rem auto; max-width: 900px; }th,td { border: 1px solid #ccc; padding: 0.75rem; text-align: left; }th { background-color: #e6f0ff; }caption { caption-side: top; font-weight: bold; font-size: 1.4rem; padding: 1rem; }
a[onclick] {all: unset;cursor: pointer;}
</style>

</head>
<body>
    <header id="header"><button onclick="ui.ChangeFontSize()">/*A</button><div>
        <center>Sikret Chat - administrasjon</center></div>
        <button onclick="ui.menu.Show()">m</button><div id="menu" class="menu hidden"></div>
    </header>
    <main>
        <span style="color:#fff">--*/<br>/*</span>
    </main>
    <footer id="grubling" class="hidden">....</footer>
    <footer id="suggestions" class="hidden">...</footer>
    <footer>
        <button id="speak">ðŸŽ¤</button><textarea id="inp" placeholder="..."></textarea><button id="send">&nbsp;â†‘&nbsp;</button>
        <script src="i/cfg.js"></script>
        <script src="i/setting.js"></script>
        <script src="i/ui.js"></script>
        <script src="i/qr.js"></script>
        <script src="i/lagring.js"></script>
        <script src="i/ai.js"></script>
        <script src="indexadmin.js"></script>
        <script src="i/deploy.js"></script>
        <script src="i/pv.js"></script><script src="i/pbg.js"></script>
    </footer>
    <script>
        c='<span style="color:#fff">-- */<br>/*</span>'
        s=c+'<br>'.repeat(12)

        lagring.d.rels=()=>lagring.d.meta.map(([t, _, cols]) =>[t, cols.toString().split(',').filter(f => f.startsWith('id_') && f !== 'id').map(f => f.slice(3))]);
        lagring.d.relsi = () => lagring.d.rels().reduce((a,[t,rs]) => (rs.forEach(r => (a[r] ??= []).push(t)), a), {});
        console.log(lagring.d.relsi())
        //msgInfo(s+`/* Relasjoner\n`+lagring.d.rels().map(([t,rels])=>`${t}=${rels.join(',')}`).join('\n').replaceAll(/\n/g,'<br>') +`*/`);

        msgInfo(s+lagring.d.erN(lagring.d.meta))
        msgInfo(`/*Kopier SQL for
            <button onclick="navigator.clipboard.writeText(lagring.d.tabN(lagring.d.meta,''))">drop&create</button>
            <button onclick="navigator.clipboard.writeText(lagring.d.tabN(lagring.d.meta,'drop'))">drop</button>
            <button onclick="navigator.clipboard.writeText(lagring.d.tabN(lagring.d.meta,'create'))">create</button><br>
            */`);
        m=msgInfo(lagring.d.tabN(lagring.d.meta)+c);
        qr.d(undefined,m,undefined,'p/aigap.webp');
        document.write('*/');
    </script>
</body>
</html>
