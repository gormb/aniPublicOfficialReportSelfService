;/*FB_PKG_DELIM*/

__d("BotFeedbackKind",[],(function(a,b,c,d,e,f){a=Object.freeze({BOT_FEEDBACK_POSITIVE:0,BOT_FEEDBACK_NEGATIVE_GENERIC:1,BOT_FEEDBACK_NEGATIVE_HELPFUL:2,BOT_FEEDBACK_NEGATIVE_INTERESTING:3,BOT_FEEDBACK_NEGATIVE_ACCURATE:4,BOT_FEEDBACK_NEGATIVE_SAFE:5,BOT_FEEDBACK_NEGATIVE_OTHER:6,BOT_FEEDBACK_NEGATIVE_REFUSED:7,BOT_FEEDBACK_NEGATIVE_NOT_VISUALLY_APPEALING:8,BOT_FEEDBACK_NEGATIVE_NOT_RELEVANT_TO_TEXT:9,BOT_FEEDBACK_NEGATIVE_PERSONALIZED:10,BOT_FEEDBACK_NEGATIVE_CLARITY:11,BOT_FEEDBACK_NEGATIVE_DOESNT_LOOK_LIKE_THE_PERSON:12,BOT_FEEDBACK_NEGATIVE_HALLUCINATION_INTERNAL_ONLY:13});f["default"]=a}),66);
__d("AdsAIMessengerConstants",["fbt","BotFeedbackKind"],(function(a,b,c,d,e,f,g,h){"use strict";b={title:h._(/*BTDS*/"__JHASH__TVUBv7aa8yw__JHASH__"),value:(a=c("BotFeedbackKind")).BOT_FEEDBACK_NEGATIVE_HALLUCINATION_INTERNAL_ONLY};d={title:h._(/*BTDS*/"__JHASH__AVG11ix_BXJ__JHASH__"),value:a.BOT_FEEDBACK_NEGATIVE_HELPFUL};e={title:h._(/*BTDS*/"__JHASH__wSP_qVisuoi__JHASH__"),value:a.BOT_FEEDBACK_NEGATIVE_PERSONALIZED};f={title:h._(/*BTDS*/"__JHASH__3krIxTLZtOD__JHASH__"),value:a.BOT_FEEDBACK_NEGATIVE_ACCURATE};c={title:h._(/*BTDS*/"__JHASH__O_hReSSI8n7__JHASH__"),value:a.BOT_FEEDBACK_NEGATIVE_SAFE};var i={title:h._(/*BTDS*/"__JHASH__nQnVxqmzNMI__JHASH__"),value:a.BOT_FEEDBACK_NEGATIVE_CLARITY},j={title:h._(/*BTDS*/"__JHASH__fdY6Ska9rb-__JHASH__"),value:a.BOT_FEEDBACK_NEGATIVE_OTHER};d={excludingOther:[d,e,f,c,i],feedbackOptionOther:j};e=new Map([[a.BOT_FEEDBACK_NEGATIVE_GENERIC,"ads_ai_submit_negative_feedback_generic"],[a.BOT_FEEDBACK_NEGATIVE_HELPFUL,"ads_ai_submit_negative_feedback_not_relevant"],[a.BOT_FEEDBACK_NEGATIVE_ACCURATE,"ads_ai_submit_negative_feedback_not_accurate"],[a.BOT_FEEDBACK_NEGATIVE_INTERESTING,"ads_ai_submit_negative_feedback_repetitive"],[a.BOT_FEEDBACK_NEGATIVE_SAFE,"ads_ai_submit_negative_feedback_harmful"],[a.BOT_FEEDBACK_NEGATIVE_CLARITY,"ads_ai_submit_negative_feedback_hard_to_understand"],[a.BOT_FEEDBACK_NEGATIVE_PERSONALIZED,"ads_ai_submit_negative_feedback_not_personalized"],[a.BOT_FEEDBACK_NEGATIVE_OTHER,"ads_ai_submit_negative_feedback_other"],[a.BOT_FEEDBACK_NEGATIVE_HALLUCINATION_INTERNAL_ONLY,"ads_ai_submit_negative_feedback_hallucination"]]);f=h._(/*BTDS*/"__JHASH__5X9UcGT23B8__JHASH__");g.INTERNAL_ONLY_FeedbackOptionHallucination=b;g.FEEDBACK_OPTIONS=d;g.BotFeedbackKindToLoggerEventMapping=e;g.feedbackModalHeader=f}),226);
__d("randomShuffleSeeded",["Alea"],(function(a,b,c,d,e,f,g){function a(a){for(var b=arguments.length,d=new Array(b>1?b-1:0),e=1;e<b;e++)d[e-1]=arguments[e];var f=c("Alea").apply(void 0,d);function g(a){return Math.floor(f()*a)}for(var h=a.length-1;h>0;h--){var i=g(h+1);if(i!=h){var j=a[i];a[i]=a[h];a[h]=j}}return a}g["default"]=a}),98);
__d("AdsAIMessengerUtils",["AdsAIMessengerConstants","AdsAISitevarConfig","I64","RelayHooks","gkx","randomShuffleSeeded","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(h||d("react")).useMemo;function j(a){return l(a.senderId)}function k(a){return a.botResponseId!=null&&a.botResponseId.startsWith("ads_ai_shiba")}function a(a){return j(a)||k(a)}function l(a){return c("AdsAISitevarConfig").bot_id!=null&&(i||(i=d("I64"))).equal(a,(i||(i=d("I64"))).of_string(c("AdsAISitevarConfig").bot_id))}function b(){var a=d("react-compiler-runtime").c(2),b=d("RelayHooks").useActorID(),e=d("AdsAIMessengerConstants").FEEDBACK_OPTIONS.excludingOther,f=d("AdsAIMessengerConstants").FEEDBACK_OPTIONS.feedbackOptionOther;a[0]!==b?(e=[].concat(e),c("randomShuffleSeeded")(e,parseInt(b,10)).push(f),c("gkx")("731")&&e.push(d("AdsAIMessengerConstants").INTERNAL_ONLY_FeedbackOptionHallucination),a[0]=b,a[1]=e):e=a[1];f=e;return f}g.isMessageFromAdsAIBot=j;g.isMessageFromAdsAIShibaBot=k;g.isMessageFromAdsAI=a;g.isAdsAIParticipant=l;g.useRandomizedAdsAINegativeFeedbackOptions=b}),98);
__d("DeletionType.react",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({Global:0,Local:1});c=a;f["default"]=c}),66);
__d("LSClearMessageSearchTable",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.db.table(69).fetch([[[a[0]]]]),function(a){return a["delete"]()})},function(c){return b.forEach(b.db.table(70).fetch([[[a[0]]]]),function(a){return a["delete"]()})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSSearchClearMessageSearchTableStoredProcedure";a.__tables__=["message_search_results","message_search_queries"];e.exports=a}),null);
__d("LSClearMessageSearchTableStoredProcedure",["LSClearMessageSearchTable","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSClearMessageSearchTable"),e.type_);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSCommunityThreadCreationStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({FAILURE:2,PENDING:0,SUCCESS:1});f["default"]=a}),66);
__d("LSCreateCommunitySubThread",["LSCreateOfflineThreadingID","LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[1]=a[0],a})},function(e){return d[2]=new c.Map(),d[2].set("client_mutation_id",d[1]),d[2].set("community_id",a[0]),d[2].set("parent_message_id",a[2]),d[2].set("parent_thread_id",a[1]),c.i64.gt(c.i64.cast([0,0]),c.i64.cast([0,0]))?(d[7]=c.i64.of_float(Date.now()),d[3]=c.i64.add(d[7],c.i64.cast([0,0]))):d[3]=c.i64.cast([0,0]),d[4]=d[2].get("parent_thread_id"),d[5]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),["create_community_sub_thread","_",c.i64.to_string(d[4])].join(""),c.i64.cast([0,665]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,d[3],c.i64.cast([0,0])).then(function(a){return a=a,d[6]=a[0],a})},function(a){return e[0]=d[6]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxCreateCommunitySubThreadStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSCreateCommunitySubThreadStoredProcedure",["LSCreateCommunitySubThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSCreateCommunitySubThread"),e.communityId,e.parentThreadId,e.parentMessageId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSDeleteReaction",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.forEach(b.filter(b.db.table(8).fetch([[[a[0],a[1],a[2]]]]),function(c){return b.i64.eq(c.threadKey,a[0])&&c.messageId===a[1]&&b.i64.eq(c.actorId,a[2])&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))}),function(a){return a["delete"]()})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxDeleteReactionStoredProcedure";a.__tables__=["reactions"];e.exports=a}),null);
__d("LSInsertAnonymousTaskContext",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(311).add({taskId:a[0],projectName:a[1]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSAnonymousCredentialsInsertAnonymousTaskContextStoredProcedure";a.__tables__=["anonymous_task_context"];e.exports=a}),null);
__d("LSIssueNewTaskUsingSyncChannel",["LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[12]).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.db.table(306).add({taskId:d[0],syncChannel:a[10],requiresAuthentication:a[11]})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSCoreIssueNewTaskUsingSyncChannelStoredProcedure";a.__tables__=["lightspeed_task_context"];e.exports=a}),null);
__d("LSDispatchMediaReceiverFetchForWeb",["LSInsertAnonymousTaskContext","LSIssueNewTaskUsingSyncChannel","LSMailboxTaskCompletionApiOnTaskInsertion"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("message_id",a[1]),d[0].set("receiver_fetch_id",a[2]),d[0].set("should_fetch_accessibility_summary_text",a[3]),d[1]=d[0].get("message_id"),d[4]=["LSMediaReceiverFetchTransportAnonymizedMsgrWebE2EEMediaReceiverFetchSyncAction",".",d[1]].join(""),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTaskUsingSyncChannel"),d[4],c.i64.cast([0,1018]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,2]),!1,c.i64.cast([0,0])).then(function(a){return a=a,d[3]=a[0],a})},function(a){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskInsertion"),d[3])},function(a){return c.storedProcedure(b("LSInsertAnonymousTaskContext"),d[3],"LS_MediaReceiverFetch")}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMediaReceiverFetchTransportDispatchMediaReceiverFetchForWebStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSDispatchMediaReceiverFetchForWebStoredProcedure",["LSDispatchMediaReceiverFetchForWeb","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSDispatchMediaReceiverFetchForWeb"),e.threadKey,e.messageId,e.receiverFetchId,e.shouldFetchAccessibilitySummaryText);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSGenerateTraceId",["LSRequestId","MetaConfig"],(function(a,b,c,d,e,f,g){"use strict";function a(){if(c("MetaConfig")._("62"))return c("LSRequestId").generate();else return void 0}g["default"]=a}),98);
__d("LSInsertRollCallContribution",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.filter(b.db.table(255).fetch([[[a[0],a[1],a[2],a[3]]],"optimistic"]),function(c){return b.i64.eq(c.rollCallContributionId,a[0])&&b.i64.eq(c.rollCallId,a[1])&&c.messageId===a[2]&&b.i64.eq(c.messageTimestampMs,a[3])&&b.i64.lt(c.authorityLevel,a[23])}),function(a){return a["delete"]()})},function(c){return b.db.table(255).add({rollCallContributionId:a[0],rollCallId:a[1],messageId:a[2],messageTimestampMs:a[3],threadKey:a[4],primaryMediaUrl:a[5],primaryMediaUrlFallback:a[6],primaryMediaExpiryMs:a[7],primaryMediaWidth:a[8],primaryMediaHeight:a[9],primaryMediaMimeType:a[10],previewMediaUrl:a[11],previewMediaUrlFallback:a[12],previewMediaExpiryMs:a[13],previewMediaWidth:a[14],previewMediaHeight:a[15],previewMediaMimeType:a[16],authorityLevel:a[23],contributorId:a[17],offlineThreadingId:a[18],blurOverride:a[19],contributionSource:a[20],contributionType:a[21],content:a[22]})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxInsertRollCallContributionStoredProcedure";a.__tables__=["roll_call_contributions_v2"];e.exports=a}),null);
__d("LSLocalApplyOptimisticCommunityChatSubThread",["LSArrayGetObjectAt","LSCreateOfflineThreadingID","LSGetViewerFBID","LSLocalize","LSUpdateMessageSubThreadKey"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.cast([0,16408]),d[1]=c.i64.cast([0,0]),d[2]=c.i64.cast([0,268437504]),d[3]=c.i64.cast([0,0]),d[4]=c.i64.cast([0,0]),d[5]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[5]).then(function(a){return a=a,d[6]=a[0],a})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,261320435]),void 0).then(function(a){return d[7]=a})},function(e){return c.filter(c.db.table(12).fetch([[[a[2]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]}).next().then(function(e,f){var g=e.done;e=e.value;return g?d[8]=d[7]:(f=e.item,c.sequence([function(e){return d[23]=f.text,d[23]!==void 0?c.resolve(d[22]=d[23]):c.sequence([function(b){return c.filter(c.db.table(12).fetch([[[a[2]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[24]=void 0:(c=b.item,d[24]=c.senderId)})},function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,1369731110]),void 0).then(function(a){return d[26]=a})},function(b){return c.i64.neq(d[24],void 0)?c.sequence([function(b){return c.db.table(216).fetch([[[d[24],a[0]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?d[31]=void 0:(c=b.item,d[31]=c.profileName)})},function(a){return c.filter(c.db.table(7).fetch([[[d[24]]]]),function(a){return c.i64.eq(a.id,d[24])&&c.i64.eq(c.i64.cast([0,1]),c.i64.cast([0,1]))}).next().then(function(b,c){var a=b.done;b=b.value;return a?d[33]=void 0:(c=b.item,d[37]=c.firstName,d[37]!==void 0?d[36]=d[37]:d[36]=c.name,d[33]=d[36])})},function(a){return d[31]!==void 0?d[35]=d[31]:(d[33]!==void 0?d[36]=d[33]:d[36]=d[26],d[35]=d[36]),d[27]=d[35]}]):c.resolve(d[27]=d[26])},function(b){return c.db.table(16).fetch([[[a[1],a[2]]]]).next().then(function(b,c){var a=b.done;b=b.value;return a?d[28]=void 0:(c=b.item,d[28]=c.attachmentType)})},function(a){return c.i64.eq(d[28],c.i64.cast([0,5]))?c.sequence([function(a){return d[31]=c.createArray(),d[33]=(d[31].push(d[27]),d[31]),b("LSLocalize").localizeV2Async(c.i64.cast([0,216075330]),d[31]).then(function(a){return d[32]=a})},function(a){return d[30]=d[32]}]):c.sequence([function(a){return c.i64.eq(d[28],c.i64.cast([0,2]))?c.sequence([function(a){return d[32]=c.createArray(),d[34]=(d[32].push(d[27]),d[32]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3093868587]),d[32]).then(function(a){return d[33]=a})},function(a){return d[31]=d[33]}]):c.sequence([function(a){return c.i64.eq(d[28],c.i64.cast([0,4]))?c.sequence([function(a){return d[33]=c.createArray(),d[35]=(d[33].push(d[27]),d[33]),b("LSLocalize").localizeV2Async(c.i64.cast([0,1965569930]),d[33]).then(function(a){return d[34]=a})},function(a){return d[32]=d[34]}]):c.sequence([function(a){return c.i64.eq(d[28],c.i64.cast([0,1]))?c.sequence([function(a){return d[34]=c.createArray(),d[36]=(d[34].push(d[27]),d[34]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3981943156]),d[34]).then(function(a){return d[35]=a})},function(a){return d[33]=d[35]}]):c.sequence([function(a){return c.i64.eq(d[28],c.i64.cast([0,3]))?c.sequence([function(a){return d[35]=c.createArray(),d[37]=(d[35].push(d[27]),d[35]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2071149394]),d[35]).then(function(a){return d[36]=a})},function(a){return d[34]=d[36]}]):c.sequence([function(a){return d[35]=c.createArray(),d[37]=(d[35].push(d[27]),d[35]),b("LSLocalize").localizeV2Async(c.i64.cast([0,2414298738]),d[35]).then(function(a){return d[36]=a})},function(a){return d[34]=d[36]}])},function(a){return d[33]=d[34]}])},function(a){return d[32]=d[33]}])},function(a){return d[31]=d[32]}])},function(a){return d[30]=d[31]}])},function(a){return d[22]=d[30]}])},function(a){return d[8]=d[22]}]))})},function(b){return d[10]=d[8],c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[void 0,void 0],d[11]=c[0],d[12]=c[1],c):(b=a.item,c=[b.themeFbid,b.customEmoji],d[11]=c[0],d[12]=c[1],c)})},function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[14]=a[0],a})},function(a){return c.forEach(c.filter(c.db.table(9).fetch([[[d[6]]]]),function(a){return c.i64.eq(a.threadKey,d[6])&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(9).add({threadKey:d[6],mailboxType:c.i64.cast([0,0]),threadType:c.i64.cast([0,26]),clientThreadKey:d[6],folderName:"community",parentThreadKey:a[1],lastActivityTimestampMs:c.i64.cast([0,0]),lastReadWatermarkTimestampMs:c.i64.cast([0,0]),snippetHasEmoji:!1,snippetSenderContactId:d[14],ongoingCallState:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),capabilities:d[0],capabilities2:d[1],capabilities3:d[2],capabilities4:d[3],capabilities5:d[4],threadName:d[10],themeFbid:d[11],customEmoji:d[12]})},function(b){return c.filter(c.db.table(12).fetch([[[a[2]]],"messageId"]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[15]=void 0:(b=a.item,d[15]=b.senderId)})},function(a){return d[17]=c.createArray(),c.i64.neq(d[15],void 0)?d[22]=(d[17].push(d[15]),d[17]):0,c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[18]=a[0],a})},function(a){return c.i64.neq(d[15],d[18])?c.sequence([function(a){return c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[22]=a[0],a})},function(a){return d[23]=(d[17].push(d[22]),d[17])}]):c.resolve()},function(a){return d[19]=c.i64.of_int32(d[17].length),c.i64.gt(d[19],c.i64.cast([0,0]))?c.loopAsync(d[19],function(a){return d[22]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[17],d[22]).then(function(a){return a=a,d[23]=a[0],d[24]=a[1],a})},function(a){return c.forEach(c.filter(c.db.table(14).fetch([[[d[6],d[23]]]]),function(a){return c.i64.eq(a.threadKey,d[6])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&c.i64.eq(a.contactId,d[23])&&c.i64.lt(a.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(a){return c.db.table(14).add({threadKey:d[6],contactId:d[23],readWatermarkTimestampMs:c.i64.cast([0,0]),deliveredWatermarkTimestampMs:c.i64.cast([0,0]),authorityLevel:c.i64.cast([0,20]),isModerator:!1})}])}):c.resolve()},function(e){return c.storedProcedure(b("LSUpdateMessageSubThreadKey"),a[2],d[6])},function(a){return c.resolve()},function(b){return d[20]=new c.Map(),d[20].set("client_mutation_id",d[6]),d[20].set("community_id",a[0]),d[20].set("parent_thread_id",a[1]),d[20].set("parent_message_id",a[2]),d[21]=c.toJSON(d[20]),c.db.table(312).put({threadKey:d[6],metadata:d[21]})},function(a){return e[0]=d[6]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalApplyOptimisticCommunityChatSubThreadStoredProcedure";a.__tables__=["messages","contextual_profile_v1","contacts","attachments","threads","participants","threads_optimistic_metadata"];e.exports=a}),null);
__d("LSLocalApplyOptimisticRollCallContribution",["LSArrayGetObjectAt","LSGetFirstAvailableAttachmentCTAID","LSGetViewerFBID","LSInsertAttachmentItem","LSInsertRollCallContribution","LSLocalize"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return a[1]!==void 0?c.sequence([function(b){return c.db.table(250).fetch([[[c.i64.from_string(a[1]),a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] couldn't find roll call in table roll_calls"),e=["Roll Call",c.i64.cast([0,0])],d[0]=e[0],d[1]=e[1],e):(b=a.item,e=[b.rollCallPrompt,b.expiryTimestampSec],d[0]=e[0],d[1]=e[1],e)})},function(b){return c.islc(c.sortBy(c.filter(c.db.table(255).fetch(),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(b.rollCallId,c.i64.from_string(a[1]))}),[["messageTimestampMs","DESC"]]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var c=a.done;a=a.value;return c?d[3]=void 0:(b=a.item,d[3]=b.messageId)})},function(b){return d[3]!==void 0?c.sequence([function(b){return d[7]=c.createArray(),c.forEach(c.islc(c.sortBy(c.db.table(18).fetch([[[a[0],d[3]]],"fk_attachments"]),[["attachmentIndex","ASC"]]),0,c.i64.to_float(c.i64.cast([0,2]))),function(a){a=a.item;return d[8]=new c.Map(),d[8].set("attachment_index",a.attachmentIndex),d[8].set("preview_url",a.previewUrl),d[8].set("preview_url_expiration_timestamp_ms",a.previewUrlExpirationTimestampMs),d[8].set("preview_url_mime_type",a.previewUrlMimeType),d[8].set("preview_width",a.previewWidth),d[8].set("preview_height",a.previewHeight),d[8].set("default_cta_id",a.defaultCtaId),d[8].set("playable_url",a.playableUrl),d[9]=(d[7].push(d[8]),d[7])})},function(a){return d[5]=d[7]}]):c.resolve((d[7]=c.createArray(),d[5]=d[7]))},function(e){return c.i64.neq(a[6],void 0)?d[6]=a[6]:d[6]=c.i64.cast([0,0]),c.i64.eq(d[6],c.i64.cast([0,0]))?(d[7]=c.i64.of_int32(a[2].length),c.i64.eq(d[7],c.i64.cast([0,1]))?c.sequence([function(e){return a[5]!==void 0?d[8]=c.i64.from_string(a[5]):d[8]=c.i64.cast([0,0]),b("LSLocalize").localizeV2Async(c.i64.cast([0,3989800917]),void 0).then(function(a){return d[9]=a})},function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[2],c.i64.cast([0,0])).then(function(a){return a=a,d[10]=a[0],d[11]=a[1],a})},function(a){return c.storedProcedure(b("LSGetFirstAvailableAttachmentCTAID")).then(function(a){return a=a,d[12]=a[0],a})},function(b){return d[13]=d[10].get("offline_attachment_id"),d[14]=d[10].get("attachment_index"),c.filter(c.db.table(16).fetch([[[a[0],a[3],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===a[3]&&b.attachmentFbid===a[1]&&c.i64.gt(b.authorityLevel,c.i64.cast([0,20]))}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(16).put({threadKey:a[0],messageId:a[3],attachmentFbid:a[1],timestampMs:a[4],offlineAttachmentId:d[13],attachmentType:c.i64.cast([0,7]),filesize:c.i64.cast([0,0]),attachmentCta1Id:d[12],attachmentIndex:d[14],hasMedia:!1,hasXma:!0,isSharable:!1,xmaLayoutType:c.i64.cast([0,10]),cta1Title:d[9],cta1Type:"xma_disabled_cta",defaultCtaTitle:d[9],defaultCtaType:"xma_disabled_cta",defaultCtaId:d[12],titleText:d[0],authorityLevel:c.i64.cast([0,20]),countdownTimestampMs:c.i64.mul(d[1],c.i64.cast([0,1e3])),maxTitleNumOfLines:c.i64.cast([0,4])}):0})},function(a){return d[15]=d[10].get("preview_url"),d[26]=d[15]==null?"":d[15],d[16]=d[10].get("preview_url_mime_type"),d[27]=d[16]==null?"":d[16],d[17]=d[10].get("preview_height"),d[23]=d[17]==null?c.i64.cast([0,0]):d[17],d[18]=d[10].get("preview_width"),d[22]=d[18]==null?c.i64.cast([0,0]):d[18],d[19]=d[10].get("playable_url"),d[25]=d[19]==null?"":d[19],d[20]=d[10].get("playable_url_mime_type"),c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[21]=a[0],a})},function(e){return c.storedProcedure(b("LSInsertRollCallContribution"),c.i64.cast([0,0]),c.i64.from_string(a[1]),a[3],a[4],a[0],d[25],"",c.i64.cast([0,0]),d[22],d[23],d[20]==null?"":d[20],d[26],"",c.i64.cast([0,0]),d[22],d[23],d[27],d[21],a[3],!1,d[8],a[6],void 0,c.i64.cast([0,20]))},function(b){return c.forEach(c.db.table(250).fetch([[[c.i64.from_string(a[1]),a[0]]]]),function(a){var b=a.update;a.item;return b({isBlurred:!1,viewerHasContributed:!0})})},function(e){return d[24]=d[10].get("attachment_index"),c.storedProcedure(b("LSInsertAttachmentItem"),a[1],d[24],a[0],c.i64.cast([0,0]),a[3],void 0,c.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,d[25],void 0,void 0,void 0,void 0,d[26],d[26],c.i64.cast([0,0]),d[27],d[22],d[23],void 0,d[12],d[9],"xma_disabled_cta",void 0,void 0,void 0,!1,"full",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)},function(e){return d[28]=c.i64.of_int32(d[5].length),c.i64.gt(d[28],c.i64.cast([0,0]))?c.loopAsync(d[28],function(e){return d[29]=e,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[5],d[29]).then(function(a){return a=a,d[30]=a[0],d[31]=a[1],a})},function(e){return d[32]=d[30].get("attachment_index"),d[33]=d[30].get("preview_url"),d[34]=d[30].get("preview_url_expiration_timestamp_ms"),d[35]=d[30].get("preview_url_mime_type"),d[36]=d[30].get("preview_width"),d[37]=d[30].get("preview_height"),d[38]=d[30].get("default_cta_id"),d[39]=d[30].get("playable_url"),c.storedProcedure(b("LSInsertAttachmentItem"),a[1],c.i64.add(d[32],c.i64.cast([0,1])),a[0],c.i64.cast([0,0]),a[3],void 0,c.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,d[39],void 0,void 0,void 0,void 0,d[33],d[33],d[34],d[35],d[36],d[37],void 0,d[38],d[9],"xma_disabled_cta",void 0,void 0,void 0,!1,"full",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}])}):c.resolve()}]):c.resolve((d[8]=c.i64.of_int32(a[2].length),function(a){c.logger(a).mustfix(a)}(["[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] expected only 1 attachment for MEDIA contribution, but found ",c.i64.to_string(d[8])].join(""))))):c.resolve(c.i64.eq(d[6],c.i64.cast([0,1]))?a[7]!==void 0?0:function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] expected non-null content for TEXT contribution, but found null"):c.i64.eq(d[6],c.i64.cast([0,2]))?function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] LINK contributions are not yet supported"):0)}]):c.resolve(function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] param product_fbid is missing"))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure";a.__tables__=["roll_calls","roll_call_contributions_v2","attachment_items","attachments"];e.exports=a}),null);
__d("LSLocalApplyOptimisticSharedAlbumContribution",["LSArrayGetObjectAt","LSArrayRemoveObjectAt","LSCollapseAttachments","LSGetFirstAvailableAttachmentCTAID","LSInsertAttachmentItem","LSLocalize"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(a){return b("LSLocalize").localizeV2Async(c.i64.cast([0,2856734260]),void 0).then(function(a){return d[0]=a})},function(a){return c.storedProcedure(b("LSGetFirstAvailableAttachmentCTAID")).then(function(a){return a=a,d[1]=a[0],a})},function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[2],c.i64.cast([0,0])).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],a})},function(e){return d[4]=c.i64.random(),d[5]=c.i64.to_string(d[4]),a[1]!==void 0?c.sequence([function(b){return c.db.table(279).fetch([[[c.i64.from_string(a[1]),a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure] couldn't find album in table shared_albums"),d[6]=void 0):(b=a.item,d[6]=b.title)})},function(e){return d[6]!==void 0?c.sequence([function(b){return d[8]=d[2].get("offline_attachment_id"),d[9]=d[2].get("attachment_index"),c.filter(c.db.table(16).fetch([[[a[0],a[3],d[5]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===a[3]&&b.attachmentFbid===d[5]&&c.i64.gt(b.authorityLevel,c.i64.cast([0,20]))}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(16).put({threadKey:a[0],messageId:a[3],attachmentFbid:d[5],timestampMs:a[4],offlineAttachmentId:d[8],attachmentType:c.i64.cast([0,7]),filesize:c.i64.cast([0,0]),attachmentCta1Id:d[1],attachmentIndex:d[9],hasMedia:!1,hasXma:!0,isSharable:!1,xmaLayoutType:c.i64.cast([0,10]),cta1Title:d[0],cta1Type:"xma_disabled_cta",defaultCtaTitle:d[0],defaultCtaType:"xma_shared_album_viewer",defaultCtaId:d[1],titleText:d[6],authorityLevel:c.i64.cast([0,20]),maxTitleNumOfLines:c.i64.cast([0,4]),collapsibleId:c.i64.from_string(a[1])}):0})},function(d){return c.storedProcedure(b("LSCollapseAttachments"),a[0],c.i64.from_string(a[1]))},function(e){return d[10]=c.i64.of_int32(a[2].length),c.i64.gt(d[10],c.i64.cast([0,0]))?c.loopAsync(d[10],function(e){return d[12]=e,c.sequence([function(e){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),a[2],d[12]).then(function(a){return a=a,d[13]=a[0],d[14]=a[1],a})},function(b){return d[15]=d[13].get("preview_url"),d[23]=d[15]==null?"":d[15],d[16]=d[13].get("preview_height"),d[24]=d[16]==null?c.i64.cast([0,0]):d[16],d[17]=d[13].get("preview_width"),d[25]=d[17]==null?c.i64.cast([0,0]):d[17],d[18]=d[13].get("preview_url_mime_type"),d[19]=d[13].get("playable_url"),d[20]=d[13].get("playable_url_mime_type"),d[21]=d[13].get("preview_url_mime_type"),d[22]=d[13].get("offline_attachment_id"),d[22]!==void 0?c.sequence([function(b){return d[27]="",d[28]=c.i64.from_string(d[22]),d[29]=c.i64.from_string(a[1]),d[26]=c.i64.of_float(Date.now()),c.forEach(c.filter(c.db.table(280).fetch([[[d[29],d[28],a[0],d[27]]]]),function(b){return c.i64.eq(b.sharedAlbumId,d[29])&&c.i64.eq(b.sharedAlbumContributionId,d[28])&&c.i64.eq(b.threadKey,a[0])&&b.messageId===d[27]&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(280).add({messageId:d[27],sharedAlbumContributionId:d[28],sharedAlbumId:d[29],threadKey:a[0],mediaUrl:d[19]==null?d[23]:d[19],mediaHeight:d[24],mediaWidth:d[25],mediaUrlFallback:"",urlExpiryMs:c.i64.cast([0,0]),creationTimestampMs:d[26],authorityLevel:c.i64.cast([0,20]),previewMediaUrl:d[23],previewMediaHeight:d[24],previewMediaWidth:d[25],previewMediaMimeType:d[18]==null?"":d[18]})}]):c.resolve(function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure] param $attachment_otid is missing"))}])}):c.resolve()},function(e){return d[11]=c.createArray(),d[12]=(d[11].push(c.i64.cast([0,0])),d[11]),c.forEach(c.islc(c.sortBy(c.db.table(280).fetch([[[c.i64.from_string(a[1])]]]),[["creationTimestampMs","DESC"]]),0,c.i64.to_float(c.i64.cast([0,4]))),function(e){var f=e.item;return c.sequence([function(a){return d[15]=f.previewMediaUrl,c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[11],c.i64.cast([0,0])).then(function(a){return a=a,d[12]=a[0],d[13]=a[1],a})},function(e){return c.i64.eq(c.i64.cast([0,0]),d[12])?d[14]=d[6]:d[14]=void 0,c.storedProcedure(b("LSInsertAttachmentItem"),d[5],d[12],a[0],c.i64.cast([0,0]),a[3],void 0,c.i64.cast([0,0]),void 0,d[14],void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,d[15],d[15],c.i64.cast([0,0]),f.previewMediaMimeType,f.mediaWidth,f.mediaHeight,void 0,d[1],void 0,"xma_shared_album_viewer",void 0,void 0,void 0,!1,"full",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)},function(a){return c.nativeTypeOperation("Array",b("LSArrayRemoveObjectAt"),d[11],c.i64.cast([0,0])).then(function(a){return a=a,d[16]=a[0],a})},function(a){return d[16]=(d[11].push(c.i64.add(d[12],c.i64.cast([0,1]))),d[11])}])})}]):c.resolve()}]):c.resolve(function(a){c.logger(a).mustfix(a)}("[LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure] param product_fbid is missing"))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure";a.__tables__=["shared_albums","attachments","shared_album_contributions"];e.exports=a}),null);
__d("LSLocalApplyOptimisticMessageWithAttachmentsV2",["LSArrayGetObjectAt","LSLocalApplyOptimisticMessageV2","LSLocalApplyOptimisticRollCallContribution","LSLocalApplyOptimisticSharedAlbumContribution","LSSetMessageDisplayedContentTypes"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSLocalApplyOptimisticMessageV2"),a[0],a[1],a[2],a[3],a[4],a[5],void 0).then(function(a){return a=a,d[0]=a[0],d[1]=a[1],a})},function(e){return d[2]=a[5].get("attachments"),d[3]=a[5].get("product_type"),d[3]==="roll_call"?(d[4]=a[5].get("product_fbid"),d[5]=a[5].get("product_attribution"),d[6]=a[5].get("contribution_type"),c.storedProcedure(b("LSLocalApplyOptimisticRollCallContribution"),a[1],d[4],d[2],d[0],d[1],d[5],d[6],a[3])):d[3]==="shared_albums"?(d[4]=a[5].get("product_fbid"),d[5]=a[5].get("product_attribution"),c.storedProcedure(b("LSLocalApplyOptimisticSharedAlbumContribution"),a[1],d[4],d[2],d[0],d[1],d[5])):(d[4]=c.i64.of_int32(d[2].length),c.i64.gt(d[4],c.i64.cast([0,0]))?c.loopAsync(d[4],function(e){return d[5]=e,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[2],d[5]).then(function(a){return a=a,d[6]=a[0],d[7]=a[1],a})},function(b){return d[8]=d[6].get("attachment_fbid"),d[9]=d[6].get("offline_attachment_id"),d[10]=d[6].get("attachment_type"),d[11]=d[6].get("filename"),d[12]=d[6].get("filesize"),d[13]=d[6].get("attachment_index"),d[14]=d[6].get("has_media"),d[15]=d[6].get("has_xma"),d[16]=d[6].get("playable_url"),d[17]=d[6].get("playable_url_mime_type"),d[18]=d[6].get("playable_duration_ms"),d[19]=d[6].get("preview_url"),d[20]=d[6].get("preview_url_mime_type"),d[21]=d[6].get("mini_preview"),d[22]=d[6].get("preview_width"),d[23]=d[6].get("preview_height"),d[24]=d[6].get("xma_layout_type"),d[25]=d[6].get("xmas_template_type"),d[26]=d[6].get("cta1_title"),d[27]=d[6].get("cta1_type"),d[28]=d[6].get("attachment_cta1_id"),d[29]=d[6].get("cta2_title"),d[30]=d[6].get("cta2_type"),d[31]=d[6].get("attachment_cta2_id"),d[32]=d[6].get("cta3_title"),d[33]=d[6].get("cta3_type"),d[34]=d[6].get("attachment_cta3_id"),d[35]=d[6].get("image_url"),d[36]=d[6].get("action_url"),d[37]=d[6].get("title_text"),d[38]=d[6].get("subtitle_text"),d[39]=d[6].get("description_text"),d[40]=d[6].get("source_text"),d[41]=d[6].get("original_file_hash"),d[42]=d[6].get("sound_bite_client_sound_key"),d[43]=d[6].get("sound_bite_visual"),d[44]=d[6].get("ephemeral_media_state"),d[45]=d[6].get("waveform_data"),d[46]=d[6].get("avatar_audio_message_animated_url"),d[47]=d[6].get("avatar_audio_message_idle_url"),d[48]=d[6].get("avatar_audio_message_animated_b_url"),d[49]=d[6].get("avatar_audio_message_idle_b_url"),d[50]=d[6].get("avatar_audio_message_background_graphics_image_url"),d[51]=d[6].get("avatar_audio_message_pose_id"),d[52]=d[6].get("sampling_frequency_hz"),d[53]=d[6].get("should_autoplay_video"),d[54]=d[6].get("has_xma_favicon"),d[55]=d[6].get("favicon_url"),d[19]!==void 0?d[56]=d[19]:d[56]=d[16],c.filter(c.db.table(16).fetch([[[a[1],d[0],d[8]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))&&b.messageId===d[0]&&b.attachmentFbid===d[8]&&c.i64.gt(b.authorityLevel,c.i64.cast([0,20]))}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(16).put({threadKey:a[1],messageId:d[0],attachmentFbid:d[8],timestampMs:d[1],offlineAttachmentId:d[9],attachmentType:d[10],filename:d[11],filesize:d[12],attachmentIndex:d[13],hasMedia:d[14],hasXma:d[15],isSharable:!1,playableUrl:d[16],playableUrlMimeType:d[17],playableDurationMs:d[18],previewUrl:d[56],previewUrlMimeType:d[20],miniPreview:d[21],previewWidth:d[22],previewHeight:d[23],xmaLayoutType:d[24],xmasTemplateType:d[25],cta1Title:d[26],cta1Type:d[27],attachmentCta1Id:d[28],cta2Title:d[29],cta2Type:d[30],attachmentCta2Id:d[31],cta3Title:d[32],cta3Type:d[33],attachmentCta3Id:d[34],imageUrl:d[35],actionUrl:d[36],titleText:d[37],subtitleText:d[38],descriptionText:d[39],sourceText:d[40],ephemeralMediaState:d[44],waveformData:d[45],samplingFrequencyHz:d[52],originalFileHash:d[41],authorityLevel:c.i64.cast([0,20]),shouldAutoplayVideo:d[53],hasXmaFavicon:d[54],faviconUrl:d[55]}):0})}])}):c.resolve())},function(e){return d[4]=c.i64.of_int32(d[2].length),c.i64.gt(d[4],c.i64.cast([0,0]))?(d[5]=a[5].get("sticker_id"),c.storedProcedure(b("LSSetMessageDisplayedContentTypes"),a[1],d[0],d[1],a[3],!1,c.i64.neq(d[5],void 0))):c.resolve()},function(a){return a=[d[0],d[1]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure";a.__tables__=["attachments"];e.exports=a}),null);
__d("LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure",["LSLocalApplyOptimisticMessageWithAttachmentsV2","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSLocalApplyOptimisticMessageWithAttachmentsV2"),e.senderId,e.threadKey,e.threadType,e.text,e.snippet,e.extraSendMessageParams);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSLocalCreateOptimisticCommunityChatSubThread",["LSLocalApplyOptimisticCommunityChatSubThread"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSLocalApplyOptimisticCommunityChatSubThread"),a[0],a[1],a[2]).then(function(a){return a=a,d[0]=a[0],a})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxLocalCreateOptimisticCommunityChatSubThreadStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSLocalCreateOptimisticCommunityChatSubThreadStoredProcedure",["LSLocalCreateOptimisticCommunityChatSubThread","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSLocalCreateOptimisticCommunityChatSubThread"),e.communityId,e.parentThreadId,e.parentMessageId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSMailboxAIBotFeedbackSubmissionStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,SUBMITTED:1});f["default"]=a}),66);
__d("LSOptimisticContributeToTextPrompt",["LSLocalApplyOptimisticMessageV2","LSLocalApplyOptimisticRollCallContribution"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=c.createArray(),d[1]=new c.Map(),d[1].set("snippet_has_emoji",void 0),d[1].set("sticker_id",void 0),d[1].set("sticker_alt_text",void 0),d[1].set("hot_emoji_size",void 0),d[1].set("external_attachment_url",void 0),d[1].set("attribution_app_id",void 0),d[1].set("source",c.i64.cast([0,0])),d[1].set("platform_ref",void 0),d[1].set("platform_token",void 0),d[1].set("reply_source_id",void 0),d[1].set("reply_source_type",void 0),d[1].set("reply_source_type_v2",void 0),d[1].set("mention_data",void 0),d[1].set("mark_read",void 0),d[1].set("calculate_denormalizations",void 0),d[1].set("optimistic_attachment_preview",void 0),d[1].set("initiating_app_id",void 0),d[1].set("initiating_source",void 0),d[1].set("power_up_style",c.i64.cast([0,0])),d[1].set("data_trace_id",void 0),d[1].set("attachments",d[0]),d[1].set("should_copy_attachments",!1),d[1].set("magic_words_data",void 0),d[1].set("local_data_id",void 0),d[1].set("reply_type",void 0),d[1].set("dety_params",void 0),d[1].set("product_type","roll_call"),d[1].set("product_fbid",a[2]),d[1].set("product_attribution",a[3]),c.storedProcedure(b("LSLocalApplyOptimisticMessageV2"),a[1],a[0],c.i64.cast([0,18]),a[4],a[4],d[1],void 0).then(function(a){return a=a,d[2]=a[0],d[3]=a[1],a})},function(e){return d[4]=c.createArray(),c.storedProcedure(b("LSLocalApplyOptimisticRollCallContribution"),a[0],a[2],d[4],d[2],d[3],a[3],c.i64.cast([0,1]),a[4])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticContributeToTextPromptStoredProcedure";a.__tables__=[];e.exports=a}),null);
__d("LSOptimisticContributeToTextPromptStoredProcedure",["LSOptimisticContributeToTextPrompt","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticContributeToTextPrompt"),e.threadKey,e.senderId,e.promptId,e.productAttribution,e.text);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticCreateRollCall",["LSCreateOfflineThreadingID","LSGetViewerFBID","LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(a){return d[0]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSCreateOfflineThreadingID"),d[0]).then(function(a){return a=a,d[1]=a[0],a})},function(b){return c.forEach(c.filter(c.db.table(250).fetch([[[d[1],a[0]]]]),function(b){return c.i64.eq(b.rollCallId,d[1])&&c.i64.eq(b.threadKey,a[0])&&c.i64.lt(b.authorityLevel,c.i64.cast([0,20]))}),function(a){return a["delete"]()})},function(b){return c.db.table(250).add({rollCallId:d[1],threadKey:a[0],rollCallPrompt:a[1],expiryTimestampSec:c.i64.cast([0,0]),isBlurred:!1,authorityLevel:c.i64.cast([0,20]),offlineThreadingId:d[1],canViewWithoutContributing:!1})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("prompt",a[1]),d[2].set("offline_threading_id",d[1]),d[2].set("prompt_type",a[2]),c.storedProcedure(b("LSGetViewerFBID")).then(function(a){return a=a,d[3]=a[0],a})},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[4]=!1:(b=a.item,c.sequence([function(a){return c.filter(c.db.table(14).fetch([[[b.threadKey,d[3]]]]),function(a){return c.i64.eq(a.threadKey,b.threadKey)&&c.i64.eq(c.i64.cast([0,0]),b.mailboxType)&&c.i64.eq(a.contactId,d[3])}).next().then(function(e,f){var a=e.done;e=e.value;return a?d[8]=!1:(f=e.item,c.i64.eq(b.threadType,c.i64.cast([0,152]))?(d[11]=f.threadRoles,c.i64.lt(c.i64.cast([0,7]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,7]),c.i64.cast([0,7]))?d[12]=!1:d[12]=!c.i64.eq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,7]))),d[11]),c.i64.cast([0,0])),d[13]=b.capabilities,d[14]=b.capabilities2,d[15]=b.capabilities3,d[16]=b.capabilities4,d[17]=b.capabilities5,d[19]=c.i64.div(c.i64.cast([0,223]),c.i64.cast([0,64])),d[20]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.sub(c.i64.cast([0,223]),c.i64.mul(d[19],c.i64.cast([0,64]))))),c.i64.lt(c.i64.cast([0,223]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,223]),c.i64.cast([0,267]))?d[18]=!1:(c.i64.eq(d[19],c.i64.cast([0,0]))?d[21]=!c.i64.eq(c.i64.and_(d[20],d[13]),c.i64.cast([0,0])):(c.i64.eq(d[19],c.i64.cast([0,1]))?d[22]=!c.i64.eq(c.i64.and_(d[20],d[14]),c.i64.cast([0,0])):(c.i64.eq(d[19],c.i64.cast([0,2]))?d[23]=!c.i64.eq(c.i64.and_(d[20],d[15]),c.i64.cast([0,0])):(c.i64.eq(d[19],c.i64.cast([0,3]))?d[24]=!c.i64.eq(c.i64.and_(d[20],d[16]),c.i64.cast([0,0])):(c.i64.eq(d[19],c.i64.cast([0,4]))?d[25]=!c.i64.eq(c.i64.and_(d[20],d[17]),c.i64.cast([0,0])):d[25]=!1,d[24]=d[25]),d[23]=d[24]),d[22]=d[23]),d[21]=d[22]),d[18]=d[21]),d[12]===d[18]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),c["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),d[10]=d[12]):d[10]=!1,d[8]=d[10])})},function(a){return d[4]=d[8]}]))})},function(a){return d[4]?d[2].set("perform_action_as_page",!0):0,d[6]=d[2].get("thread_key"),d[7]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewTask"),c.i64.to_string(d[6]),c.i64.cast([0,607]),d[7],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return a=[d[1],d[0]],e[0]=a[0],e[1]=a[1],a}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticCreateRollCallStoredProcedure";a.__tables__=["roll_calls","threads","participants"];e.exports=a}),null);
__d("LSOptimisticCreateRollCallStoredProcedure",["LSOptimisticCreateRollCall","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticCreateRollCall"),e.threadKey,e.prompt,e.promptType);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticUpsertReaction",["LSArrayGetObjectAt","LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTask","LSUpsertReaction"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[21]=b.syncGroup,c.i64.neq(d[21],void 0)?d[20]=d[21]:d[20]=c.i64.cast([0,1]),d[0]=d[20])})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("timestamp_ms",a[1]),d[2].set("message_id",a[2]),d[2].set("actor_id",a[3]),d[2].set("reaction",a[4]),d[2].set("reaction_style",void 0),d[2].set("sync_group",d[0]),d[3]=c.createArray(),d[4]=(d[3].push("reaction"),d[3]),d[5]=d[2].get("message_id"),d[6]=(d[3].push(d[5]),d[3]),d[7]=c.toJSON(d[3]),c.storedProcedure(b("LSCancelTaskByQueueName"),d[7],c.i64.cast([0,29]))},function(e){return a[4]===""?c.sequence([function(d){return c.storedProcedure(b("LSDeleteReaction"),a[0],a[2],a[3])},function(a){return d[8]=void 0}]):c.sequence([function(e){return a[4]==="\u2764\ufe0f"||a[4]==="\u2764\ufe0f"?d[20]="\u2764":d[20]=a[4],c.storedProcedure(b("LSUpsertReaction"),a[0],a[1],a[2],a[3],d[20],c.i64.cast([0,20]),void 0)},function(a){return d[8]=void 0}])},function(a){return void 0?d[9]=!1:d[9]=!0,d[9]?c.resolve(d[10]=void 0):c.sequence([function(a){return d[20]=new c.Map(),d[20].set("feature_tags",void 0),d[21]=new c.Map(),d[21].set("logging_metadata",d[20]),d[22]=new c.Map(),d[30]="product_params",d[23]=d[21].get(d[30]),d[23]?d[24]=!1:d[24]=!0,d[24]?0:(d[23]?d[33]=!1:d[33]=!0,d[33]?d[34]=void 0:(d[37]=new c.Map(),d[41]="product_type",d[38]=d[23].get(d[41]),d[38]!==void 0?d[37].set(d[41],d[38]):0,d[42]="product_extras",d[39]=d[23].get(d[42]),d[39]?d[40]=!1:d[40]=!0,d[40]?0:(d[39]?d[43]=!1:d[43]=!0,d[43]?d[44]=void 0:(d[47]=d[39].get("__typename"),d[47]==="XMSGStoryReplyExtras"?(d[49]=new c.Map(),d[52]="logging",d[50]=d[39].get(d[52]),d[50]?d[51]=!1:d[51]=!0,d[51]?0:(d[50]?d[53]=!1:d[53]=!0,d[53]?d[54]=void 0:(d[57]=new c.Map(),d[65]="story_author_fbid",d[58]=d[50].get(d[65]),d[58]!==void 0?d[57].set(d[65],d[58]):0,d[66]="camera_post_type",d[59]=d[50].get(d[66]),d[59]!==void 0?d[57].set(d[66],d[59]):0,d[67]="story_type",d[60]=d[50].get(d[67]),d[60]!==void 0?d[57].set(d[67],d[60]):0,d[68]="post_source",d[61]=d[50].get(d[68]),d[61]!==void 0?d[57].set(d[68],d[61]):0,d[69]="fb_post_type",d[62]=d[50].get(d[69]),d[62]!==void 0?d[57].set(d[69],d[62]):0,d[70]="conversation_starter_type",d[63]=d[50].get(d[70]),d[63]!==void 0?d[57].set(d[70],d[63]):0,d[71]="story_reply_type",d[64]=d[50].get(d[71]),d[64]!==void 0?d[57].set(d[71],d[64]):0,d[54]=d[57]),d[55]=d[54].keys(),d[56]=c.i64.of_int32(d[55].length),c.i64.neq(d[56],c.i64.cast([0,0]))?d[49].set(d[52],d[54]):0),d[48]=d[49]):(d[47]==="XMSGMarketplaceExtras"?(d[50]=new c.Map(),d[69]="listing_id",d[51]=d[39].get(d[69]),d[51]!==void 0?d[50].set(d[69],d[51]):0,d[70]="initial_clicked_component",d[52]=d[39].get(d[70]),d[52]!==void 0?d[50].set(d[70],d[52]):0,d[71]="initial_tracking",d[53]=d[39].get(d[71]),d[53]!==void 0?d[50].set(d[71],d[53]):0,d[72]="referral_surface",d[54]=d[39].get(d[72]),d[54]!==void 0?d[50].set(d[72],d[54]):0,d[73]="referral_story_type",d[55]=d[39].get(d[73]),d[55]!==void 0?d[50].set(d[73],d[55]):0,d[74]="referral_ui_component",d[56]=d[39].get(d[74]),d[56]!==void 0?d[50].set(d[74],d[56]):0,d[75]="surface",d[57]=d[39].get(d[75]),d[57]!==void 0?d[50].set(d[75],d[57]):0,d[76]="tracking",d[58]=d[39].get(d[76]),d[58]!==void 0?d[50].set(d[76],d[58]):0,d[77]="ui_component",d[59]=d[39].get(d[77]),d[59]!==void 0?d[50].set(d[77],d[59]):0,d[78]="ad_id",d[60]=d[39].get(d[78]),d[60]!==void 0?d[50].set(d[78],d[60]):0,d[79]="server_session_id",d[61]=d[39].get(d[79]),d[61]!==void 0?d[50].set(d[79],d[61]):0,d[80]="cf_page_id",d[62]=d[39].get(d[80]),d[62]!==void 0?d[50].set(d[80],d[62]):0,d[81]="live_shopping_video_id",d[63]=d[39].get(d[81]),d[63]!==void 0?d[50].set(d[81],d[63]):0,d[82]="logging_id",d[64]=d[39].get(d[82]),c.i64.neq(d[64],void 0)?d[50].set(d[82],d[64]):0,d[83]="photo_ids",d[65]=d[39].get(d[83]),d[65]?d[66]=!1:d[66]=!0,d[66]?0:d[50].set(d[83],d[65]),d[84]="is_customized_message",d[67]=d[39].get(d[84]),d[67]!==void 0?d[50].set(d[84],d[67]):0,d[85]="referral_code",d[68]=d[39].get(d[85]),d[68]!==void 0?d[50].set(d[85],d[68]):0,d[49]=d[50]):(d[47]==="XMSGClickToMessengerAdExtras"?(d[51]=new c.Map(),d[62]="encrypted_ads_token",d[52]=d[39].get(d[62]),d[52]!==void 0?d[51].set(d[62],d[52]):0,d[63]="product_type",d[53]=d[39].get(d[63]),d[53]!==void 0?d[51].set(d[63],d[53]):0,d[64]="post_id",d[54]=d[39].get(d[64]),d[54]!==void 0?d[51].set(d[64],d[54]):0,d[65]="ad_id",d[55]=d[39].get(d[65]),d[55]!==void 0?d[51].set(d[65],d[55]):0,d[66]="page_id",d[56]=d[39].get(d[66]),d[56]!==void 0?d[51].set(d[66],d[56]):0,d[67]="photo_id",d[57]=d[39].get(d[67]),d[57]!==void 0?d[51].set(d[67],d[57]):0,d[68]="photo_index",d[58]=d[39].get(d[68]),c.i64.neq(d[58],void 0)?d[51].set(d[68],d[58]):0,d[69]="fallback_url",d[59]=d[39].get(d[69]),d[59]!==void 0?d[51].set(d[69],d[59]):0,d[70]="product_id",d[60]=d[39].get(d[70]),d[60]!==void 0?d[51].set(d[70],d[60]):0,d[71]="user_id",d[61]=d[39].get(d[71]),d[61]!==void 0?d[51].set(d[71],d[61]):0,d[50]=d[51]):(d[47]==="XMSGZorroMessageExtras"?(d[52]=new c.Map(),d[54]="is_enabled",d[53]=d[39].get(d[54]),d[53]!==void 0?d[52].set(d[54],d[53]):0,d[51]=d[52]):(d[47]==="XMSGGenAISuggestedPromptExtras"?(d[53]=new c.Map(),d[56]="prompt_type",d[54]=d[39].get(d[56]),d[54]!==void 0?d[53].set(d[56],d[54]):0,d[57]="qpl_join_id",d[55]=d[39].get(d[57]),d[55]!==void 0?d[53].set(d[57],d[55]):0,d[52]=d[53]):(d[47]==="XMSGGenAIMultiModalExtras"?(d[54]=new c.Map(),d[58]="should_skip_genai_eval",d[55]=d[39].get(d[58]),d[55]!==void 0?d[54].set(d[58],d[55]):0,d[59]="associated_multimodal_message_id",d[56]=d[39].get(d[59]),d[56]!==void 0?d[54].set(d[59],d[56]):0,d[60]="qpl_join_id",d[57]=d[39].get(d[60]),d[57]!==void 0?d[54].set(d[60],d[57]):0,d[53]=d[54]):(d[47]==="XMSGGenAIFlashImagineExtras"?(d[55]=new c.Map(),d[58]="seed",d[56]=d[39].get(d[58]),c.i64.neq(d[56],void 0)?d[55].set(d[58],d[56]):0,d[59]="qpl_join_id",d[57]=d[39].get(d[59]),d[57]!==void 0?d[55].set(d[59],d[57]):0,d[54]=d[55]):(d[47]==="XMSGShareSheetExtras"?(d[56]=new c.Map(),d[58]="recipient_selection_session_id",d[57]=d[39].get(d[58]),d[57]!==void 0?d[56].set(d[58],d[57]):0,d[55]=d[56]):(d[47]==="XMSGGenAIAssistantAPIExtras"?(d[57]=new c.Map(),d[87]="referrer_session_id",d[58]=d[39].get(d[87]),d[58]!==void 0?d[57].set(d[87],d[58]):0,d[88]="thread_session_id",d[59]=d[39].get(d[88]),d[59]!==void 0?d[57].set(d[88],d[59]):0,d[89]="prompt_id",d[60]=d[39].get(d[89]),d[60]!==void 0?d[57].set(d[89],d[60]):0,d[90]="prompt_type",d[61]=d[39].get(d[90]),d[61]!==void 0?d[57].set(d[90],d[61]):0,d[91]="prompt_fit_topic",d[62]=d[39].get(d[91]),d[62]!==void 0?d[57].set(d[91],d[62]):0,d[92]="location_extras",d[63]=d[39].get(d[92]),d[63]?d[64]=!1:d[64]=!0,d[64]?0:(d[63]?d[109]=!1:d[109]=!0,d[109]?d[110]=void 0:(d[113]=new c.Map(),d[117]="has_previous_perm_prompt",d[114]=d[63].get(d[117]),d[114]!==void 0?d[113].set(d[117],d[114]):0,d[118]="latitude",d[115]=d[63].get(d[118]),d[115]!==void 0?d[113].set(d[118],d[115]):0,d[119]="longitude",d[116]=d[63].get(d[119]),d[116]!==void 0?d[113].set(d[119],d[116]):0,d[110]=d[113]),d[111]=d[110].keys(),d[112]=c.i64.of_int32(d[111].length),c.i64.neq(d[112],c.i64.cast([0,0]))?d[57].set(d[92],d[110]):0),d[93]="qpl_join_id",d[65]=d[39].get(d[93]),d[65]!==void 0?d[57].set(d[93],d[65]):0,d[94]="meta_ai_prompt_type",d[66]=d[39].get(d[94]),d[66]!==void 0?d[57].set(d[94],d[66]):0,d[95]="is_subsequent_send",d[67]=d[39].get(d[95]),d[67]!==void 0?d[57].set(d[95],d[67]):0,d[96]="context_injection_type",d[68]=d[39].get(d[96]),d[68]!==void 0?d[57].set(d[96],d[68]):0,d[97]="context_injection_timestamp_ms",d[69]=d[39].get(d[97]),d[69]!==void 0?d[57].set(d[97],d[69]):0,d[98]="meta_ai_response_to_persist",d[70]=d[39].get(d[98]),d[70]?d[71]=!1:d[71]=!0,d[71]?0:(d[70]?d[109]=!1:d[109]=!0,d[109]?d[110]=void 0:(d[113]=new c.Map(),d[120]="text",d[114]=d[70].get(d[120]),d[114]!==void 0?d[113].set(d[120],d[114]):0,d[121]="bot_response_id",d[115]=d[70].get(d[121]),d[115]!==void 0?d[113].set(d[121],d[115]):0,d[122]="bot_request_id",d[116]=d[70].get(d[122]),d[116]!==void 0?d[113].set(d[122],d[116]):0,d[123]="external_search_params",d[117]=d[70].get(d[123]),d[117]?d[118]=!1:d[118]=!0,d[118]?0:(d[117]?d[125]=!1:d[125]=!0,d[125]?d[126]=void 0:(d[129]=new c.Map(),d[137]="search_result_uri",d[130]=d[117].get(d[137]),d[130]?d[131]=!1:d[131]=!0,d[131]?0:(d[142]=c.i64.of_int32(d[130].length),c.i64.neq(d[142],c.i64.cast([0,0]))?d[129].set(d[137],d[130]):0),d[138]="search_query",d[132]=d[117].get(d[138]),d[132]!==void 0?d[129].set(d[138],d[132]):0,d[139]="attribution_link",d[133]=d[117].get(d[139]),d[133]!==void 0?d[129].set(d[139],d[133]):0,d[140]="search_engine",d[134]=d[117].get(d[140]),d[134]!==void 0?d[129].set(d[140],d[134]):0,d[141]="references_title",d[135]=d[117].get(d[141]),d[135]?d[136]=!1:d[136]=!0,d[136]?0:(d[142]=c.i64.of_int32(d[135].length),c.i64.neq(d[142],c.i64.cast([0,0]))?d[129].set(d[141],d[135]):0),d[126]=d[129]),d[127]=d[126].keys(),d[128]=c.i64.of_int32(d[127].length),c.i64.neq(d[128],c.i64.cast([0,0]))?d[113].set(d[123],d[126]):0),d[124]="followup_prompt_text",d[119]=d[70].get(d[124]),d[119]!==void 0?d[113].set(d[124],d[119]):0,d[110]=d[113]),d[111]=d[110].keys(),d[112]=c.i64.of_int32(d[111].length),c.i64.neq(d[112],c.i64.cast([0,0]))?d[57].set(d[98],d[110]):0),d[99]="gql_dark_test_qpl_join_id",d[72]=d[39].get(d[99]),d[72]!==void 0?d[57].set(d[99],d[72]):0,d[100]="gql_dark_test_client_start_time",d[73]=d[39].get(d[100]),d[73]!==void 0?d[57].set(d[100],d[73]):0,d[101]="prompt_context",d[74]=d[39].get(d[101]),d[74]?d[75]=!1:d[75]=!0,d[75]?0:(d[74]?d[109]=!1:d[109]=!0,d[109]?d[110]=void 0:(d[113]=new c.Map(),d[116]="context_token",d[114]=d[74].get(d[116]),d[114]!==void 0?d[113].set(d[116],d[114]):0,d[117]="context_token_type",d[115]=d[74].get(d[117]),c.i64.neq(d[115],void 0)?d[113].set(d[117],d[115]):0,d[110]=d[113]),d[111]=d[110].keys(),d[112]=c.i64.of_int32(d[111].length),c.i64.neq(d[112],c.i64.cast([0,0]))?d[57].set(d[101],d[110]):0),d[102]="imagine_flash_extras",d[76]=d[39].get(d[102]),d[76]?d[77]=!1:d[77]=!0,d[77]?0:(d[76]?d[109]=!1:d[109]=!0,d[109]?d[110]=void 0:(d[113]=new c.Map(),d[116]="seed",d[114]=d[76].get(d[116]),c.i64.neq(d[114],void 0)?d[113].set(d[116],d[114]):0,d[117]="qpl_join_id",d[115]=d[76].get(d[117]),d[115]!==void 0?d[113].set(d[117],d[115]):0,d[110]=d[113]),d[111]=d[110].keys(),d[112]=c.i64.of_int32(d[111].length),c.i64.neq(d[112],c.i64.cast([0,0]))?d[57].set(d[102],d[110]):0),d[103]="conversation_marker_id",d[78]=d[39].get(d[103]),d[78]!==void 0?d[57].set(d[103],d[78]):0,d[104]="multi_modal_extras",d[79]=d[39].get(d[104]),d[79]?d[80]=!1:d[80]=!0,d[80]?0:(d[79]?d[109]=!1:d[109]=!0,d[109]?d[110]=void 0:(d[113]=new c.Map(),d[117]="should_skip_genai_eval",d[114]=d[79].get(d[117]),d[114]!==void 0?d[113].set(d[117],d[114]):0,d[118]="associated_multimodal_message_id",d[115]=d[79].get(d[118]),d[115]!==void 0?d[113].set(d[118],d[115]):0,d[119]="qpl_join_id",d[116]=d[79].get(d[119]),d[116]!==void 0?d[113].set(d[119],d[116]):0,d[110]=d[113]),d[111]=d[110].keys(),d[112]=c.i64.of_int32(d[111].length),c.i64.neq(d[112],c.i64.cast([0,0]))?d[57].set(d[104],d[110]):0),d[105]="ads_extras",d[81]=d[39].get(d[105]),d[81]?d[82]=!1:d[82]=!0,d[82]?0:(d[81]?d[109]=!1:d[109]=!0,d[109]?d[110]=void 0:(d[113]=new c.Map(),d[116]="context",d[114]=d[81].get(d[116]),d[114]!==void 0?d[113].set(d[116],d[114]):0,d[117]="is_reply_to_ads_ai",d[115]=d[81].get(d[117]),d[115]!==void 0?d[113].set(d[117],d[115]):0,d[110]=d[113]),d[111]=d[110].keys(),d[112]=c.i64.of_int32(d[111].length),c.i64.neq(d[112],c.i64.cast([0,0]))?d[57].set(d[105],d[110]):0),d[106]="suggested_prompt_extras",d[83]=d[39].get(d[106]),d[83]?d[84]=!1:d[84]=!0,d[84]?0:(d[83]?d[109]=!1:d[109]=!0,d[109]?d[110]=void 0:(d[113]=new c.Map(),d[116]="prompt_type",d[114]=d[83].get(d[116]),d[114]!==void 0?d[113].set(d[116],d[114]):0,d[117]="qpl_join_id",d[115]=d[83].get(d[117]),d[115]!==void 0?d[113].set(d[117],d[115]):0,d[110]=d[113]),d[111]=d[110].keys(),d[112]=c.i64.of_int32(d[111].length),c.i64.neq(d[112],c.i64.cast([0,0]))?d[57].set(d[106],d[110]):0),d[107]="disable_server_mqtt_typing_indicator",d[85]=d[39].get(d[107]),d[85]!==void 0?d[57].set(d[107],d[85]):0,d[108]="enable_web_scraping",d[86]=d[39].get(d[108]),d[86]!==void 0?d[57].set(d[108],d[86]):0,d[56]=d[57]):(d[47]==="XMSGProductHighlightExtras"?(d[58]=new c.Map(),d[61]="product_highlight_type",d[59]=d[39].get(d[61]),d[59]!==void 0?d[58].set(d[61],d[59]):0,d[62]="conversation_marker",d[60]=d[39].get(d[62]),d[60]!==void 0?d[58].set(d[62],d[60]):0,d[57]=d[58]):(d[47]==="XMSGMagicMessengerExtras"?(d[59]=new c.Map(),d[61]="is_magic_thread",d[60]=d[39].get(d[61]),d[60]!==void 0?d[59].set(d[61],d[60]):0,d[58]=d[59]):(d[47]==="XMSGAdsAIExtras"?(d[60]=new c.Map(),d[63]="context",d[61]=d[39].get(d[63]),d[61]!==void 0?d[60].set(d[63],d[61]):0,d[64]="is_reply_to_ads_ai",d[62]=d[39].get(d[64]),d[62]!==void 0?d[60].set(d[64],d[62]):0,d[59]=d[60]):(d[47]==="XMSGBizappExtras"?(d[61]=new c.Map(),d[64]="message_source",d[62]=d[39].get(d[64]),d[62]!==void 0?d[61].set(d[64],d[62]):0,d[65]="message_trigger",d[63]=d[39].get(d[65]),d[63]!==void 0?d[61].set(d[65],d[63]):0,d[60]=d[61]):d[60]=d[39],d[59]=d[60]),d[58]=d[59]),d[57]=d[58]),d[56]=d[57]),d[55]=d[56]),d[54]=d[55]),d[53]=d[54]),d[52]=d[53]),d[51]=d[52]),d[50]=d[51]),d[49]=d[50]),d[48]=d[49]),d[48].set("__typename",d[47]),d[44]=d[48]),d[45]=d[44].keys(),d[46]=c.i64.of_int32(d[45].length),c.i64.neq(d[46],c.i64.cast([0,0]))?d[37].set(d[42],d[44]):0),d[34]=d[37]),d[35]=d[34].keys(),d[36]=c.i64.of_int32(d[35].length),c.i64.neq(d[36],c.i64.cast([0,0]))?d[22].set(d[30],d[34]):0),d[31]="logging_metadata",d[25]=d[21].get(d[31]),d[25]?d[26]=!1:d[26]=!0,d[26]?c.resolve():c.sequence([function(a){return d[25]?d[33]=!1:d[33]=!0,d[33]?c.resolve(d[34]=void 0):c.sequence([function(a){return d[37]=new c.Map(),d[42]="feature_tags",d[38]=d[25].get(d[42]),d[38]?d[39]=!1:d[39]=!0,d[39]?0:(d[44]=c.i64.of_int32(d[38].length),c.i64.neq(d[44],c.i64.cast([0,0]))?d[37].set(d[42],d[38]):0),d[43]="content_model",d[40]=d[25].get(d[43]),d[40]?d[41]=!1:d[41]=!0,d[41]?c.resolve():c.sequence([function(a){return d[40]?d[44]=!1:d[44]=!0,d[44]?c.resolve(d[45]=void 0):c.sequence([function(a){return d[48]=new c.Map(),d[59]="hashed_content",d[49]=d[40].get(d[59]),d[49]!==void 0?d[48].set(d[59],d[49]):0,d[60]="hashed_product_extras",d[50]=d[40].get(d[60]),d[50]!==void 0?d[48].set(d[60],d[50]):0,d[61]="client_metadata",d[51]=d[40].get(d[61]),d[51]?d[52]=!1:d[52]=!0,d[52]?0:(d[51]?d[65]=!1:d[65]=!0,d[65]?d[66]=void 0:(d[69]=d[51].get("__typename"),d[69]==="XMSGStoriesClientMetadata"?(d[71]=new c.Map(),d[73]="story_reply_type",d[72]=d[51].get(d[73]),d[72]!==void 0?d[71].set(d[73],d[72]):0,d[70]=d[71]):d[70]=d[51],d[70].set("__typename",d[69]),d[66]=d[70]),d[67]=d[66].keys(),d[68]=c.i64.of_int32(d[67].length),c.i64.neq(d[68],c.i64.cast([0,0]))?d[48].set(d[61],d[66]):0),d[62]="client_extras",d[53]=d[40].get(d[62]),d[53]?d[54]=!1:d[54]=!0,d[54]?0:(d[53]?d[65]=!1:d[65]=!0,d[65]?d[66]=void 0:(d[69]=d[53].get("__typename"),d[69]==="XMSGMarketplaceClientExtras"?(d[71]=new c.Map(),d[79]="initial_clicked_component",d[72]=d[53].get(d[79]),d[72]!==void 0?d[71].set(d[79],d[72]):0,d[80]="initial_tracking",d[73]=d[53].get(d[80]),d[73]!==void 0?d[71].set(d[80],d[73]):0,d[81]="referral_surface",d[74]=d[53].get(d[81]),d[74]!==void 0?d[71].set(d[81],d[74]):0,d[82]="referral_story_type",d[75]=d[53].get(d[82]),d[75]!==void 0?d[71].set(d[82],d[75]):0,d[83]="referral_ui_component",d[76]=d[53].get(d[83]),d[76]!==void 0?d[71].set(d[83],d[76]):0,d[84]="surface",d[77]=d[53].get(d[84]),d[77]!==void 0?d[71].set(d[84],d[77]):0,d[85]="ui_component",d[78]=d[53].get(d[85]),d[78]!==void 0?d[71].set(d[85],d[78]):0,d[70]=d[71]):d[70]=d[53],d[70].set("__typename",d[69]),d[66]=d[70]),d[67]=d[66].keys(),d[68]=c.i64.of_int32(d[67].length),c.i64.neq(d[68],c.i64.cast([0,0]))?d[48].set(d[62],d[66]):0),d[63]="containing_post",d[55]=d[40].get(d[63]),d[55]?d[56]=!1:d[56]=!0,d[56]?c.resolve():c.sequence([function(a){return d[55]?d[65]=!1:d[65]=!0,d[65]?c.resolve(d[66]=void 0):c.sequence([function(a){return d[69]=new c.Map(),d[77]="key_type",d[70]=d[55].get(d[77]),d[70]!==void 0?d[69].set(d[77],d[70]):0,d[78]="fb_post_type",d[71]=d[55].get(d[78]),d[71]?d[72]=!1:d[72]=!0,d[72]?0:(d[81]=c.i64.of_int32(d[71].length),c.i64.neq(d[81],c.i64.cast([0,0]))?d[69].set(d[78],d[71]):0),d[79]="photos",d[73]=d[55].get(d[79]),d[73]?d[74]=!1:d[74]=!0,d[74]?c.resolve():c.sequence([function(a){return d[73]?d[81]=!1:d[81]=!0,d[81]?c.resolve(d[82]=void 0):c.sequence([function(a){return d[84]=c.createArray(),d[85]=c.i64.of_int32(d[73].length),c.i64.gt(d[85],c.i64.cast([0,0]))?c.loopAsync(d[85],function(a){return d[86]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[73],d[86]).then(function(a){return a=a,d[87]=a[0],d[88]=a[1],a})},function(a){return d[89]=new c.Map(),d[91]="key_type",d[90]=d[87].get(d[91]),d[90]!==void 0?d[89].set(d[91],d[90]):0,d[92]=(d[84].push(d[89]),d[84])}])}):c.resolve()},function(a){return d[82]=d[84]}])},function(a){return d[83]=c.i64.of_int32(d[82].length),c.i64.neq(d[83],c.i64.cast([0,0]))?d[69].set(d[79],d[82]):0}])},function(a){return d[80]="videos",d[75]=d[55].get(d[80]),d[75]?d[76]=!1:d[76]=!0,d[76]?c.resolve():c.sequence([function(a){return d[75]?d[81]=!1:d[81]=!0,d[81]?c.resolve(d[82]=void 0):c.sequence([function(a){return d[84]=c.createArray(),d[85]=c.i64.of_int32(d[75].length),c.i64.gt(d[85],c.i64.cast([0,0]))?c.loopAsync(d[85],function(a){return d[86]=a,c.sequence([function(a){return c.nativeTypeOperation("Array",b("LSArrayGetObjectAt"),d[75],d[86]).then(function(a){return a=a,d[87]=a[0],d[88]=a[1],a})},function(a){return d[89]=new c.Map(),d[91]="key_type",d[90]=d[87].get(d[91]),d[90]!==void 0?d[89].set(d[91],d[90]):0,d[92]=(d[84].push(d[89]),d[84])}])}):c.resolve()},function(a){return d[82]=d[84]}])},function(a){return d[83]=c.i64.of_int32(d[82].length),c.i64.neq(d[83],c.i64.cast([0,0]))?d[69].set(d[80],d[82]):0}])},function(a){return d[66]=d[69]}])},function(a){return d[67]=d[66].keys(),d[68]=c.i64.of_int32(d[67].length),c.i64.neq(d[68],c.i64.cast([0,0]))?d[48].set(d[63],d[66]):0}])},function(a){return d[64]="metadata",d[57]=d[40].get(d[64]),d[57]?d[58]=!1:d[58]=!0,d[58]?0:(d[57]?d[65]=!1:d[65]=!0,d[65]?d[66]=void 0:(d[69]=d[57].get("__typename"),d[69]==="XMSGGroupsContentLoggingMetadata"?(d[71]=new c.Map(),d[73]="num_members",d[72]=d[57].get(d[73]),c.i64.neq(d[72],void 0)?d[71].set(d[73],d[72]):0,d[70]=d[71]):(d[69]==="XMSGStoriesContentLoggingMetadata"?(d[72]=new c.Map(),d[77]="author",d[73]=d[57].get(d[77]),d[73]?d[74]=!1:d[74]=!0,d[74]?0:(d[73]?d[80]=!1:d[80]=!0,d[80]?d[81]=void 0:(d[84]=new c.Map(),d[87]="profile",d[85]=d[73].get(d[87]),d[85]?d[86]=!1:d[86]=!0,d[86]?0:(d[85]?d[88]=!1:d[88]=!0,d[88]?d[89]=void 0:(d[92]=new c.Map(),d[94]="id",d[93]=d[85].get(d[94]),d[93]!==void 0?d[92].set(d[94],d[93]):0,d[89]=d[92]),d[90]=d[89].keys(),d[91]=c.i64.of_int32(d[90].length),c.i64.neq(d[91],c.i64.cast([0,0]))?d[84].set(d[87],d[89]):0),d[81]=d[84]),d[82]=d[81].keys(),d[83]=c.i64.of_int32(d[82].length),c.i64.neq(d[83],c.i64.cast([0,0]))?d[72].set(d[77],d[81]):0),d[78]="post_source",d[75]=d[57].get(d[78]),d[75]!==void 0?d[72].set(d[78],d[75]):0,d[79]="story_type",d[76]=d[57].get(d[79]),d[76]!==void 0?d[72].set(d[79],d[76]):0,d[71]=d[72]):d[71]=d[57],d[70]=d[71]),d[70].set("__typename",d[69]),d[66]=d[70]),d[67]=d[66].keys(),d[68]=c.i64.of_int32(d[67].length),c.i64.neq(d[68],c.i64.cast([0,0]))?d[48].set(d[64],d[66]):0),d[45]=d[48]}])},function(a){return d[46]=d[45].keys(),d[47]=c.i64.of_int32(d[46].length),c.i64.neq(d[47],c.i64.cast([0,0]))?d[37].set(d[43],d[45]):0}])},function(a){return d[34]=d[37]}])},function(a){return d[35]=d[34].keys(),d[36]=c.i64.of_int32(d[35].length),c.i64.neq(d[36],c.i64.cast([0,0]))?d[22].set(d[31],d[34]):0}])},function(a){return d[32]="send_instance_metadata",d[27]=d[21].get(d[32]),d[27]?d[28]=!1:d[28]=!0,d[28]?0:(d[27]?d[33]=!1:d[33]=!0,d[33]?d[34]=void 0:(d[37]=new c.Map(),d[40]="send_instance_id",d[38]=d[27].get(d[40]),d[38]!==void 0?d[37].set(d[40],d[38]):0,d[41]="send_instance_group_size",d[39]=d[27].get(d[41]),c.i64.neq(d[39],void 0)?d[37].set(d[41],d[39]):0,d[34]=d[37]),d[35]=d[34].keys(),d[36]=c.i64.of_int32(d[35].length),c.i64.neq(d[36],c.i64.cast([0,0]))?d[22].set(d[32],d[34]):0),d[29]=c.toJSON(d[22]),d[10]=d[29]}])},function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[11]=c.i64.cast([0,1]):(b=a.item,d[21]=b.syncGroup,c.i64.neq(d[21],void 0)?d[20]=d[21]:d[20]=c.i64.cast([0,1]),d[11]=d[20])})},function(e){return d[13]=new c.Map(),d[13].set("thread_key",a[0]),d[13].set("timestamp_ms",a[1]),d[13].set("message_id",a[2]),d[13].set("actor_id",a[3]),d[13].set("reaction",a[4]),d[13].set("reaction_style",void 0),d[13].set("sync_group",d[11]),d[13].set("send_attribution",a[5]),d[13].set("dataclass_params",d[10]),d[13].set("attachment_fbid",void 0),d[14]=c.createArray(),d[15]=(d[14].push("reaction"),d[14]),d[16]=d[13].get("message_id"),d[17]=(d[14].push(d[16]),d[14]),d[18]=c.toJSON(d[14]),d[19]=c.toJSON(d[13]),c.storedProcedure(b("LSIssueNewTask"),d[18],c.i64.cast([0,29]),d[19],void 0,void 0,a[6]==null?c.i64.cast([0,0]):a[6],c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUpsertReactionStoredProcedure";a.__tables__=["threads"];e.exports=a}),null);
__d("LSOptimisticUpsertReactionStoredProcedure",["LSOptimisticUpsertReaction","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticUpsertReaction"),e.threadKey,e.timestampMs,e.messageId,e.actorId,e.reaction,e.sendAttribution,e.pluginType);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSOptimisticUpsertReactionV2",["LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTaskWithExtraOperations","LSUpdateOrInsertReactionV2","LSUpsertReaction"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return c.i64.eq(a[8],c.i64.cast([0,2]))?c.sequence([function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[16]=c.i64.cast([0,1]):(b=a.item,d[25]=b.syncGroup,c.i64.neq(d[25],void 0)?d[24]=d[25]:d[24]=c.i64.cast([0,1]),d[16]=d[24])})},function(e){return d[18]=new c.Map(),d[18].set("thread_id",a[1]),d[18].set("message_id",a[2]),d[18].set("message_timestamp",a[3]),d[18].set("actor_id",a[0]),d[18].set("reaction_fbid",a[4]),d[18].set("reaction_style",a[7]),d[18].set("operation",a[8]),d[18].set("viewer_is_reactor",a[6]),d[18].set("current_count",a[5]),d[18].set("reaction_literal",a[9]),d[18].set("sync_group",d[16]),d[19]=c.createArray(),d[20]=(d[19].push("reaction_v2"),d[19]),d[21]=d[18].get("message_id"),d[22]=(d[19].push(d[21]),d[19]),d[23]=c.toJSON(d[19]),c.storedProcedure(b("LSCancelTaskByQueueName"),d[23],c.i64.cast([0,604]))}]):c.resolve()},function(e){return[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?d[0]=c.i64.add(a[5],c.i64.cast([-1,4294967295])):d[0]=c.i64.add(a[5],c.i64.cast([0,1])),[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?d[1]=!1:d[1]=!0,d[2]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSUpdateOrInsertReactionV2"),a[1],a[2],a[4],a[9],d[0],c.i64.cast([0,20]),d[1],c.i64.cast([0,0]),d[2])},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[3]=void 0:(b=a.item,d[3]=b.threadType)})},function(e){return c.i64.neq(d[3],c.i64.cast([0,23]))?[c.i64.cast([0,2]),c.i64.cast([0,3])].some(function(b){return c.i64.eq(a[8],b)})?c.i64.eq(a[8],c.i64.cast([0,2]))?c.storedProcedure(b("LSDeleteReaction"),a[1],a[2],a[0]):c.sequence([function(b){return c.filter(c.db.table(8).fetch([[[a[1],a[2],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&b.messageId===a[2]&&c.i64.eq(b.actorId,a[0])&&c.i64.eq(c.i64.cast([0,0]),c.i64.cast([0,0]))}).next().then(function(a,b){var c=a.done;a=a.value;return c?d[16]=void 0:(b=a.item,d[16]=b.reaction)})},function(e){return a[9]!==void 0?(a[9]==="\u2764\ufe0f"||a[9]==="\u2764\ufe0f"?d[18]="\u2764":d[18]=a[9],d[18]===d[16]?c.storedProcedure(b("LSDeleteReaction"),a[1],a[2],a[0]):c.resolve()):c.resolve()}]):a[9]!==void 0?(a[9]==="\u2764\ufe0f"||a[9]==="\u2764\ufe0f"?d[16]="\u2764":d[16]=a[9],d[17]=c.i64.of_float(Date.now()),c.storedProcedure(b("LSUpsertReaction"),a[1],a[3],a[2],a[0],d[16],c.i64.cast([0,20]),d[17])):c.resolve():c.resolve()},function(b){return c.db.table(9).fetch([[[a[1]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[5]=c.i64.cast([0,1]):(b=a.item,d[17]=b.syncGroup,c.i64.neq(d[17],void 0)?d[16]=d[17]:d[16]=c.i64.cast([0,1]),d[5]=d[16])})},function(b){return d[7]=new c.Map(),d[7].set("thread_id",a[1]),d[7].set("message_id",a[2]),d[7].set("message_timestamp",a[3]),d[7].set("actor_id",a[0]),d[7].set("reaction_fbid",a[4]),d[7].set("reaction_style",a[7]),d[7].set("current_count",a[5]),d[7].set("viewer_is_reactor",a[6]),d[7].set("operation",a[8]),d[7].set("reaction_literal",a[9]),d[7].set("entry_point",void 0),d[7].set("sync_group",d[5]),c.db.table(9).fetch([[[a[1]]]]).next().then(function(b,e){var f=b.done;b=b.value;return f?d[8]=!1:(e=b.item,c.sequence([function(b){return c.filter(c.db.table(14).fetch([[[e.threadKey,a[0]]]]),function(b){return c.i64.eq(b.threadKey,e.threadKey)&&c.i64.eq(c.i64.cast([0,0]),e.mailboxType)&&c.i64.eq(b.contactId,a[0])}).next().then(function(b,f){var a=b.done;b=b.value;return a?d[16]=!1:(f=b.item,c.i64.eq(e.threadType,c.i64.cast([0,152]))?(d[19]=f.threadRoles,c.i64.lt(c.i64.cast([0,7]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,7]),c.i64.cast([0,7]))?d[20]=!1:d[20]=!c.i64.eq(c.i64.and_(c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.cast([0,7]))),d[19]),c.i64.cast([0,0])),d[21]=e.capabilities,d[22]=e.capabilities2,d[23]=e.capabilities3,d[24]=e.capabilities4,d[25]=e.capabilities5,d[27]=c.i64.div(c.i64.cast([0,223]),c.i64.cast([0,64])),d[28]=c.i64.lsl_(c.i64.cast([0,1]),c.i64.to_int32(c.i64.sub(c.i64.cast([0,223]),c.i64.mul(d[27],c.i64.cast([0,64]))))),c.i64.lt(c.i64.cast([0,223]),c.i64.cast([0,0]))||c.i64.gt(c.i64.cast([0,223]),c.i64.cast([0,267]))?d[26]=!1:(c.i64.eq(d[27],c.i64.cast([0,0]))?d[29]=!c.i64.eq(c.i64.and_(d[28],d[21]),c.i64.cast([0,0])):(c.i64.eq(d[27],c.i64.cast([0,1]))?d[30]=!c.i64.eq(c.i64.and_(d[28],d[22]),c.i64.cast([0,0])):(c.i64.eq(d[27],c.i64.cast([0,2]))?d[31]=!c.i64.eq(c.i64.and_(d[28],d[23]),c.i64.cast([0,0])):(c.i64.eq(d[27],c.i64.cast([0,3]))?d[32]=!c.i64.eq(c.i64.and_(d[28],d[24]),c.i64.cast([0,0])):(c.i64.eq(d[27],c.i64.cast([0,4]))?d[33]=!c.i64.eq(c.i64.and_(d[28],d[25]),c.i64.cast([0,0])):d[33]=!1,d[32]=d[33]),d[31]=d[32]),d[30]=d[31]),d[29]=d[30]),d[26]=d[29]),d[20]===d[26]?0:(function(a){c.logger(a).mustfix(a)}("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),c["throw"]("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),d[18]=d[20]):d[18]=!1,d[16]=d[18])})},function(a){return d[8]=d[16]}]))})},function(a){return d[8]?d[7].set("perform_action_as_page",!0):0,d[10]=c.createArray(),d[11]=(d[10].push("reaction_v2"),d[10]),d[12]=d[7].get("message_id"),d[13]=(d[10].push(d[12]),d[10]),d[14]=c.toJSON(d[10]),d[15]=c.toJSON(d[7]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),d[14],c.i64.cast([0,604]),d[15],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxOptimisticUpsertReactionV2StoredProcedure";a.__tables__=["threads","reactions","participants"];e.exports=a}),null);
__d("LSOptimisticUpsertReactionV2StoredProcedure",["LSOptimisticUpsertReactionV2","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSOptimisticUpsertReactionV2"),e.actorId,e.threadId,e.messageId,e.messageTimestamp,e.reactionFbid,e.currentCount,e.viewerIsReactor,e.reactionStyle,e.operation,e.reactionLiteral);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSSubmitGenAIBotFeedback",["LSIssueNewTaskWithExtraOperations"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("bot_feedback_kind",a[0]),d[0].set("bot_response_id",a[2]),d[0].set("feedback_kind_type",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),"submit_gen_ai_bot_feedback",c.i64.cast([0,756]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))},function(b){return c.db.table(315).fetch([[[a[2]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[2]=c.i64.cast([0,0]):(b=a.item,d[2]=b.feedbackSubmissionStatus)})},function(b){return c.i64.eq(d[2],c.i64.cast([0,0]))?c.db.table(315).add({botResponseId:a[2],feedbackSubmissionStatus:c.i64.cast([0,1]),feedbackKindType:a[0]}):c.forEach(c.db.table(315).fetch([[[a[2]]]]),function(b){var d=b.update;b.item;return d({feedbackSubmissionStatus:c.i64.cast([0,1]),feedbackKindType:a[0]})})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxSubmitGenAIBotFeedbackStoredProcedure";a.__tables__=["ai_bot_feedback_submission_status"];e.exports=a}),null);
__d("LSSubmitGenAIBotFeedbackStoredProcedure",["LSSubmitGenAIBotFeedback","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSSubmitGenAIBotFeedback"),e.botFeedbackKind,e.feedbackKindType,e.botResponseId);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSTaskType",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["BatchLookup","CreateThread","DeleteMessage","DeviceRegistration","DisableDevice","EnableDevice","MessageRangeQuery","PreKeyUpload","SendMessage","SendOrRemoveReaction","UnsendMessage","VerifyThreadChecksum"]);c=a;f["default"]=c}),66);
__d("LSTasks",["FBLogger","I64","LSIntEnum","LSJson","LSPendingTasksPluginType","LSTaskType","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a){switch(a){case c("LSTaskType").BatchLookup:return"10003";case c("LSTaskType").CreateThread:return"10002";case c("LSTaskType").DeleteMessage:return"155";case c("LSTaskType").DeviceRegistration:return"10001";case c("LSTaskType").DisableDevice:return"10007";case c("LSTaskType").EnableDevice:return"10006";case c("LSTaskType").MessageRangeQuery:return"14";case c("LSTaskType").PreKeyUpload:return"10004";case c("LSTaskType").SendMessage:return"10005";case c("LSTaskType").SendOrRemoveReaction:return"29";case c("LSTaskType").UnsendMessage:return"33";case c("LSTaskType").VerifyThreadChecksum:throw c("FBLogger")("ls_web_init").mustfixThrow("Not a supported task type.")}}function a(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){yield a.pending_tasks.add({context:j(b),dataTraceId:void 0,enqueueTimestampMs:(h||(h=d("I64"))).of_float(Date.now()),failureCount:h.zero,firstExecutedTimestampMs:h.zero,httpUrlOverride:void 0,initTraceTimestampMs:void 0,minTimeToSyncTimestampMs:h.zero,pluginType:(i||(i=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").LS_BROKER),priority:h.zero,queueName:e,syncGroupId:void 0,taskValue:d("LSJson").stringify(f),timeoutTimestampMs:void 0})});return k.apply(this,arguments)}g.enqueue=a}),98);
__d("LsMessageSearchEndFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4190");b=d("FalcoLoggerInternal").create("ls_message_search_end",a);e=b;g["default"]=e}),98);
__d("LsMessageSearchMsgImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4191");b=d("FalcoLoggerInternal").create("ls_message_search_msg_impression",a);e=b;g["default"]=e}),98);
__d("LsMessageSearchMsgResultChosenFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4231");b=d("FalcoLoggerInternal").create("ls_message_search_msg_result_chosen",a);e=b;g["default"]=e}),98);
__d("LsMessageSearchSearchClickedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4464");b=d("FalcoLoggerInternal").create("ls_message_search_search_clicked",a);e=b;g["default"]=e}),98);
__d("LsMessageSearchStartFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("4683");b=d("FalcoLoggerInternal").create("ls_message_search_start",a);e=b;g["default"]=e}),98);
__d("LsMessageSearchThreadImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6727");b=d("FalcoLoggerInternal").create("ls_message_search_thread_impression",a);e=b;g["default"]=e}),98);
__d("LsMessageSearchThreadListClickFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6293");b=d("FalcoLoggerInternal").create("ls_message_search_thread_list_click",a);e=b;g["default"]=e}),98);
__d("MAWAudioUtils",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var d=URL.createObjectURL(a);return new(h||(h=b("Promise")))(function(a,b){var e=new Audio();e.setAttribute("crossOrigin","anonymous");e.addEventListener("loadedmetadata",function(c){c=c.currentTarget;if(c instanceof HTMLAudioElement){c=c.duration;a(Math.ceil(c))}else b("EventTarget returned for event should be HTMLAudioElement")});e.src=d;e.onabort=function(){b(function(){throw c("err")("Error loading audio from provided URL")})};e.onerror=function(){b(function(){throw c("err")("Wrong blob type")})}})}g.getAudioDurationInSeconds=a}),98);
__d("MAWAudioPreProcess",["MAWAudioUtils","Promise","WABlobToArrayBuffer","WATagsLogger","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["start optimistic audio preprocess"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["start audio preprocess"]);j=function(){return a};return a}var k=d("WATagsLogger").TAGS(["MAWAudioPreProcess"]);function c(a){k.LOG(j());return d("MAWAudioUtils").getAudioDurationInSeconds(a).then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){return{durations:b,file:a,isPtt:!0,plaintext:yield d("WABlobToArrayBuffer").blobToArrayBuffer(a),type:"audio"}});return function(a){return c.apply(this,arguments)}}())}function e(c){var e=a.URL.createObjectURL(c);k.LOG(i());return d("MAWAudioUtils").getAudioDurationInSeconds(c).then(function(a){return(h||(h=b("Promise"))).resolve({durations:a,file:c,isPtt:!0,type:"audio",url:e})})}g.audioPreprocess=c;g.optimisticAudioPreprocess=e}),98);
__d("MAWMediaReceiverFetchDoneCallbackMap",[],(function(a,b,c,d,e,f){"use strict";a=new Map();b=a;f["default"]=b}),66);
__d("MAWIssueReceiverFetchTask",["LSDispatchMediaReceiverFetchForWebStoredProcedure","LSFactory","MAWMediaDownloadStatus","MAWMediaReceiverFetchDoneCallbackMap","WAHashUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,g,h){h==null?void 0:h({tag:"UpdateMediaStatus",value:{details:"issue_receiver_fetch_task",key:d("WAHashUtils").stringToPlaintextHash(b),status:c("MAWMediaDownloadStatus").DOWNLOADING,type:"main"}});c("MAWMediaReceiverFetchDoneCallbackMap").set(b,function(a){h==null?void 0:h({tag:"UpdateMediaStatus",value:{details:"issue_receiver_fetch_task_callback",key:d("WAHashUtils").stringToPlaintextHash(b),status:a==="success"?c("MAWMediaDownloadStatus").SUCCESS:c("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE,type:"main"}})});return a.runInTransaction(function(a){return c("LSDispatchMediaReceiverFetchForWebStoredProcedure")(c("LSFactory")(a),{messageId:b,receiverFetchId:e,shouldFetchAccessibilitySummaryText:!0,threadKey:g})},"readwrite",void 0,void 0,f.id+":54")}g.issueReceiverFetchTask=a}),98);
__d("MAWMediaDownloadStatusUIStateType",[],(function(a,b,c,d,e,f){"use strict";function a(a){if(a==null)return!1;switch(a){case"non_retryable_error":case"non_retryable_error_with_preview":case"retryable_error":case"retryable_error_with_preview":return!0;default:return!1}}function b(a){if(a==null)return!1;switch(a){case"retryable_error":case"retryable_error_with_preview":return!0;default:return!1}}f.isErrorState=a;f.isRetryableErrorState=b}),66);
__d("MAWSendVideoToWorker",["MAWMediaWorkerResource","Promise","WALogger","WebWorker"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Clean up media worker"]);i=function(){return a};return a}var j=k();function a(a){var c;return new(h||(h=b("Promise")))(function(b){c=j&&l(j)?k():j,c.setMessageHandler(function(a){b(a)}).execute(),c.postMessage(a)})["finally"](function(){c&&(d("WALogger").LOG(i()),c.terminate(),(!j||!j.isCurrentState("constructed"))&&(j=k()))})}function k(){return new(c("WebWorker"))(c("MAWMediaWorkerResource")).setAllowCrossPageTransition(!0)}function l(a){return a.isCurrentState("preparing")||a.isCurrentState("executing")}g.sendVideoMessageToWorker=a}),98);
__d("MAWVideoPreProcess",["MAWMediaPreProcessQpl","MAWSendVideoToWorker","MAWVideoAudioPlaybackErrorHandlerUtils","MAWVideoUtils","MWPBumpEntityKey","Promise","WABlobToArrayBuffer","WAMediaWasmWorkerClient","WAResultOrError","WATagsLogger","asyncToGeneratorRuntime","cometIsMimeTypeForMedia"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["start process video through wasm, file name: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAnalyzer:checkAndRepair got error! ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAnalyzer:checkAndRepair rejected file (",")"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaAnalyzer:checkAndRepair got parsing error! ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["trouble parsing file "," (fossil ",") ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["start process video through asm.js, file name: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to preprocess video: ",""]);o=function(){return a};return a}var p=["video/x-ms-wmv","video/x-msvideo","video/avi","video/x-flv","video/ogg","video/mpeg"],q=d("WATagsLogger").TAGS(["MAWVideoPreProcess"]),r=typeof self.BigInt==="function";function c(a,c){return t(a,c).then(function(c){if(!c.success&&d("MAWVideoAudioPlaybackErrorHandlerUtils").isInvalidVideoSendBlockEnabled({silent:!1})){c.error;return(h||(h=b("Promise"))).reject(c.error)}c=(c=c.value)!=null?c:a;return(h||(h=b("Promise"))).all([c,d("MAWVideoUtils").getVideoThumbnailUrlAndSpec(c)]).then(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a[0];a=a[1];return{file:b,plaintext:yield d("WABlobToArrayBuffer").blobToArrayBuffer(b),thumbnailUrlAndSpec:a,type:"video"}});return function(b){return a.apply(this,arguments)}}())})}function e(a){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){d("MAWVideoAudioPlaybackErrorHandlerUtils").isInvalidVideoSendBlockEnabled({silent:!1})&&(yield t(c).then(function(a){if(!a.success){d("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.composer","invalid_video_send_block_with_type_"+c.type);a.error;return(h||(h=b("Promise"))).reject(a.error)}return}));var e=(yield d("MAWVideoUtils").getVideoThumbnailSpec(c)),f=a.URL.createObjectURL(c);return(h||(h=b("Promise"))).resolve({file:c,thumbnailSpec:e,type:"video",url:f})});return s.apply(this,arguments)}function t(a,b){var c=r,e=d("MAWMediaPreProcessQpl").startMediaPreProcessQpl("video",a);e.addAnnotations({bool:{wamedia_wasm_enabled:c},"int":{total_number_of_files:(b=b)!=null?b:1}});b=c?u(a,e):w(a);return b.then(function(a){if(!a.success)switch(a.error){case"invalid-media":e.endFail("invalid-media");return d("WAResultOrError").makeError("invalid-mp4");case"worker-connection-timeout":case"worker-connection-runtime-error":case"internal-error":case"decode-image-error":case"undefined-operation":case"runtime-error":throw a.error;default:a.error;throw a.error}e.endSuccess({"int":{compressed_file_size:a.value.size}});return d("WAResultOrError").makeResult(a.value)})["catch"](function(b){q.ERROR(o(),b.toString());e.endFail("unable_to_process_video",{string:{preprocessError:b.toString()}});return d("WAResultOrError").makeResult(a)})}function u(a,b){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){q.DEV(i(),a.name);var c=(yield a.arrayBuffer());b=(yield d("WAMediaWasmWorkerClient").mp4RepairMuxInWorker({eventFlow:b,input:new Uint8Array(c)}));if(!b.success)return b;c=new File([b.value],a.name,{type:"video/mp4"});return d("WAResultOrError").makeResult(c)});return v.apply(this,arguments)}function w(a){q.DEV(n(),a.name);return x(a).then(function(b){if(!b)return d("WAResultOrError").makeError("invalid-media");b=new File([b.file],a.name,{type:b.file.type});return d("WAResultOrError").makeResult(b)})}function x(a){return d("MAWSendVideoToWorker").sendVideoMessageToWorker({asGif:!1,file:a,type:"prep"}).then(function(a){var b=a.error,c=a.file,d=a.filename,e=a.result;a=a.type;switch(a){case"result":return e;case"parsingError":q.ERROR(m(),c,d,String(b));c&&q.ERROR(l(),String(b));q.ERROR(k(),String(b));return void 0}})["catch"](function(a){q.ERROR(j(),String(a));return void 0})}function f(a){return!d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a)?!1:!p.includes(a)}g.videoPreprocess=c;g.optimisticVideoPreprocess=e;g.processVideoThroughWasm=u;g.processVideoThroughAsmJs=w;g.isSupportedVideoFileType=f}),98);
__d("MAWMediaPreprocess",["MAWAudioPreProcess","MAWDocumentPreProcess","MAWImagePreProcess","MAWSupportedDocumentTypes","MAWVideoPreProcess","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["start optimistic mediaPreprocess, file name: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["start mediaPreprocess, file name: ",""]);i=function(){return a};return a}var j=d("WATagsLogger").TAGS(["MAWMediaPreprocess"]);function a(a,b,c){j.DEV(i(),a.name);return k(a,function(a){return d("MAWImagePreProcess").imagePreprocess(a,!1,b,c)},function(a){return d("MAWVideoPreProcess").videoPreprocess(a,b)},d("MAWAudioPreProcess").audioPreprocess,d("MAWDocumentPreProcess").documentPreprocess)}function b(a){j.DEV(h(),a.name);return k(a,d("MAWImagePreProcess").optimisticImagePreprocess,d("MAWVideoPreProcess").optimisticVideoPreprocess,d("MAWAudioPreProcess").optimisticAudioPreprocess,d("MAWDocumentPreProcess").optimisticDocumentPreprocess)}function k(a,b,c,e,f){if(a.size===0)return Promise.reject("Empty file");if(d("MAWImagePreProcess").isSupportedImageFileType(a.type))return b(a);if(d("MAWVideoPreProcess").isSupportedVideoFileType(a.type))return c(a);if(a.type.startsWith("audio/"))return e(a);return d("MAWSupportedDocumentTypes").isAllowedType(a.name)?f(a):Promise.reject("Unsupported file type")}g.mediaPreprocess=a;g.optimisticMediaPreprocess=b}),98);
__d("MWMediaManagerTypes",["MessagingAttachmentType"],(function(a,b,c,d,e,f,g){"use strict";function a(a){switch(a){case"animated_image":return c("MessagingAttachmentType").ANIMATED_IMAGE;case"image":return c("MessagingAttachmentType").IMAGE;case"video":return c("MessagingAttachmentType").VIDEO;case"audio":return c("MessagingAttachmentType").AUDIO;case"document":return c("MessagingAttachmentType").FILE;default:return null}}g.getMessagingAttachmentTypeFromMediaMetadataAttachmentType=a}),98);
__d("MAWMediaManagerUtils",["FBLogger","MAWBridgeFireAndForget","MAWMediaPreprocess","MAWMediaUtils","MAWMiActOnActThreadReady","MWMediaManagerTypes","Promise","asyncToGeneratorRuntime","gkx","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map();function a(a,e,f){var g=c("gkx")("9576")?e===!0:void 0;return(h||(h=b("Promise"))).all(a.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(c){var j=c[0];c=c[1];var k=d("MAWMediaPreprocess").mediaPreprocess(j,a.length,e),l=(yield d("MAWMediaPreprocess").optimisticMediaPreprocess(j));i.set(c,{optimisticMedia:l,originalFile:j,processedMediaPromise:k});f(c,{optimisticMedia:l,originalFile:j,processedMediaPromise:k});k=d("MWMediaManagerTypes").getMessagingAttachmentTypeFromMediaMetadataAttachmentType(l.type);j={attachmentType:(k=k)!=null?k:void 0,file:j,isHd:g,offlineAttachmentId:c,previewHeight:(j=(k=l.imageSpec)==null?void 0:k.height)!=null?j:void 0,previewWidth:(k=(c=l.imageSpec)==null?void 0:c.width)!=null?k:void 0};return(h||(h=b("Promise"))).resolve(j)});return function(a){return c.apply(this,arguments)}}()))}function e(a,e,f){c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(a.tables,e,"MAWMediaManagerUtils",function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){a=f.reduce(function(a,b){b=(b=i.get(b.offlineAttachmentId))==null?void 0:b.processedMediaPromise;b!=null&&a.push(b);return a},[]);a=(yield (h||(h=b("Promise"))).all(a));a.forEach(function(a){var b;switch(a.type){case"image":return d("MAWBridgeFireAndForget").fireAndForget("backend","optimisticUploadMedia",{file:a.file,jid:e,thumbnail:d("MAWMediaUtils").convertJpegThumbnailArrayBufferToFile((b=a.thumbnailUrlAndSpec)==null?void 0:b.jpegThumbnail)});case"animated_image":return d("MAWBridgeFireAndForget").fireAndForget("backend","optimisticUploadMedia",{file:a.file,jid:e,thumbnail:c("gkx")("8554")?null:d("MAWMediaUtils").convertJpegThumbnailArrayBufferToFile((b=a.thumbnailUrlAndSpec)==null?void 0:b.jpegThumbnail)});case"video":return d("MAWBridgeFireAndForget").fireAndForget("backend","optimisticUploadMedia",{file:a.file,jid:e,thumbnail:d("MAWMediaUtils").convertJpegThumbnailArrayBufferToFile(a.thumbnailUrlAndSpec.jpegThumbnail)});case"audio":return d("MAWBridgeFireAndForget").fireAndForget("backend","optimisticUploadMedia",{file:a.file,jid:e,thumbnail:null});case"document":return d("MAWBridgeFireAndForget").fireAndForget("backend","optimisticUploadMedia",{file:a.file,jid:e,thumbnail:null});default:c("FBLogger")("messenger_web_media").mustfix("MAW Optimistic upload media: unknown media attachment file type: "+a.type)}});return h.resolve()});return function(b,c){return a.apply(this,arguments)}}()))}g.MAWMediaManagerAttachmentsV2=i;g.preprocessV2=a;g.upload=e}),98);
__d("MessageReactionOperation",[],(function(a,b,c,d,e,f){a=Object.freeze({ADD:1,REMOVE:2,REMOVE_MULTI_REACT:3});f["default"]=a}),66);
__d("MessageReactionStyle",[],(function(a,b,c,d,e,f){a=Object.freeze({BASIC_SUPER_REACT_ANIMATION:1});f["default"]=a}),66);
__d("useMWLSDefaultThreadSource",["LSThreadAttributionTypeUtil","react","react-compiler-runtime","useLSMessagingSource"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(2),b=c("useLSMessagingSource")(),e;a[0]!==b?(e=function(a){return d("LSThreadAttributionTypeUtil").getSource(a,b)},a[0]=b,a[1]=e):e=a[1];return e}g["default"]=a}),98);
__d("useMWPSendOrUnsendReaction",["FBLogger","I64","Int64Hooks","LSFactory","LSIntEnum","LSOptimisticUpsertReactionStoredProcedure","LSOptimisticUpsertReactionV2StoredProcedure","MWPActor.react","MessageReactionOperation","MessageReactionStyle","ReQL","asyncToGeneratorRuntime","promiseDone","react-compiler-runtime","useIsMultiReactionEnabled","useIsReactionsV2Enabled","useMWLSDefaultThreadSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,e,g,h,j){c("promiseDone")(a.runInTransaction(function(a){return c("LSOptimisticUpsertReactionV2StoredProcedure")(c("LSFactory")(a),{actorId:b,currentCount:h,messageId:e.messageId,messageTimestamp:e.timestampMs,operation:(i||(i=d("LSIntEnum"))).ofNumber(c("MessageReactionOperation").ADD),reactionFbid:g,reactionLiteral:j,reactionStyle:i.ofNumber(c("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:e.threadKey,viewerIsReactor:!0})},"readwrite",void 0,void 0,f.id+":42"))}function l(a,b,c,d,e,f,g){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,g,h,j,k){yield a.runInTransaction(function(a){return c("LSOptimisticUpsertReactionV2StoredProcedure")(c("LSFactory")(a),{actorId:b,currentCount:g,messageId:e.messageId,messageTimestamp:e.timestampMs,operation:(i||(i=d("LSIntEnum"))).ofNumber(k?c("MessageReactionOperation").REMOVE_MULTI_REACT:c("MessageReactionOperation").REMOVE),reactionFbid:h,reactionLiteral:j,reactionStyle:i.ofNumber(c("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:e.threadKey,viewerIsReactor:!1})},"readwrite",void 0,void 0,f.id+":72")});return m.apply(this,arguments)}function n(a,b,e,f,g){c("promiseDone")(d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.reactions_v2).getKeyRange(e.threadKey,e.messageId,f)).then(function(c){c!=null?k(a,b,e,f,c.count,g):k(a,b,e,f,(j||(j=d("I64"))).zero,g)}))}function a(a){var e=d("react-compiler-runtime").c(7),g=(h||(h=c("useReStore")))(),i=d("MWPActor.react").useActor(),k=c("useMWLSDefaultThreadSource")(),m=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(a.threadKey),o,p;e[0]!==i||e[1]!==g||e[2]!==k||e[3]!==m||e[4]!==a?(o=function(e){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(g.tables.threads).getKeyRange(a.threadKey)));b=b?d("useIsReactionsV2Enabled").isReactionsV2Enabled(b):!1;if(b){var h=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(g.tables.reaction_v2_types).filter(function(a){return a.reactionLiteral===e||a.reactionLiteralVariant16===e})));if(h!=null){b=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(g.tables.reactions_v2).getKeyRange(a.threadKey,a.messageId).filter(function(a){return(!m||(j||(j=d("I64"))).equal(a.reactionFbid,h.reactionFbid))&&a.viewerIsReactor})));if(b==null)return n(g,i,a,h.reactionFbid,e);var o=(j||(j=d("I64"))).equal(b.reactionFbid,h.reactionFbid);(!m||o)&&(yield l(g,i,a,b.count,b.reactionFbid,e,m));o||(yield n(g,i,a,h.reactionFbid,e))}else c("FBLogger")("messenger_web_product").warn("Reactions v2: trying to send reaction that is not in reaction_v2_types table");return}return g.runInTransaction(function(b){return c("LSOptimisticUpsertReactionStoredProcedure")(c("LSFactory")(b),{actorId:i,messageId:a.messageId,reaction:e,sendAttribution:k(a.threadKey),threadKey:a.threadKey,timestampMs:(j||(j=d("I64"))).of_float(Date.now())})},"readwrite",void 0,void 0,f.id+":226")})())},p=[g,a,m,i,k],e[0]=i,e[1]=g,e[2]=k,e[3]=m,e[4]=a,e[5]=o,e[6]=p):(o=e[5],p=e[6]);return d("Int64Hooks").useCallbackInt64(o,p)}g["default"]=a}),98);
__d("MAWPSendOrRemoveReaction.react",["I64","Int64Hooks","LSMessagingThreadAttributionType","MAWExternalId","MAWMessageSendReporterV2","MAWODSProxy","MWLSThread","MWPActor.react","WAOdsEnums","cr:9778","promiseDone","requireDeferred","sendToSentQPLLogger","useIsSecureMessage","useLSMessagingSource","useMWPSendOrUnsendReaction","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MWLogMessageAction").__setRef("MAWPSendOrRemoveReaction.react");function a(a,e,f){var g,k=(i||(i=c("useReStore")))(),l=d("MWPActor.react").useActor(),m=(g=b("cr:9778")==null?void 0:b("cr:9778").useSendOrRemoveReaction(a.threadKey,(h||(h=d("I64"))).to_string(a.senderId)))!=null?g:null,n=c("useIsSecureMessage")(k,a,{fallbackIsSecure:e}),o=c("useMWPSendOrUnsendReaction")(a),p=c("useLSMessagingSource")(),q=d("MWLSThread").useThread(a.threadKey);return d("Int64Hooks").useMemoInt64(function(){return function(b,g,h){if(n&&m!==null){var i=d("MAWExternalId").generateExternalId(),r=function(a){return m(b,g,a,i).then(function(a){return[a]})};if(d("MAWMessageSendReporterV2").isMessageSendReporterV2Enabled())c("promiseDone")(d("MAWMessageSendReporterV2").MAWMessageSendReporterV2({composerEntrypoint:"MAWSendOrRemoveReaction",externalId:i,lsSource:p,messageTypeParamsArgs:{isReaction:!0},thread:q},r,k));else{var s=d("sendToSentQPLLogger").markSendToSentStartWithAnnotation(q,{isReaction:!0},c("LSMessagingThreadAttributionType").UNKNOWN);c("promiseDone")(r(s))}d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_SEND_REACTION,key:"post-cutover_msg"})}else{e&&d("MAWODSProxy").odsBumpEntityKey({entity:d("WAOdsEnums").Entity.MAW_SEND_REACTION,key:"pre-cutover_msg"});o((r=g)!=null?r:"")}j.onReady(function(b){return c("promiseDone")(b.log(k,a.messageId,a.threadKey,f,h,void 0,void 0,void 0,a.senderId,void 0,l))})}},[n,m,e,o,k,p,q,a.messageId,a.threadKey,a.senderId,f,l])}g.useSendOrRemoveReaction=a}),98);
__d("MDSScrollableArea.react",["CometScrollableArea.react","MDSScrollableAreaStyles","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(8),e,f;b[0]!==a?(f=a.xstyle,e=babelHelpers.objectWithoutPropertiesLoose(a,["xstyle"]),b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);b[3]!==f?(a=[c("MDSScrollableAreaStyles").unthemed,f],b[3]=f,b[4]=a):a=b[4];b[5]!==e||b[6]!==a?(f=i.jsx(c("CometScrollableArea.react"),babelHelpers["extends"]({forceBrowserDefault:!0,xstyle:a},e)),b[5]=e,b[6]=a,b[7]=f):f=b[7];return f}g["default"]=a}),98);
__d("MWBlockingProtectionContext.react",["emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;f=e.createContext;var j=e.useContext;e.useMemo;var k=e.useState,l=f({addMessageId:c("emptyFunction"),findMessageId:c("emptyFunction").thatReturnsFalse});function a(a){var b=d("react-compiler-runtime").c(6);a=a.children;var c;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(c=[],b[0]=c):c=b[0];c=k(c);var e=c[0],f=c[1];b[1]!==e?(c={addMessageId:function(a){f([a].concat(e))},findMessageId:function(a){return e.find(function(b){return b===a})!=null}},b[1]=e,b[2]=c):c=b[2];c=c;c=c;var g;b[3]!==a||b[4]!==c?(g=i.jsx(l.Provider,{value:c,children:a}),b[3]=a,b[4]=c,b[5]=g):g=b[5];return g}function b(){return j(l)}e={Provider:a,useHook:b};g["default"]=e}),98);
__d("MWPColorUtils",["I64","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(a){return"#"+a.map(function(a){return a.toString(16).padStart(2,"0")}).join("")};function j(a){a=(h||(h=d("I64"))).to_int32(a);var b=(a&16711680)>>>16,c=(a&65280)>>>8;a=a&255;return[b,c,a]}function k(a){var b=a[0],c=a[1];a=a[2];return(h||(h=d("I64"))).of_int32((b<<16)+(c<<8)+a)}function l(a,b,c){return[Math.round(a[0]*c+b[0]*(1-c)),Math.round(a[1]*c+b[1]*(1-c)),Math.round(a[2]*c+b[2]*(1-c))]}function a(a){a=Number("0x"+a.slice(2));return k([a>>16&255,a>>8&255,a&255])}function b(a,b,c){a=j(a);b=j(b);return i(l(a,b,c))}function e(a,b,c){a=j(a);b=j(b);a=l(a,b,c);return k(a)}function m(a){return i(j(a))}function f(a,b){var c=j(a),d=c[0],e=c[1];c=c[2];return b!=null?"rgba("+d+", "+e+", "+c+", "+b+")":m(a)}function n(a,b){a=[].concat(a).sort(function(a,b){return(h||(h=d("I64"))).to_int32(a.gradientIndex)-h.to_int32(b.gradientIndex)|0}).map(function(a){return m(a.color)});var e=a.length;if(e!==1){if(e!==0){e=b!=null;var f=[];b!=null&&f.push(a[0]+" calc(100vh - "+String(b.totalHeight)+"px + "+String(b.headerHeight)+"px)");for(var g=e?1:0,e=a.length-(e?2:1)|0;g<=e;++g)f.push(a[g]);b!=null&&(f.push(a[a.length-1|0]+" calc(100% - "+String(b.footerHeight)+"px)"),f.push(a[a.length-1|0]));g=f.join(", ");return"linear-gradient("+g+")"}c("recoverableViolation")("Not enough colors for a gradient","messenger_comet");return""}c("recoverableViolation")("Not enough colors for a gradient","messenger_comet");return""}g.i64toRgb=j;g.hexToI64=a;g.combineColors=b;g.combineColorsAsI64=e;g.int64ToHex=m;g.int64ToRGBA=f;g.gradient=n}),98);
__d("MWPThreadThemeGradientUtils",["MWPColorUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=a.outgoingGradientColors;a=a.threadTheme;b=b[0];return(b=b==null?void 0:b.color)!=null?b:a.fallbackColor}function a(a){return d("MWPColorUtils").int64ToHex(h(a))}function i(a){var b=a.outgoingGradientColors;a=a.threadTheme;b=b[b.length-1];return(b=b==null?void 0:b.color)!=null?b:a.fallbackColor}function b(a){return d("MWPColorUtils").int64ToHex(i(a))}function c(a){return a.outgoingGradientColors.length>1}g.getTopGradientColorI64=h;g.getTopGradientColor=a;g.getBottomGradientColorI64=i;g.getBottomGradientColor=b;g.isGradient=c}),98);
__d("MessengerAppColorMode",[],(function(a,b,c,d,e,f){a=Object.freeze({NORMAL:1,DARK:2,NONE:3});f["default"]=a}),66);
__d("useMWIsBroadcastChannelViewer",["LSMessagingThreadTypeUtil","MWLSThread","MWPActor.react","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b,e=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),k=(b=d("MWLSThread").useThread(a,j))!=null?b:!1;b=(b=d("ReQLSuspense").useFirst(function(){return a!=null&&k?d("ReQL").fromTableAscending(e.tables.participants).getKeyRange(a,g).map(i):d("ReQL").empty()},[e,a,g,k],f.id+":31"))!=null?b:!1;return k&&b}function i(a){return a.isAdmin!==!0&&a.isSuperAdmin!==!0&&a.isModerator!==!0}function j(a){return d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)}g["default"]=a}),98);
__d("MWPThemeCSSProvider.react",["BaseTheme.react","I64","LSIntEnum","MWLSThread","MWLSThreadDisplayContext","MWPColorUtils","MWPThreadThemeGradientUtils","MWThreadKey.react","MWV2IsTabFocusedContext.react","MessengerAppColorMode","gkx","react","react-compiler-runtime","useMWIsBroadcastChannelViewer","useMWPThreadTheme"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react")),l=h.useMemo,m={expand:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",maxWidth:"x193iq5w",$$css:!0}};function n(a,b){b=(b=d("MWLSThread").useThread(b,o))!=null?b:!1;return b&&!a}function o(a){return(i||(i=d("I64"))).lt(a.lastReadWatermarkTimestampMs,a.lastActivityTimestampMs)}function p(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),b=a==="ChatTab";a=a==="Inbox";return!b&&!a?!1:b||c("gkx")("24031")}function q(){var a=d("MWThreadKey.react").useMWThreadKeyMemoized(),b=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext()==="ChatTab",e=d("MWV2IsTabFocusedContext.react").useIsTabFocused(),f=n(e,a),g=c("useMWIsBroadcastChannelViewer")(a),h=c("useMWPThreadTheme")(),k=p();return l(function(){var a,l=c("gkx")("24057"),m=h.backgroundGradientColors,n=h.incomingGradientColors,o=h.outgoingGradientColors,p=h.threadTheme,q=p.appColorMode,r=p.backgroundUrl,s=p.composerBackgroundColor,t=p.composerInputBackgroundColor,u=p.composerInputBorderColor,v=p.composerInputBorderWidth,w=p.composerInputTextPlaceholderColor,x=p.composerPlaceholderTextColor,y=p.composerTintColor,z=p.deliveryReceiptColor,A=p.fallbackColor,B=p.incomingMessageBorderColor,C=p.incomingMessageBorderWidth,D=p.incomingMessageTextColor,E=p.messageBorderColor,F=p.messageBorderWidth,G=p.messageTextColor,H=p.primaryButtonBackgroundColor,I=p.quotedIncomingMessageBubbleColor,J=p.reactionPillBackgroundColor,K=p.secondaryTextColor,L=p.tertiaryTextColor,M=p.titlebarAttributionTextColor,N=p.titlebarBackgroundColor,O=p.titlebarButtonTintColor;p=p.titlebarTextColor;q=(i||(i=d("I64"))).equal(q,(j||(j=d("LSIntEnum"))).ofNumber(c("MessengerAppColorMode").DARK));r=Boolean(r==null?void 0:r.length);var P=o.length>1,Q=m.length>0;r=k&&(r||Q);Q=r&&"4px"||"0px";l=l?"96px":g?"28px":"84px";O=k&&O||d("MWPThreadThemeGradientUtils").getTopGradientColorI64(h);var R=k&&y||d("MWPThreadThemeGradientUtils").getBottomGradientColorI64(h);m=m==null?void 0:(m=m[(m==null?void 0:m.length)-1])==null?void 0:m.color;n=n==null?void 0:(n=n[0])==null?void 0:n.color;a=(a=o==null?void 0:(a=o[o.length-1])==null?void 0:a.color)!=null?a:A;o=o&&o.length>1&&d("MWPColorUtils").gradient(o,b?{footerHeight:56,headerHeight:48,totalHeight:455}:void 0);L={"chat-admin-text-color":k&&(K||L),"chat-composer-background-color":k&&s,"chat-composer-button-color":R,"chat-composer-caret-color":k&&R,"chat-composer-input-background-color":k&&t||"var(--comment-background)","chat-composer-input-border-color":k&&u,"chat-composer-input-border-width":k&&v,"chat-composer-input-text-placeholder-color":k&&w,"chat-composer-placeholder-text-color":k&&x,"chat-delivery-receipt-color":k&&z,"chat-edit-message-overlay-color":(K=m)!=null?K:"var(--surface-background)","chat-incoming-message-border-color":k&&B,"chat-incoming-message-border-width":k&&C,"chat-incoming-message-bubble-background-color":k&&n,"chat-incoming-message-text-color":k&&D,"chat-message-border-color":k&&E,"chat-message-border-width":k&&F,"chat-message-text-color":k&&G,"chat-outgoing-message-background-gradient":!r&&o?o:"initial","chat-outgoing-message-bubble-background-color":P&&!r?"transparent":a,"chat-primary-button-background-color":k&&H,"chat-quoted-incoming-message-bubble-color":k&&I,"chat-replied-message-background-color":k&&m&&n&&d("MWPColorUtils").combineColors(m,n,.4),"chat-scrollbar-thumb-color":r&&m&&d("MWPColorUtils").int64ToRGBA(d("MWPColorUtils").combineColorsAsI64(d("MWPColorUtils").combineColorsAsI64(a,m,.6),q?(i||(i=d("I64"))).of_int32(16777215):(i||(i=d("I64"))).of_int32(0),.6),.7),"chat-scrollbar-track-color":r&&"transparent","mwp-header-background-color":k&&N,"mwp-header-button-color":O,"mwp-header-text-color":k&&p,"mwp-message-list-actions-gap":Q,"mwp-message-list-actions-width":"calc("+l+" + 3*"+Q+")","mwp-message-row-background":r?"transparent":"var(--messenger-card-background)","mwp-primary-theme-color":A,"mwp-subheader-text-color":k&&M,"reaction-pill-background-color":k?J:"var(--wash)","reaction-pill-multireact-selected-color":d("MWPColorUtils").combineColorsAsI64(A,i.of_int32(16777215),.22),"text-highlight":k&&y&&d("MWPColorUtils").int64ToRGBA(y,q?.5:.2)};e||(k?(L["chat-composer-button-color"]=d("MWPColorUtils").int64ToRGBA(R,.6),L["mwp-header-button-color"]=d("MWPColorUtils").int64ToRGBA(O,.6)):(L["chat-composer-button-color"]="var(--disabled-icon)",L["mwp-header-button-color"]="var(--disabled-icon)"));f&&(L["mwp-header-button-color"]="var(--always-white)",L["mwp-header-text-color"]="var(--always-white)",L["mwp-header-background-color"]=O);(L["mwp-subheader-text-color"]==null||typeof L["mwp-subheader-text-color"]==="boolean")&&(L["mwp-subheader-text-color"]=L["mwp-header-text-color"]);s={};for(t in L){u=L[t];if(u==null||typeof u==="boolean")continue;else typeof u==="string"?s[t]=u:s[t]=d("MWPColorUtils").int64ToHex(u)}return s},[g,b,f,e,h])}function a(a){var b=d("react-compiler-runtime").c(8),e=q(),f;b[0]!==e?(f={dark:e,light:e,type:"VARIABLES"},b[0]=e,b[1]=f):f=b[1];b[2]!==a.xstyle?(e=[m.expand,a.xstyle],b[2]=a.xstyle,b[3]=e):e=b[3];var g;b[4]!==a||b[5]!==f||b[6]!==e?(g=k.jsx(c("BaseTheme.react"),babelHelpers["extends"]({},a,{config:f,xstyle:e})),b[4]=a,b[5]=f,b[6]=e,b[7]=g):g=b[7];return g}g.useIsThemeV2=p;g.MWPThemeCSSProvider=a}),98);
__d("MWPThreadThemeContext",["defaultMWPThreadTheme","emptyFunction","react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("react")).createContext;b=babelHelpers["extends"]({},d("defaultMWPThreadTheme").defaultThemeWithColorsV1,{previewId:void 0,setPreviewId:c("emptyFunction")});e=a(b);g.defaultContextValue=b;g.MWPThreadThemeContext=e}),98);
__d("defaultMWPThreadTheme",["I64","MWPThemeCSSProvider.react","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("MWPThemeCSSProvider.react").useIsThemeV2();return a?i:j}function b(a){return a==null?!1:(h||(h=d("I64"))).equal(a,j.threadTheme.fbid)||(h||(h=d("I64"))).equal(a,i.threadTheme.fbid)}var i={backgroundGradientColors:[],incomingGradientColors:[],outgoingGradientColors:[{color:(h||(h=d("I64"))).of_string("-5635841"),gradientIndex:h.of_string("0"),themeFbid:h.of_string("3259963564026002"),type_:h.of_string("0")},{color:c("gkx")("10034")?(h||(h=d("I64"))).of_string("28918"):(h||(h=d("I64"))).of_string("-16744193"),gradientIndex:h.of_string("1"),themeFbid:h.of_string("3259963564026002"),type_:h.of_string("0")}],threadTheme:{accessibilityLabel:"Default",appColorMode:h.of_string("1"),fallbackColor:h.of_string("-11645963"),fbid:h.of_string("3259963564026002"),isDeprecated:!1,normalThemeId:h.of_string("3259963564026002"),reverseGradiantsForRadial:!1,themeIdx:h.of_string("275")}},j={backgroundGradientColors:[],incomingGradientColors:[],outgoingGradientColors:[],threadTheme:{accessibilityLabel:"Default Blue",appColorMode:h.zero,fallbackColor:c("gkx")("23219")?(h||(h=d("I64"))).of_string("687359"):(h||(h=d("I64"))).of_string("-16743169"),fbid:h.of_string("196241301102133"),isDeprecated:!1,normalThemeId:h.zero,reverseGradiantsForRadial:!1,themeIdx:h.of_string("94")}};g.useDefaultThemeWithColors=a;g.isDefaultTheme=b;g.defaultThemeWithColorsV2=i;g.defaultThemeWithColorsV1=j}),98);
__d("useMWPThreadTheme",["MWPThreadThemeContext","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){return i(d("MWPThreadThemeContext").MWPThreadThemeContext)}g["default"]=a}),98);
__d("MWMessageActionButton.react",["BaseTheme.react","MWPThemeCSSProvider.react","MWXCircleButton.react","MWXTooltip.react","MessengerWebUXLogger","react","react-compiler-runtime","useMWPThreadTheme"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));h.useCallback;var j={dark:{},light:{},type:"VARIABLES"},k={dark:{"popover-background":"var(--chat-replied-message-background-color, inherit)"},light:{"popover-background":"var(--chat-replied-message-background-color, inherit)"},type:"VARIABLES"};b=i.forwardRef(a);function a(a,b){var e=d("react-compiler-runtime").c(22),f,g,h,l;e[0]!==a?(f=a.label,g=a.loggingEvent,h=a.onPress,l=babelHelpers.objectWithoutPropertiesLoose(a,["label","loggingEvent","onPress"]),e[0]=a,e[1]=f,e[2]=g,e[3]=h,e[4]=l):(f=e[1],g=e[2],h=e[3],l=e[4]);var m=c("MessengerWebUXLogger").useInteractionLogger();e[5]!==m||e[6]!==g||e[7]!==h?(a=function(a){h==null?void 0:h(a),g&&(m==null?void 0:m(g))},e[5]=m,e[6]=g,e[7]=h,e[8]=a):a=e[8];a=a;var n=c("useMWPThreadTheme")(),o=n.backgroundGradientColors;n=n.threadTheme;n=d("MWPThemeCSSProvider.react").useIsThemeV2()&&(Boolean(n.backgroundUrl)||o.length>0);o=n?k:j;var p=n?"primary":"secondary";n=n?"overlay":"deemphasized";var q;e[9]!==a||e[10]!==f||e[11]!==b||e[12]!==l||e[13]!==p||e[14]!==n?(q=i.jsx(c("MWXCircleButton.react"),babelHelpers["extends"]({color:p,label:f,onPress:a,ref:b,size:28,type:n},l)),e[9]=a,e[10]=f,e[11]=b,e[12]=l,e[13]=p,e[14]=n,e[15]=q):q=e[15];e[16]!==o||e[17]!==q?(a=i.jsx(c("BaseTheme.react"),{config:o,children:q}),e[16]=o,e[17]=q,e[18]=a):a=e[18];e[19]!==f||e[20]!==a?(b=i.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:f,children:a}),e[19]=f,e[20]=a,e[21]=b):b=e[21];return b}e=b;g["default"]=e}),98);
__d("MWXIconThread",["MWXSvgIcon","SVGIcon","cr:12608","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12608")),c("gkx")("23219"));g["default"]=a}),98);
__d("SubthreadCreationStrings.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=h._(/*BTDS*/"__JHASH___O5rdp7xXii__JHASH__");b=h._(/*BTDS*/"__JHASH__q-3Q4t45N1___JHASH__");g.createSubthreadLabel=a;g.viewSubthreadLabel=b}),226);
__d("threadCreationUtils",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){return(h||(h=d("I64"))).equal(a.creationStatus,(i||(i=d("LSIntEnum"))).ofNumber(b))}g.creationStatusEquals=a}),98);
__d("MWCMSubthreadChatTabContext.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext;c.useMemo;var k=e({pushSubthreadViewPage:null});function a(){return j(k)}function b(a){var b=d("react-compiler-runtime").c(5),c=a.children;a=a.pushSubthreadViewPage;var e;b[0]!==a?(e={pushSubthreadViewPage:a},b[0]=a,b[1]=e):e=b[1];a=e;e=a;b[2]!==c||b[3]!==e?(a=i.jsx(k.Provider,{value:e,children:c}),b[2]=c,b[3]=e,b[4]=a):a=b[4];return a}g.useSubthreadChatTabContext=a;g.MWCMSubthreadChatTabContextProvider=b}),98);
__d("MWCMSubthreadsInboxFocusContext.react",["react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext;c.useMemo;var k=c.useState,l=e({isSubthreadFocused:!1,setIsSubthreadFocused:function(){}});function a(){return j(l)}function b(a){var b=d("react-compiler-runtime").c(5);a=a.children;var c=k(!1),e=c[0];c=c[1];b[0]!==e?(c={isSubthreadFocused:e,setIsSubthreadFocused:c},b[0]=e,b[1]=c):c=b[1];e=c;c=e;b[2]!==a||b[3]!==c?(e=i.jsx(l.Provider,{value:c,children:a}),b[2]=a,b[3]=c,b[4]=e):e=b[4];return e}g.useIsSubthreadFocusedContext=a;g.MWCMIsSubthreadFocusedContextProvider=b}),98);
__d("MWPConversationSearchContext.react",["$InternalEnum","gkx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;f=e.createContext;e.useCallback;e.useMemo;var j=e.useState;e=b("$InternalEnum")({NAVIGATING:1,NAVIGATED:2});var k=f();b=k;function a(a){var b=d("react-compiler-runtime").c(9);a=a.children;var e=j(),f=e[0];e=e[1];var g=j(),h=g[0];g=g[1];var l=j(!1),m=l[0],n=l[1];l=j(!1);var o=l[0],p=l[1];b[0]===Symbol["for"]("react.memo_cache_sentinel")?(l=function(a){p(a),c("gkx")("4741")&&n(a)},b[0]=l):l=b[0];l=l;b[1]!==o||b[2]!==h||b[3]!==f||b[4]!==m?(l={isConversationSearchVisible:o,navigation:h,search:f,setIsConversationSearchVisible:l,setNavigation:g,setSearch:e,setShouldNavigateSidePanelToSearch:n,shouldNavigateSidePanelToSearch:m},b[1]=o,b[2]=h,b[3]=f,b[4]=m,b[5]=l):l=b[5];g=l;e=g;b[6]!==a||b[7]!==e?(o=i.jsx(k.Provider,{value:e,children:a}),b[6]=a,b[7]=e,b[8]=o):o=b[8];return o}g.SearchNavigationState=e;g.context=b;g.MWPConversationSearchContext=a}),98);
__d("MWPConversationSearchLogger",["I64","LSMessagingThreadTypeUtil","LsMessageSearchEndFalcoEvent","LsMessageSearchMsgImpressionFalcoEvent","LsMessageSearchMsgResultChosenFalcoEvent","LsMessageSearchSearchClickedFalcoEvent","LsMessageSearchStartFalcoEvent","LsMessageSearchThreadImpressionFalcoEvent","LsMessageSearchThreadListClickFalcoEvent","coerceMessagingThreadTypeToLSThreadType","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i=null,j=void 0;function k(a,b,d){var e;e=a?(e=j)!=null?e:l():c("uuidv4")();b={instanceId:e,threadKey:b,threadType:d,universalSearchInstanceId:a?e:void 0};i=b;return b}function l(){var a=c("uuidv4")();j=a;return a}function a(){var a=l();c("LsMessageSearchStartFalcoEvent").log(function(){return{entry_surface:2,message_search:{instance_id:a,surface_name:0,universal_search_instance_id:a}}})}function b(a,b){var e=j;if(e==null)return;var f=a.threadKey,g=a.threadType;k(!0,f,g);c("LsMessageSearchThreadListClickFalcoEvent").log(function(){var f;return{message_search:{instance_id:e,msg_match_cnt:(h||(h=d("I64"))).to_string((f=a.matchCount)!=null?f:(h||(h=d("I64"))).zero),secure_msg_match_cnt:b!=null?b.toString():null,universal_search_instance_id:e},thread:{type:c("coerceMessagingThreadTypeToLSThreadType")(g)}}})}function e(a,b){var e=j;if(e==null)return;var f=a.threadType;c("LsMessageSearchThreadImpressionFalcoEvent").log(function(){var g;return{message_search:{instance_id:e,msg_match_cnt:(h||(h=d("I64"))).to_string((g=a.matchCount)!=null?g:(h||(h=d("I64"))).zero),secure_msg_match_cnt:b!=null?b.toString():null,surface_name:0,universal_search_instance_id:e},thread:{type:c("coerceMessagingThreadTypeToLSThreadType")(f)}}})}function m(){var a=i;if(a==null)return;c("LsMessageSearchEndFalcoEvent").log(function(){return{end_action:0,message_search:{instance_id:a.instanceId,universal_search_instance_id:a.universalSearchInstanceId}}});i=void 0}function f(a,b){m();var e=k(!1,a,b),f=d("LSMessagingThreadTypeUtil").isArmadilloSecure(b);c("LsMessageSearchStartFalcoEvent").log(function(){return{entry_surface:0,is_fts:f,message_search:{instance_id:e.instanceId,surface_name:1},thread:{type:c("coerceMessagingThreadTypeToLSThreadType")(b)}}})}function n(){var a=i;if(a==null)return;c("LsMessageSearchSearchClickedFalcoEvent").log(function(){return{message_search:{instance_id:a.instanceId,universal_search_instance_id:a.universalSearchInstanceId},thread:{type:a.threadType!=null?c("coerceMessagingThreadTypeToLSThreadType")(a.threadType):void 0}}})}function o(a){return(a==null?void 0:a.threadType)==null?void 0:d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)?1:0}function p(a,b,e){var f=i;if(f==null)return;c("LsMessageSearchMsgResultChosenFalcoEvent").log(function(){return{click_surface_name:1,message:{message_type:o(e),sent_time:(e==null?void 0:e.messageTimestampMs)!=null?(h||(h=d("I64"))).to_float(e.messageTimestampMs):void 0},message_search:{instance_id:f.instanceId,universal_search_instance_id:f.universalSearchInstanceId},position:b.toString(),prev_or_next:a,thread:{type:f.threadType!=null?c("coerceMessagingThreadTypeToLSThreadType")(f.threadType):void 0}}})}function q(a){var b=i;if(b==null)return;c("LsMessageSearchMsgImpressionFalcoEvent").log(function(){return{message:{message_type:o(a),sent_time:(a==null?void 0:a.messageTimestampMs)!=null?(h||(h=d("I64"))).to_float(a.messageTimestampMs):void 0},message_search:{instance_id:b.instanceId,surface_name:5,universal_search_instance_id:b.universalSearchInstanceId},thread:{type:b.threadType!=null?c("coerceMessagingThreadTypeToLSThreadType")(b.threadType):void 0}}})}q={logMessageSearchEnd:m,logMessageSearchMsgImpression:q,logMessageSearchMsgResultChosen:p,logMessageSearchSearchClicked:n,logMessageSearchStart:f,logUniversalMessageSearch:a,logUniversalMessageSearchThreadClicked:b,logUniversalMessageSearchThreadImpression:e};g["default"]=q}),98);
__d("useMWPClearConversationSearch",["LSClearMessageSearchTableStoredProcedure","LSFactory","LSIntEnum","LSMessageSearchType","MWPConversationSearchContext.react","MWPVisibleMessageContext.react","asyncToGeneratorRuntime","nullthrows","promiseDone","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=j||d("react");e.useCallback;var k=e.useContext;function a(){var a=d("react-compiler-runtime").c(7),e=k(d("MWPConversationSearchContext.react").context),g;a[0]!==e?(g=c("nullthrows")(e),a[0]=e,a[1]=g):g=a[1];e=g;var j=e.setNavigation,m=e.setSearch;g=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();var n=g.setVisibleMessage,o=(h||(h=c("useReStore")))();a[2]!==o||a[3]!==j||a[4]!==m||a[5]!==n?(e=function(a){var e;e=(e=a==null?void 0:a.shouldResetNavigation)!=null?e:!0;var g=(a=a==null?void 0:a.shouldClearThreadSearch)!=null?a:!0;m();e&&j();n(l);c("promiseDone")(o.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=c("LSFactory")(a);yield c("LSClearMessageSearchTableStoredProcedure")(a,{type_:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").MESSAGE)});g&&(yield c("LSClearMessageSearchTableStoredProcedure")(a,{type_:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageSearchType").THREAD)}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":53"))},a[2]=o,a[3]=j,a[4]=m,a[5]=n,a[6]=e):e=a[6];return e}function l(a){return(a==null?void 0:a.source)==="Search"?null:a}g["default"]=a}),98);
__d("useMWPCloseConversationSearchSession",["MWPConversationSearchContext.react","MWPConversationSearchLogger","nullthrows","react","react-compiler-runtime","useMWPClearConversationSearch"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");b.useCallback;var i=b.useContext;function a(){var a=d("react-compiler-runtime").c(5),b=c("useMWPClearConversationSearch")(),e=i(d("MWPConversationSearchContext.react").context),f;a[0]!==e?(f=c("nullthrows")(e),a[0]=e,a[1]=f):f=a[1];e=f;var g=e.setIsConversationSearchVisible;a[2]!==b||a[3]!==g?(f=function(a){g(!1),b(a),c("MWPConversationSearchLogger").logMessageSearchEnd()},a[2]=b,a[3]=g,a[4]=f):f=a[4];return f}g["default"]=a}),98);
__d("MWInboxInfoPanelContext.react",["Int64Hooks","MWInboxPersistedUIState","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","cr:124","emptyFunction","gkx","isMessengerPWA","react","useEmptyFunction","useMWPCloseConversationSearchSession"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h,k=j.createContext,l=j.useCallback,m=j.useContext,n=j.useRef,o=j.useState,p=(j=b("cr:124"))!=null?j:c("useEmptyFunction"),q=k({currentSubthreadView:null,isOnBestPracticesPageRef:{current:!1},isOnMemberRequestsPageRef:{current:!1},navToBestPracticesRef:{current:!1},openMethod:"saved_state",pushBestPracticesPage:c("emptyFunction"),pushMemberRequestsPage:c("emptyFunction"),setCurrentSubthreadView:c("emptyFunction"),setPushBestPracticesPage:c("emptyFunction"),setPushMemberRequestsPage:c("emptyFunction"),setShouldNavToMemberRequests:c("emptyFunction"),setShowSubthreadList:c("emptyFunction"),setSubthreadKey:c("emptyFunction"),setThreadInfoVisible:c("emptyFunction"),shouldNavToMemberRequests:!1,sourceIsSubthreadNav:{current:!1},subthreadKey:null,threadInfoVisible:!c("isMessengerPWA")()});function a(){return m(q)}function e(a){a=a.children;var b=d("MWInboxPersistedUIState").usePersistedUIState(!c("isMessengerPWA")(),"__MWInboxDetail.info__"),e=b[0],f=b[1];b=o("saved_state");var g=b[0],h=b[1],j=n(!1);b=o(null);var k=b[0],r=b[1],s=n(!1),t=j.current,u=n(c("emptyFunction")),v=u.current,w=n(!1),x=n(!1),y=n(!1);b=o(null);var z=b[0],A=b[1],B=c("useMWPCloseConversationSearchSession")();b=l(function(){f(!1),r(null),A(null)},[f]);p(d("MWResponsiveLayoutConstants").MWLayoutPanel.INFO_PANEL,b);b=m(c("MWResponsiveLayoutContext.react"));var C=b.popCard,D=b.pushCard,E=l(function(a){if(c("gkx")("24056")){a=Boolean(a)===!1?C:D;a(d("MWResponsiveLayoutConstants").MWLayoutPanel.INFO_PANEL)}},[D,C]),F=l(function(a){a?(h("callback"),A(null),r(null)):B({shouldClearThreadSearch:!1,shouldResetNavigation:!1}),f(a),E(a)},[f,B,E]),G=l(function(a){f(!1),r(a),E(a)},[f,E]),H=l(function(a){j.current=a},[]),I=l(function(a,b){b===void 0&&(b=!1),a&&(f(!1),B({shouldClearThreadSearch:!1,shouldResetNavigation:!1}),r(null)),A(a?"subthreadList":null),y.current=a&&b,E(a)},[f,E,B]),J=l(function(a){u.current=a},[]),K=l(function(a){u.current=a},[]);b=d("Int64Hooks").useMemoInt64(function(){return{currentSubthreadView:z,isOnBestPracticesPageRef:x,isOnMemberRequestsPageRef:w,navToBestPracticesRef:s,openMethod:g,pushBestPracticesPage:v,pushMemberRequestsPage:v,setCurrentSubthreadView:A,setPushBestPracticesPage:K,setPushMemberRequestsPage:J,setShouldNavToMemberRequests:H,setShowSubthreadList:I,setSubthreadKey:G,setThreadInfoVisible:F,shouldNavToMemberRequests:t,sourceIsSubthreadNav:y,subthreadKey:k,threadInfoVisible:e}},[z,x,g,v,K,J,H,I,G,F,t,k,e,s]);return i.jsx(q.Provider,{value:b,children:a})}e.displayName=e.name+" [from "+f.id+"]";g.useMWInboxInfoPanelContext=a;g.MWInboxInfoPanelProvider=e}),98);
__d("useOpenSubthreadView",["GroupsCometChatsEngagementLogger","I64","MWCMSubthreadChatTabContext.react","MWCMSubthreadsInboxFocusContext.react","MWInboxInfoPanelContext.react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("react-compiler-runtime").c(5),b=d("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),c=b.setCurrentSubthreadView,e=b.setSubthreadKey;b=(b=d("MWCMSubthreadChatTabContext.react").useSubthreadChatTabContext())!=null?b:{};var f=b.pushSubthreadViewPage;b=d("MWCMSubthreadsInboxFocusContext.react").useIsSubthreadFocusedContext();var g=b.setIsSubthreadFocused;a[0]!==f||a[1]!==c||a[2]!==g||a[3]!==e?(b=function(a,b){b=b===void 0?!1:b;d("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{is_chat_tab:f!=null?"1":"0",is_subthread:"1"},event:"thread_open",parent_surface:"thread_view",source:b===!0?"subthread_creation":"subthread_xma",surface:"subthread_view",thread_id:(h||(h=d("I64"))).to_string(a)});f!=null?f==null?void 0:f(a):(c("subthreadView"),e(a),g(!0))},a[0]=f,a[1]=c,a[2]=g,a[3]=e,a[4]=b):b=a[4];return b}g["default"]=a}),98);
__d("useMWCMCreateSubthread",["fbt","FBLogger","Int64Hooks","LSCommunityThreadCreationStatus","LSCreateCommunitySubThreadStoredProcedure","LSFactory","LSLocalCreateOptimisticCommunityChatSubThreadStoredProcedure","LSPlatformWaitForTaskCompletion","LSThreadBitOffset","MWLSThread","ReQL","ReQLSuspense","asyncToGeneratorRuntime","emptyFunction","promiseDone","react","threadCreationUtils","useCommunityFolder","useMWXPushErrorToast","useOpenSubthreadView","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;e=j||d("react");var k=e.useEffect,l=e.useRef,m=e.useState;function a(a){var e=(i||(i=c("useReStore")))(),g=d("MWLSThread").useThreadExn(a.threadKey),j=c("useCommunityFolder")(g),n=l(c("emptyFunction")),o=c("useMWXPushErrorToast")(),p=m(!1),q=p[0],r=p[1],s=c("useOpenSubthreadView")(),t=d("LSThreadBitOffset").has(206,g);k(function(){return function(){n==null?void 0:n.current()}},[]);p=d("Int64Hooks").useCallbackInt64(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(j==null)return;var b=(yield e.runInTransaction(function(b){return c("LSLocalCreateOptimisticCommunityChatSubThreadStoredProcedure")(c("LSFactory")(b),{communityId:j.folderId,parentMessageId:a.messageId,parentThreadId:a.threadKey})},"readwrite",void 0,void 0,f.id+":65"));b=b[0];s(b,!0)}),[e,j,a.messageId,a.threadKey,s]);g=d("Int64Hooks").useCallbackInt64(function(){if(t)return;var b=function(a){a=a[0];if(a==null)return g();var b=d("ReQL").fromTableAscending(e.tables.thread_creation_status).getKeyRange(a);a=d("ReQLSuspense").first(b,f.id+":97");a==null||d("threadCreationUtils").creationStatusEquals(a,c("LSCommunityThreadCreationStatus").PENDING)?h():i(a);function h(){n.current=b.subscribe(function(a,b){if(b.operation==="delete")return;a=b.value;if(d("threadCreationUtils").creationStatusEquals(a,c("LSCommunityThreadCreationStatus").PENDING))return;n.current();i(a)})}function i(a){r(!1);try{var b=a.threadId;if(d("threadCreationUtils").creationStatusEquals(a,c("LSCommunityThreadCreationStatus").FAILURE)||b==null)throw c("FBLogger")("cm_web").warn("sidechat creation failed");s(b,!0)}catch(a){g()}}},g=function(){r(!1),o({title:h._(/*BTDS*/"__JHASH__aLKnhppCDUk__JHASH__")})};if(j==null)return;r(!0);c("promiseDone")(c("LSPlatformWaitForTaskCompletion")(e,function(b){return c("LSCreateCommunitySubThreadStoredProcedure")(c("LSFactory")(b),{communityId:j.folderId,parentMessageId:a.messageId,parentThreadId:a.threadKey})},"createSocialChannel"),function(a){return b(a)},g)},[e,j,t,a.messageId,a.threadKey,s,o]);return[t?p:g,q]}g["default"]=a}),226);
__d("MWCMCreateSubthreadRowActionButton.react",["I64","Int64Hooks","LsFalcoEventEntryPoint","MWMessageActionButton.react","MWXIconThread","SubthreadCreationStrings.react","react","react-compiler-runtime","requireDeferred","useMWCMCreateSubthread","useOpenSubthreadView"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react"),k=c("requireDeferred")("LsMessageActionFalcoEvent").__setRef("MWCMCreateSubthreadRowActionButton.react");function a(a){var b=d("react-compiler-runtime").c(11),e=a.message;a=c("useMWCMCreateSubthread")(e);var f=a[0];a=a[1];var g=c("useOpenSubthreadView")(),h=e.subthreadKey,l,m;b[0]!==e.messageId||b[1]!==e.threadKey||b[2]!==f||b[3]!==g||b[4]!==h?(l=function(){k.onReady(function(a){return a.log(function(){var a={};return{action:{container_module:"MWCMCreateSubthreadRowActionButton",type:h!=null?105:104},error:{message:void 0},extra:a,message:{attachment_type:"",entry_point:d("LsFalcoEventEntryPoint").messageActions,id:e.messageId,recipient_id:void 0},thread:{group_size:(i||(i=d("I64"))).to_string(i.zero),id:i.to_string(e.threadKey),type:18}}})}),h!=null?g(h):f()},m=[e.messageId,e.threadKey,f,g,h],b[0]=e.messageId,b[1]=e.threadKey,b[2]=f,b[3]=g,b[4]=h,b[5]=l,b[6]=m):(l=b[5],m=b[6]);l=d("Int64Hooks").useCallbackInt64(l,m);m=h!=null?d("SubthreadCreationStrings.react").viewSubthreadLabel:d("SubthreadCreationStrings.react").createSubthreadLabel;var n;b[7]!==a||b[8]!==l||b[9]!==m?(n=j.jsx(c("MWMessageActionButton.react"),{disabled:a,icon:c("MWXIconThread"),label:m,onPress:l}),b[7]=a,b[8]=l,b[9]=m,b[10]=n):n=b[10];return n}g["default"]=a}),98);
__d("MWXIconShare",["MWXSvgIcon","SVGIcon","cr:12577","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12577")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWChatForwardAction.react",["MWMessageActionButton.react","MWXIconShare","ODS","emptyFunction","react","react-compiler-runtime","useMWChatForward"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function k(a){(i||(i=d("ODS"))).bumpEntityKey(3185,"mwchat_actions","forward"),a==null?void 0:a.onClick()}function a(a){var b=d("react-compiler-runtime").c(10),e=a.dropToggle,f=a.forwardDialogType,g=a.label,h=a.messageID;a=a.onForward;e=e===void 0?!1:e;f=f===void 0?"open_":f;var i;b[0]!==e||b[1]!==f||b[2]!==h||b[3]!==a?(i={dropToggle:e,forwardDialogType:f,messageID:h,onClose:c("emptyFunction"),onSend:a},b[0]=e,b[1]=f,b[2]=h,b[3]=a,b[4]=i):i=b[4];var l=c("useMWChatForward")(i);b[5]!==l?(e=function(){return k(l)},b[5]=l,b[6]=e):e=b[6];b[7]!==g||b[8]!==e?(f=j.jsx(c("MWMessageActionButton.react"),{icon:c("MWXIconShare"),label:g,loggingEvent:"open_forward_message_dialog",onPress:e,testid:void 0}),b[7]=g,b[8]=e,b[9]=f):f=b[9];return f}g["default"]=a}),98);
__d("MWChatPromptFlyoutFrontCard.react",["fbt","BaseTextArea.react","CometPlaceholder.react","MWChatPollFacepile.react","MWPActor.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore","vulture"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l={textarea:{background:"x11g6tue",borderTopStyle:"x1ejq31n",borderEndStyle:"xd10rxx",borderBottomStyle:"x1sy0etr",borderStartStyle:"x17r0tee",color:"xzsf02u",fontSize:"x6prxxf",fontWeight:"x1xlr1w8",height:"x1m3v4wt",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",paddingStart:"xurb0ha",paddingEnd:"x1sxyh0",paddingLeft:null,paddingRight:null,textAlign:"x2b8uid",width:"xrostsh",$$css:!0}};function m(){var a=d("react-compiler-runtime").c(10);c("vulture")("--I5l4MGyBjEFx_7p5moc1YSO7o=");var b=(i||(i=c("useReStore")))(),e=d("MWPActor.react").useActor(),g;a[0]!==b.tables.contacts||a[1]!==e?(g=function(){return d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(e).map(n)},a[0]=b.tables.contacts,a[1]=e,a[2]=g):g=a[2];var h;a[3]!==b||a[4]!==e?(h=[b,e],a[3]=b,a[4]=e,a[5]=h):h=a[5];g=d("ReQLSuspense").useFirst(g,h,f.id+":72");a[6]!==g?(h=g!=null?[{profile_picture_url:g}]:[],a[6]=g,a[7]=h):h=a[7];g=h;a[8]!==g?(h=k.jsx(c("MWChatPollFacepile.react"),{contacts:g,direction:"reversed",gap:"negative",size:"mediumLarge"}),a[8]=g,a[9]=h):h=a[9];return h}function n(a){return a.profilePictureUrl}function a(a){var b=d("react-compiler-runtime").c(12),e=a.maxLength,f=a.onChange,g=a.showFacepile;a=a.value;g=g===void 0?!1:g;var i;b[0]===Symbol["for"]("react.memo_cache_sentinel")?(i={className:"x9bbmet xfh8nwu xoqspk4 x12v9rci x138vmkv xi1c1fh xdt5ytf x1iyjqo2 x2lah0s x1m3v4wt x1gslohp x12nagc x1n2onr6 xrostsh x1vjfegm"},b[0]=i):i=b[0];var j;b[1]===Symbol["for"]("react.memo_cache_sentinel")?(j=h._(/*BTDS*/"__JHASH__M7osj0aoSaL__JHASH__"),b[1]=j):j=b[1];var n;b[2]===Symbol["for"]("react.memo_cache_sentinel")?(n=h._(/*BTDS*/"__JHASH__4kvNP1szhkx__JHASH__"),b[2]=n):n=b[2];b[3]!==e||b[4]!==f||b[5]!==a?(j=k.jsx(c("BaseTextArea.react"),{"aria-label":j,maxLength:e,onChange:f,placeholder:n,suppressFocusRing:!0,unresizable:!0,value:a,xstyle:l.textarea}),b[3]=e,b[4]=f,b[5]=a,b[6]=j):j=b[6];b[7]!==g?(n=g?k.jsx(c("CometPlaceholder.react"),{fallback:null,name:"MWChatPromptFlyoutFrontCard",children:k.jsx("div",babelHelpers["extends"]({className:"x1gryazu xkrivgy x1l90r2v"},{children:k.jsx(m,{})}))}):null,b[7]=g,b[8]=n):n=b[8];b[9]!==j||b[10]!==n?(e=k.jsxs("div",babelHelpers["extends"]({},i,{children:[j,n]})),b[9]=j,b[10]=n,b[11]=e):e=b[11];return e}g["default"]=a}),226);
__d("MWChatReactionsActionContainer.react",["JSResourceForInteraction","MWV2MessageRowIsRowFocusedContext.react","MWXLazyPopoverTrigger.react","MWXPopoverLoadingState.react","emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;b.useCallback;var j=b.useContext,k=b.useState,l={popoverLoading:{minHeight:"x1wiwyrm",minWidth:"x1q6reyq",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(27),e=a.align,f=a.alwaysShowEmojiPicker,g=a.children,h=a.closeActionsMenu,m=a.disableCustomReactions,n=a.hasReactionsV2,o=a.isBroadcastChannel,p=a.isBroadcastThread,q=a.isSecure,r=a.messageID,s=a.onVisibilityChange,t=a.reactionsPopoverResource,u=a.sendReaction;a=e===void 0?"middle":e;e=f===void 0?!1:f;f=m===void 0?!1:m;m=q===void 0?!1:q;var v=j(d("MWV2MessageRowIsRowFocusedContext.react").context);if(b[0]!==t){q=(q=t)!=null?q:c("JSResourceForInteraction")("MWChatReactionsMenu.react").__setRef("MWChatReactionsActionContainer.react");b[0]=t;b[1]=q}else q=b[1];t=q;q=k(!1);var w=q[0],x=q[1];q=e||w;b[2]!==h||b[3]!==n||b[4]!==u?(e=function(a,b){b=b[0];b=n!==!0&&b===a;u(a,b);return h()},b[2]=h,b[3]=n,b[4]=u,b[5]=e):e=b[5];w=e;b[6]!==v||b[7]!==s?(e=function(a){a||x(!1),s(a),v.setFocused(a)},b[6]=v,b[7]=s,b[8]=e):e=b[8];e=e;a=a==="end_"?"end":a;var y;b[9]===Symbol["for"]("react.memo_cache_sentinel")?(y=i.jsx(c("MWXPopoverLoadingState.react"),{withArrow:!1,xstyle:l.popoverLoading}),b[9]=y):y=b[9];var z;b[10]!==h||b[11]!==f||b[12]!==o||b[13]!==p||b[14]!==m||b[15]!==r||b[16]!==w||b[17]!==q?(z={closeActionsMenu:h,disableCustomReactions:f,isBroadcastChannel:o,isBroadcastThread:p,isSecure:m,messageID:r,onClose:c("emptyFunction"),onSelect:w,setShowEmojiPicker:x,showEmojiPicker:q},b[10]=h,b[11]=f,b[12]=o,b[13]=p,b[14]=m,b[15]=r,b[16]=w,b[17]=q,b[18]=z):z=b[18];f=q?"dialog":"menu";o=q?"below":"above";b[19]!==g||b[20]!==e||b[21]!==t||b[22]!==z||b[23]!==f||b[24]!==o||b[25]!==a?(p=i.jsx(c("MWXLazyPopoverTrigger.react"),{align:a,fallback:y,onVisibilityChange:e,popoverProps:z,popoverResource:t,popoverType:f,position:o,children:g}),b[19]=g,b[20]=e,b[21]=t,b[22]=z,b[23]=f,b[24]=o,b[25]=a,b[26]=p):p=b[26];return p}g["default"]=a}),98);
__d("MessengerInCallReactionFilled.svg.react",["XPlatReactSVG","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(d("XPlatReactSVG").Svg,babelHelpers["extends"]({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:a.title},a,{children:[a.children!=null&&i.jsx(d("XPlatReactSVG").Defs,{children:a.children}),i.jsx(d("XPlatReactSVG").Path,{d:"M26.5 5a1 1 0 1 1 2 0v2.25c0 .138.112.25.25.25H31a1 1 0 1 1 0 2h-2.25a.25.25 0 0 0-.25.25V12a1 1 0 1 1-2 0V9.75a.25.25 0 0 0-.25-.25H24a1 1 0 1 1 0-2h2.25a.25.25 0 0 0 .25-.25V5z"}),i.jsx(d("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M21 7.792a.485.485 0 0 0-.366-.475A11.027 11.027 0 0 0 18 7C11.925 7 7 11.925 7 18s4.925 11 11 11 11-4.925 11-11c0-.908-.11-1.79-.317-2.634a.485.485 0 0 0-.475-.366H27.5a3 3 0 0 1-3-3 .5.5 0 0 0-.5-.5 3 3 0 0 1-3-3v-.708zM14.25 14c-.938 0-1.5.75-1.5 2s.563 2 1.5 2c.938 0 1.5-.75 1.5-2s-.563-2-1.5-2zm7.5 0c-.938 0-1.5.75-1.5 2s.563 2 1.5 2c.938 0 1.5-.75 1.5-2s-.563-2-1.5-2zm1.75 7.5c0 2-2.5 4-5.5 4s-5.5-2-5.5-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MWChatReactionsAddReactionIcon",["MWXSvgIcon","MessengerInCallReactionFilled.svg.react","SVGIcon"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(c("MessengerInCallReactionFilled.svg.react")),!0);g["default"]=a}),98);
__d("MWV2MessageRowActionsContext.react",["emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;f=e.createContext;var j=e.useContext;e={current:c("emptyFunction")};var k={current:c("emptyFunction")},l={current:c("emptyFunction")};c={current:c("emptyFunction")};e={forwardMessage:e,openReactionsMenu:k,removeMessage:l,replyToMessage:c};var m=f(e);function a(){return j(m)}function b(a){var b=d("react-compiler-runtime").c(3),c=a.children;a=a.value;var e;b[0]!==c||b[1]!==a?(e=i.jsx(m.Provider,{value:a,children:c}),b[0]=c,b[1]=a,b[2]=e):e=b[2];return e}g.useMessageRowActionsContext=a;g.MWV2MessageRowActionsContextProvider=b}),98);
__d("MWXIconFaceHappyOutline",["MWXSvgIcon","SVGIcon","cr:12410","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12410")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWChatReactionsAction.react",["fbt","MWChatMessageId","MWChatReactionsActionContainer.react","MWChatReactionsAddReactionIcon","MWMessageActionButton.react","MWV2MessageRowActionsContext.react","MWXIconFaceHappyOutline","ODS","emptyFunction","react","useIsMultiReactionEnabled"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react"));b=i;var l=b.useCallback,m=b.useEffect;function a(a){var b=h._(/*BTDS*/"__JHASH__czR8vxcW0mN__JHASH__"),e=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext(),f=e.openReactionsMenu,g=l(function(){f.current=c("emptyFunction");return},[f]);m(function(){return g},[g]);e=a.messageID;e=d("MWChatMessageId").getThreadId(e);var i=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(e);return k.jsx(c("MWChatReactionsActionContainer.react"),babelHelpers["extends"]({},a,{children:function(a,e,g,h,l,m){g=function(){e(),(j||(j=d("ODS"))).bumpEntityKey(3185,"mwchat_actions","reaction")};f.current=g;return k.jsx(c("MWMessageActionButton.react"),{icon:i?c("MWChatReactionsAddReactionIcon"):c("MWXIconFaceHappyOutline"),label:b,loggingEvent:"click_react_to_message",onHoverIn:h,onHoverOut:l,onPress:g,onPressIn:m,ref:a,testid:void 0})}}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWFalcoFeatureEventLogger",["I64","LSMessagingThreadTypeUtil","MessengerWebEventsFalcoEvent","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f,g){c("gkx")("24170")&&c("MessengerWebEventsFalcoEvent").log(function(){return{entry_point:a,event_name:b,is_secured:d("LSMessagingThreadTypeUtil").isArmadilloSecure(g),other_user_fbid:e!=null?(h||(h=d("I64"))).to_string(e):null,thread_fbid:(h||(h=d("I64"))).to_string(f)}})}g.logEvent=a}),98);
__d("MWMessageListLoggingContext",["react","react-compiler-runtime","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));f=h;var j=f.createContext,k=f.useContext,l=f.useRef,m=j({current:""});function a(a){var b=d("react-compiler-runtime").c(2),c=a.children;a=a.flowInstanceId;a=l(a);b[0]!==c?(a=i.jsx(m.Provider,{value:a,children:c}),b[0]=c,b[1]=a):a=b[1];return a}function b(){return k(m)}function e(){var a=k(m);(a.current===null||a.current==="")&&(a.current=c("uuidv4")());return a}g.MWMessageListLoggingContext=a;g.useFlowInstanceIdContext=b;g.useFlowInstanceId=e}),98);
__d("MWPBaseMessageListRowActions.react",["react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k={hidden:{visibility:"xlshs6z",$$css:!0},incoming:{flexDirection:"x1q0g3np",$$css:!0},outgoing:{flexDirection:"x15zctf7",$$css:!0},root:{alignItems:"x6s0dn4",columnGap:"xl5lk40",display:"x78zum5",width:"x1mqs8db",$$css:!0}},l=i.createContext("full");function a(){var a=d("react-compiler-runtime").c(1),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=i.jsx(d("react-strict-dom").html.div,{role:"none",style:k.root}),a[0]=b):b=a[0];return b}function m(a){var b=d("react-compiler-runtime").c(5),c=a.children;a=a.outgoing;a=a?k.outgoing:k.incoming;var e;b[0]!==a?(e=[k.root,a],b[0]=a,b[1]=e):e=b[1];b[2]!==c||b[3]!==e?(a=i.jsx(d("react-strict-dom").html.div,{role:"none",style:e,children:c}),b[2]=c,b[3]=e,b[4]=a):a=b[4];return a}function b(a){var b=d("react-compiler-runtime").c(4),c=a.children;a=a.showWith;a=a===void 0?"full":a;var e=j(l);e=e==="partial"&&a!=="partial";a=e&&k.hidden;var f;b[0]!==c||b[1]!==e||b[2]!==a?(f=i.jsx(d("react-strict-dom").html.div,{"aria-hidden":e,style:a,children:c}),b[0]=c,b[1]=e,b[2]=a,b[3]=f):f=b[3];return f}function c(a){var b=d("react-compiler-runtime").c(15),c=a.ariaHidden,e=a.children,f=a.onMouseEnter,g=a.onMouseLeave,h=a.outgoing,j=a.visibility;a=a.xstyle;j=j===void 0?"full":j;c=(c=c)!=null?c:!1;var k=h?n.outgoing:n.incoming,o;b[0]!==k||b[1]!==a?(o=[n.root,k,a],b[0]=k,b[1]=a,b[2]=o):o=b[2];b[3]!==e||b[4]!==h?(k=i.jsx(m,{outgoing:h,children:e}),b[3]=e,b[4]=h,b[5]=k):k=b[5];b[6]!==f||b[7]!==g||b[8]!==c||b[9]!==o||b[10]!==k?(a=i.jsx(d("react-strict-dom").html.div,{"aria-hidden":c,onMouseEnter:f,onMouseLeave:g,style:o,children:k}),b[6]=f,b[7]=g,b[8]=c,b[9]=o,b[10]=k,b[11]=a):a=b[11];b[12]!==a||b[13]!==j?(e=i.jsx(l.Provider,{value:j,children:a}),b[12]=a,b[13]=j,b[14]=e):e=b[14];return e}var n={incoming:{paddingStart:"x1t2a60a",$$css:!0},outgoing:{paddingEnd:"x1mpkggp",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"x2lah0s",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1mqs8db",zIndex:"x1n327nk",$$css:!0}};g.MWPBaseMessageListRowActionsEmptyList=a;g.MWPBaseMessageListRowActionsList=m;g.MWPBaseMessageListRowActionsListItem=b;g.MWPBaseMessageListRowActionsContainer=c}),98);
__d("MWV2OnlyGlobalRemoveMessageDialog.entrypoint",["JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{}},root:c("JSResourceForInteraction")("MWV2OnlyGlobalRemoveMessageDialog.react").__setRef("MWV2OnlyGlobalRemoveMessageDialog.entrypoint")};g["default"]=a}),98);
__d("MWXIconDots3Vertical",["MWXSvgIcon","SVGIcon","cr:12399","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12399")),c("gkx")("23219"));g["default"]=a}),98);
__d("shouldUseImageGrouping",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){var c,e=a.displayedContentTypes,f=a.groupId;c=(h||(h=d("I64"))).to_int32((c=a.groupSize)!=null?c:(h||(h=d("I64"))).zero);return b&&(h||(h=d("I64"))).equal(e,(i||(i=d("LSIntEnum"))).ofNumber(2))&&f!=null&&a.groupIndex!=null&&a.groupSize!=null&&c>1}g["default"]=a}),98);
__d("useMAWBulkMediaUIState",["react","react-compiler-runtime","useMAWBulkMediaDownloadStatusUIState","useMAWBulkMediaValidationResult"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useMemo;function a(a){var b=d("react-compiler-runtime").c(5),e=c("useMAWBulkMediaDownloadStatusUIState")(a);a=c("useMAWBulkMediaValidationResult")(a);if(b[0]!==a){var f;f=(f=a)!=null?f:[];b[0]=a;b[1]=f}else f=b[1];b[2]!==e||b[3]!==f?(a={buldValidationResult:f,bulkDownloadStatus:e},b[2]=e,b[3]=f,b[4]=a):a=b[4];e=a;f=e;return f}g["default"]=a}),98);
__d("useGetMediaGroupInformation",["I64","MAWMediaDownloadStatusUIStateType","ReQL","ReQLSuspense","qex","react","react-compiler-runtime","shouldUseImageGrouping","useMAWBulkMediaUIState","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useMemo;function a(a,b,e){var g,j,m,n=(h||(h=c("useReStore")))(),o=a.groupId,p=a.threadKey;g=(i||(i=d("I64"))).to_int32((g=a.groupIndex)!=null?g:(i||(i=d("I64"))).zero);j=i.to_int32((j=a.groupSize)!=null?j:(i||(i=d("I64"))).zero);var q=c("shouldUseImageGrouping")(a,b);a=q?4:0;q&&j<4&&(a=j);var r=d("ReQLSuspense").useArray(function(){return q&&o!=null?d("ReQL").fromTableDescending(n.tables.messages.index("messageGroupId")).getKeyRange(o).map(function(a){var b;b=(b=d("ReQLSuspense").first(d("ReQL").fromTableDescending(n.tables.attachments).getKeyRange(p,a.messageId),f.id+":101"))!=null?b:null;return{attachment:b,message:a}}):d("ReQL").empty()},[n,o,p,q],f.id+":93"),s=k(function(){return r.sort(function(a,b){return(i||(i=d("I64"))).to_int32((a=a.message.groupIndex)!=null?a:(i||(i=d("I64"))).zero)-i.to_int32((a=b.message.groupIndex)!=null?a:(i||(i=d("I64"))).zero)})},[r]),t=q&&s.length>=1?(b=s[0])==null?void 0:b.message:null;b=d("ReQLSuspense").useFirst(function(){if(!q||t==null)return d("ReQL").empty();var a;c("qex")._("18")?a=d("ReQL").fromTableAscending(n.tables.messages.index("messageDisplayOrderOfflineThreadingId")).getKeyRange(t.threadKey).bounds({gte:d("ReQL").key(t.primarySortKey,t.offlineThreadingId)}):a=d("ReQL").fromTableAscending(n.tables.messages.index("messageDisplayOrder")).getKeyRange(t.threadKey).bounds({gte:d("ReQL").key(t.primarySortKey)});return a.filter(function(a){return a.groupId!==t.groupId}).filter(function(a){return!a.isAdminMessage})},[n,t,q],f.id+":132");e=l(s,q,e);var u=e.attachmentsToRetryDownload,v=e.mediaDownloadErrorsCount;e=e.mediaDownloadStatuses;if(q!==!0)return null;m=s.length>=1?(i||(i=d("I64"))).to_int32((m=(m=s[0])==null?void 0:(m=m.message)==null?void 0:m.groupIndex)!=null?m:(i||(i=d("I64"))).zero):0;m=g===m;var w=new Array(a),x=function(a){var b=s.findIndex(function(b){return b.message.groupIndex!=null&&(i||(i=d("I64"))).to_int32(b.message.groupIndex)===a});b===-1?w[a]={attachment:null,message:null}:w[a]={attachment:s[b].attachment,message:s[b].message}};for(var y=0;y<a&&y<a;++y)x(y);return{attachmentsToRetryDownload:u,groupId:o,groupIndex:g,groupSize:j,groupsLastMessage:s!=null&&s.length>0?s[s.length-1].message:null,groupsNextMessage:(x=b)!=null?x:null,hasAllMessagesSent:s.every(function(a){return(i||(i=d("I64"))).equal(a.message.sendStatusV2,i.of_int32(2))}),hasMissingMedia:s.some(function(a){return a.attachment==null}),hasMissingMessages:s.length!==j,isFirstMediaMessageInGroup:m,isMediaGroupLastMessage:b==null,mediaDownloadErrorsCount:v,mediaDownloadStatuses:e,messagesAndAttachments:s,messagesAndAttachmentsShownInGroup:w,tileSize:a}}function l(a,b,e){var f=d("react-compiler-runtime").c(19);bb0:{if(!b){f[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=[],f[0]=b):b=f[0];b=b;break bb0}if(f[1]!==e||f[2]!==a){var g;f[4]!==e?(g=function(a){return{attachment:a,mediaRenderQpl:e,statusKey:a.attachmentFbid}},f[4]=e,f[5]=g):g=f[5];g=a.map(o).filter(Boolean).map(g);f[1]=e;f[2]=a;f[3]=g}else g=f[3];b=g}a=b;g=c("useMAWBulkMediaUIState")(a);b=g.bulkDownloadStatus;f[6]!==b?(g=b!=null?b:[],f[6]=b,f[7]=g):g=f[7];b=g;var h=b;f[8]!==h?(g=h.filter(n),f[8]=h,f[9]=g):g=f[9];b=g;g=b;if(f[10]!==a||f[11]!==h){f[13]!==h?(b=function(a,b){return d("MAWMediaDownloadStatusUIStateType").isRetryableErrorState(h[b])},f[13]=h,f[14]=b):b=f[14];b=a.filter(b).map(m);f[10]=a;f[11]=h;f[12]=b}else b=f[12];a=b;b=a;a=g.length;f[15]!==b||f[16]!==a||f[17]!==h?(g={attachmentsToRetryDownload:b,mediaDownloadErrorsCount:a,mediaDownloadStatuses:h},f[15]=b,f[16]=a,f[17]=h,f[18]=g):g=f[18];return g}function m(a){a=a.attachment;return a}function n(a){return d("MAWMediaDownloadStatusUIStateType").isErrorState(a)}function o(a){a=a.attachment;return a}g["default"]=a}),98);
__d("useMWV2LocalRemoveMessage",["I64","LSDict","LSIntEnum","LSTaskType","LSTasks","MWV2LogMessageClick","MessengerWebUXLogger","QPLUserFlow","Random","WebUserFlowLoggingDataContextProvider.react","promiseDone","qpl","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;b=k||d("react");b.useCallback;var l=b.useContext;function a(){var a=d("react-compiler-runtime").c(4),b=(h||(h=c("useReStore")))(),e=l(d("WebUserFlowLoggingDataContextProvider.react").WebUserFlowLoggingDataContext),g=e.loggingDataRef,k=c("MessengerWebUXLogger").useInteractionLogger();a[0]!==b||a[1]!==k||a[2]!==g?(e=function(a){var e=c("qpl")._(25308285,"2002"),h=Date.now()+(Math.round(d("Random").random()*1e4)+1e4);c("QPLUserFlow").start(e,{annotations:{string:{isEphemeralMessage:a.ephemeralDurationInSec!=null||a.ephemeralExpirationTs!=null?"true":"false",type:"openDeleteMessageForMe"}},instanceKey:h});d("MWV2LogMessageClick").log(b,a,46);c("promiseDone")(b.runInTransaction(function(b){return d("LSTasks").enqueue(b,c("LSTaskType").DeleteMessage,(i||(i=d("I64"))).to_string((j||(j=d("LSIntEnum"))).ofNumber(155)),new(c("LSDict"))([["message_id",a.messageId],["thread_key",a.threadKey]])).then(function(){k==null?void 0:k(babelHelpers["extends"]({},g.current,{eventName:"message_remove_success",eventType:"backend"})),c("QPLUserFlow").endSuccess(e,{instanceKey:h})})["catch"](function(a){return k==null?void 0:k(babelHelpers["extends"]({},g.current,{eventName:"message_remove_failure",eventType:"backend",extraData:babelHelpers["extends"]({},g.current.extraData,{error:a.toString()})}))})},"readwrite",void 0,void 0,f.id+":57"))},a[0]=b,a[1]=k,a[2]=g,a[3]=e):e=a[3];return e}g["default"]=a}),98);
__d("useHandleRemoveLocalMessage",["DeletionType.react","MessengerWebUXLogger","cr:9775","react","react-compiler-runtime","useGetMediaGroupInformation","useIsSecureMessage","useMWV2LocalRemoveMessage","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;function a(){return j}function j(a,b){}var k=b("cr:9775")||a;function e(a,b,e){var f=d("react-compiler-runtime").c(10),g=(h||(h=c("useReStore")))(),i=c("MessengerWebUXLogger").useInteractionLogger(),j;f[0]!==a?(j={fallbackThreadType:a},f[0]=a,f[1]=j):j=f[1];var l=c("useIsSecureMessage")(g,b,j),m=k(),n=c("useMWV2LocalRemoveMessage")(),o=c("useGetMediaGroupInformation")(b,l);f[2]!==l||f[3]!==n||f[4]!==i||f[5]!==o||f[6]!==b||f[7]!==e||f[8]!==m?(a=function(a){i==null?void 0:i(babelHelpers["extends"]({},a,{eventName:"message_remove_confirm"})),l?m(b,o):n(b),e&&e(c("DeletionType.react").Local)},f[2]=l,f[3]=n,f[4]=i,f[5]=o,f[6]=b,f[7]=e,f[8]=m,f[9]=a):a=f[9];return a}g["default"]=e}),98);
__d("useMWPCanRemoveMessageGlobally",["I64","LSIntEnum","LSMessageThreadUnsendabilityStatus","MWMessageDeliveryStatus","MWPThreadCapabilitiesContext","isDeliveryStatusErrorState","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=d("react-compiler-runtime").c(2),e=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();e=e.canUnsendMessage;if(c("isDeliveryStatusErrorState")(d("MWMessageDeliveryStatus").getFromSendStatus(a.sendStatusV2)))return!1;var f;b[0]!==a.cannotUnsendReason?(f=a.cannotUnsendReason!=null?(h||(h=d("I64"))).equal(a.cannotUnsendReason,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!0,b[0]=a.cannotUnsendReason,b[1]=f):f=b[1];a=f;return e&&a}g["default"]=a}),98);
__d("useMWPIsMessagePinned",["ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useDeferredValue;function a(a){var b=d("react-compiler-runtime").c(8),e=(h||(h=c("useReStore")))(),g,i;b[0]!==e||b[1]!==a?(g=function(){return a!=null?d("ReQL").fromTableAscending(e.tables.msg_pinned_messages_v2).getKeyRange(a.threadKey,a.messageId):d("ReQL").empty()},i=[e,a],b[0]=e,b[1]=a,b[2]=g,b[3]=i):(g=b[2],i=b[3]);g=!!d("ReQLSuspense").useFirst(g,i,f.id+":28");var k;b[4]!==e||b[5]!==a?(i=function(){return a!=null&&!a.isUnsent?d("ReQL").fromTableAscending(e.tables.client_web_pinned_messages).getKeyRange(a.threadKey,a.offlineThreadingId):d("ReQL").empty()},k=[e,a],b[4]=e,b[5]=a,b[6]=i,b[7]=k):(i=b[6],k=b[7]);b=!!d("ReQLSuspense").useFirst(i,k,f.id+":38");return j(g||b)}g["default"]=a}),98);
__d("MWV2ContextualActionsButton.react",["fbt","I64","Int64Hooks","JSResourceForInteraction","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","MWCMThreadTypes.react","MWMessageActionButton.react","MWMessageDeliveryStatus","MWPActor.react","MWPThreadCapabilitiesContext","MWV2LogMessageClick","MWV2MessageRowActionsContext.react","MWV2MessageRowIsRowFocusedContext.react","MWV2OnlyGlobalRemoveMessageDialog.entrypoint","MWXDeferredPopoverTrigger.react","MWXIconDots3Vertical","MWXMAV2IsDataclassLiveLocationXMA","MessagingAttachmentType","MetaConfig","ReQL","ReQLSuspense","WebUserFlowLoggingDataContextProvider.react","emptyFunction","gkx","isDeliveryStatusErrorState","isFeatureLimitEnabled","react","requireDeferred","useHandleRemoveLocalMessage","useIsReadOnlyFeatureLimitedWithThreadType","useIsSecureMessage","useMWPCanRemoveMessageGlobally","useMWPIsMessagePinned","useMWXEntryPointDialog","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react"));b=l;var aa=b.useCallback,n=b.useContext,ba=b.useEffect,ca=c("requireDeferred")("MWV2ContextualActionsMenu.react").__setRef("MWV2ContextualActionsButton.react");function a(a){var b=a.attachment,e=a.canRemoveMessageGlobally,g=a.closeActionsMenu,l=a.containerThreadKey,o=a.extraActions,da=a.isOutgoing,p=a.isSubthreadParentMessage;p=p===void 0?!1:p;var ea=a.learnMoreDialogType,q=a.learnMoreOnMessageRemove,r=a.message,s=a.onRemoveMessageLogger,fa=a.removeMessageDialogTitle,ga=a.setMoreMenuOpen,t=a.shouldHideActions;t=t===void 0?!1:t;var ha=a.showBumpActionInContextualMenu,u=a.showBusinessMessageFeedbackOptionsInContextualMenu,v=a.showCreateSubthread;v=v===void 0?!1:v;var w=a.showFeedbackOptionsInContextualMenu,x=a.showForwardActionInContextualMenu,y=a.showLearnMoreInContextualMenu,z=a.showReactionInContextualMenu,A=a.showReplyActionInContextualMenu,B=a.threadType,C=(i||(i=c("useReStore")))();a=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(C.tables.threads,["parentThreadKey","threadKey","threadSubtype","threadType","cannotUnsendReason","capabilities","capabilities2","capabilities3","capabilities4","capabilities5"]).getKeyRange(r.threadKey)},[C,r.threadKey],f.id+":96");var D=a==null?void 0:a.parentThreadKey,ia=h._(/*BTDS*/"__JHASH__I1DdCdLzOkz__JHASH__"),E=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),F=E.localDeleteMessageEnabled,G=E.modifyPinnedMessageV2Enabled;E=E.reportMessageToAdminEnabled;var H=c("useMWPCanRemoveMessageGlobally")(r),I=d("LSMessagingThreadTypeUtil").isArmadilloSecure(B),J=c("useIsSecureMessage")(C,r,{fallbackThreadType:B}),K=d("MWCMThreadTypes.react").isJoinedCMThread(B),L=c("useIsReadOnlyFeatureLimitedWithThreadType")(B),M=d("ReQLSuspense").useFirst(function(){if(d("LSMessagingThreadTypeUtil").isCMSubthread(B))if(D==null)return d("ReQL").empty();else return d("ReQL").fromTableAscending(C.tables.participants).getKeyRange(D,r.senderId);else if(K)return d("ReQL").fromTableAscending(C.tables.participants).getKeyRange(r.threadKey,r.senderId);return d("ReQL").empty()},[K,B,D,C,r.senderId,r.threadKey],f.id+":134"),N=d("ReQLSuspense").useFirst(function(){return K?d("ReQL").fromTableAscending(C.tables.contacts,["capabilities","capabilities2"]).getKeyRange(r.senderId):d("ReQL").empty()},[C,K,r.senderId],f.id+":161");L=(!I||c("isFeatureLimitEnabled")())&&L;var O=!L,P=d("MWPActor.react").useActor();N=N!=null&&((N=d("LSContactBitOffset").has(77,N))!=null?N:!1);var Q=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(B),R=d("MWXMAV2IsDataclassLiveLocationXMA").isDataclassLiveLocationXMA(b==null?void 0:b.xmaDataclass);J=I&&!J;var S=c("useMWPIsMessagePinned")(r),T=(b==null?void 0:b.attachmentType)!=null&&((j||(j=d("I64"))).equal(b.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE))||(j||(j=d("I64"))).equal(b.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO))),U=r.ephemeralDurationInSec;U=U!=null?(j||(j=d("I64"))).gt(U,(j||(j=d("I64"))).zero):!1;G=G&&!t&&!r.isUnsent&&(!J||S)&&!p&&!d("LSMessagingThreadTypeUtil").isCMSubthread(B)&&(!Q||Q&&d("MWPActor.react").isAPPlus()&&c("MetaConfig")._("107"))&&!T&&!U&&!R;t=r.isUnsent;J=!1;K||d("LSMessagingThreadTypeUtil").isDiscoverableChannel(B)||d("LSMessagingThreadTypeUtil").isCMSubthread(B)?J=!t&&H:I?J=!L:J=F&&O;S=c("useMWXEntryPointDialog")(c("MWV2OnlyGlobalRemoveMessageDialog.entrypoint"),{});var V=S[0];p=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWV2RemoveMessageDialog.react").__setRef("MWV2ContextualActionsButton.react"));var W=p[0];Q=(M==null?void 0:M.isAdmin)===!0;T=d("MWCMThreadTypes.react").isJoinedCMThread(B)||d("LSMessagingThreadTypeUtil").isCMSubthread(B);U=d("LSMessagingThreadTypeUtil").isJoinedDiscoverablePublicBroadcastChannel(B)&&c("gkx")("7960");R=T&&E&&!Q&&!(j||(j=d("I64"))).equal(P,r.senderId)&&!r.isUnsent&&!N;t=(T||U)&&!(j||(j=d("I64"))).equal(P,r.senderId)&&!r.isUnsent;I=n(d("WebUserFlowLoggingDataContextProvider.react").WebUserFlowLoggingDataContext);var X=I.loggingDataRef,Y=c("useHandleRemoveLocalMessage")(B,r,s);L=d("Int64Hooks").useCallbackInt64(function(){if(c("isDeliveryStatusErrorState")(d("MWMessageDeliveryStatus").getFromSendStatus(r.sendStatusV2))){Y(X.current);return}var a={canRemoveMessageGlobally:H,message:r,removeLogger:s,threadType:B},b={learnMoreOnMessageRemove:q,message:r},e=(j||(j=d("I64"))).equal(r.senderId,P);if(d("MWCMThreadTypes.react").isJoinedCMThread(B)||d("LSMessagingThreadTypeUtil").isDiscoverableChannel(B)||e&&!c("gkx")("24140")&&!r.isUnsent)return V(b);else return W(a,c("emptyFunction"))},[r,H,s,B,q,P,Y,X,V,W]);F=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext();var Z=F.removeMessage;J?Z.current=L:Z.current=c("emptyFunction");var $=aa(function(){Z.current=c("emptyFunction");return},[Z]);ba(function(){return $},[$]);var ja=n(d("MWV2MessageRowIsRowFocusedContext.react").context);if(a==null||!(x||A||z||G||w||u||J||R||t||y||o!=null||c("gkx")("731")))return null;O=function(a){ga(function(){return a});return ja.setFocused(function(){return a})};var ka={eventName:"click_message_contextual_action_button",threadKey:r.threadKey,threadType:B};return m.jsx(c("MWXDeferredPopoverTrigger.react"),{align:"middle",onVisibilityChange:O,popoverProps:{attachment:b,canRemoveMessageGlobally:e&&H,closeActionsMenu:g,containerThreadKey:l,extraActions:o,isOutgoing:da,learnMoreDialogType:ea,learnMoreOnMessageRemove:q,message:r,onRemoveMessageLogger:s,removeMessageDialogTitle:fa,showBumpActionInContextualMenu:ha,showBusinessMessageFeedbackOptionsInContextualMenu:u,showCreateSubthread:v,showFeedbackOptionsInContextualMenu:w,showForwardActionInContextualMenu:x,showLearnMoreInContextualMenu:y,showPinMessageActionInContextualMenu:G,showReactionInContextualMenu:z,showReplyActionInContextualMenu:A,showReportCommunityMessageToAdmin:R,showReportCommunityMessageToFacebook:t,showUnsendInContextualMenu:J,thread:a},popoverResource:ca,popoverType:"menu",position:"above",children:function(a,b){var e=function(){b();return d("MWV2LogMessageClick").log(C,r,48)};return m.jsx(c("MWMessageActionButton.react"),{icon:c("MWXIconDots3Vertical"),label:ia,loggingEvent:ka,onPress:e,ref:a,testid:void 0})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWV2ForwardMessageButton.react",["fbt","I64","LSBitFlag","LSIntEnum","LSMessagingThreadTypeUtil","MWChatForwardAction.react","MWChatMessageId","promiseDone","qex","react","react-compiler-runtime","useMWV2ForwardMessage"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||d("react");function a(a){var b=d("react-compiler-runtime").c(12),e=a.mediaGroupInfo,f=a.message,g=a.threadType,i=d("LSMessagingThreadTypeUtil").isArmadilloSecure(g),m=c("qex")._("205")===!0;i=i?m?"cross_transport":"secure":m?"cross_transport":"open_";b[0]!==f.messageId||b[1]!==f.threadKey||b[2]!==f.timestampMs?(m=d("MWChatMessageId").makeSent((j||(j=d("I64"))).to_string(f.threadKey),f.messageId,j.to_string(f.timestampMs)),b[0]=f.messageId,b[1]=f.threadKey,b[2]=f.timestampMs,b[3]=m):m=b[3];m=m;var n=f.stickerId,o=d("useMWV2ForwardMessage").useMWV2ForwardMessage(f,g,void 0,e);e=!d("LSMessagingThreadTypeUtil").isArmadilloSecure(g);g=d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(1),f.displayedContentTypes)&&!f.textHasLinks||d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(16384),f.displayedContentTypes)||d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(2),f.displayedContentTypes)||d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(4),f.displayedContentTypes)||d("LSBitFlag").has((k||(k=d("LSIntEnum"))).ofNumber(512),f.displayedContentTypes)||n!=null&&(j||(j=d("I64"))).equal(n,(j||(j=d("I64"))).of_string("369239263222822"))||n!=null&&(j||(j=d("I64"))).equal(n,(j||(j=d("I64"))).of_string("369239343222814"))||n!=null&&(j||(j=d("I64"))).equal(n,(j||(j=d("I64"))).of_string("369239383222810"));f=e&&!g||a.dropForwardE2eeToggle===!0;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(n=h._(/*BTDS*/"__JHASH__GvPr2MwluxY__JHASH__"),b[4]=n):n=b[4];b[5]!==o?(e=function(a){return c("promiseDone")(o(a))},b[5]=o,b[6]=e):e=b[6];b[7]!==f||b[8]!==i||b[9]!==m||b[10]!==e?(g=l.jsx(c("MWChatForwardAction.react"),{dropToggle:f,forwardDialogType:i,label:n,messageID:m,onForward:e}),b[7]=f,b[8]=i,b[9]=m,b[10]=e,b[11]=g):g=b[11];return g}g["default"]=a}),226);
__d("useMWChatReactionsActionContainerProps.react",["I64","LSMessagingThreadTypeUtil","MAWPSendOrRemoveReaction.react","MWCMThreadTypes.react","MWChatMessageId","react","useIsReactionsV2Enabled"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useCallback,k=b.useMemo;function a(a,b,c,e,f,g){var h=d("LSMessagingThreadTypeUtil").isArmadilloSecure(c),l=(i||(i=d("I64"))).to_string(a.threadKey),m=i.to_string(a.timestampMs),n=k(function(){return d("MWChatMessageId").makeSent(l,a.messageId,m)},[l,a.messageId,m]),o=d("MAWPSendOrRemoveReaction.react").useSendOrRemoveReaction(a,h,"reaction_tray"),p=d("MWCMThreadTypes.react").isBroadcastThread(c);c=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(c);var q=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(a.threadKey),r=j(function(b,c){e&&e();return o(a.messageId,c?void 0:b,c?"remove_reaction":"reaction")},[e,o,a.messageId]),s=q&&p;return{closeActionsMenu:b,disableCustomReactions:s,hasReactionsV2:q,isBroadcastChannel:c,isBroadcastThread:p,isSecure:h,messageID:n,onVisibilityChange:f,reactionsPopoverResource:g,sendReaction:r}}g["default"]=a}),98);
__d("useMWV2ShouldDisableReactions.react",["LSMessagingThreadTypeUtil","ReQL","ReQLSuspense","isFeatureLimitEnabled","react-compiler-runtime","useIsReactionsV2Enabled","useIsReadOnlyFeatureLimitedWithThreadType","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=d("react-compiler-runtime").c(9),g;e[0]!==a?(g=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),e[0]=a,e[1]=g):g=e[1];g=g;a=c("useIsReadOnlyFeatureLimitedWithThreadType")(a);var i;e[2]!==a||e[3]!==g?(i=(!g||c("isFeatureLimitEnabled")())&&a,e[2]=a,e[3]=g,e[4]=i):i=e[4];a=i;g=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(b);var j=(h||(h=c("useReStore")))();e[5]!==j.tables.reaction_v2_types?(i=function(){return d("ReQL").fromTableAscending(j.tables.reaction_v2_types)},e[5]=j.tables.reaction_v2_types,e[6]=i):i=e[6];e[7]!==j?(b=[j],e[7]=j,e[8]=b):b=e[8];e=d("ReQLSuspense").useFirst(i,b,f.id+":38")!=null;return a||g&&!e}g["default"]=a}),98);
__d("MWV2MessageReactionButton.react",["MWChatReactionsAction.react","react","react-compiler-runtime","useMWChatReactionsActionContainerProps.react","useMWV2ShouldDisableReactions.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(2),e=a.closeActionsMenu,f=a.message,g=a.onReactionsSendLogger,h=a.reactionsPopoverResource,j=a.setReactionsMenuOpen;a=a.threadType;var k=c("useMWV2ShouldDisableReactions.react")(a,f.threadKey);f=c("useMWChatReactionsActionContainerProps.react")(f,e,a,g,j,h);if(k)return null;b[0]!==f?(e=i.jsx(c("MWChatReactionsAction.react"),babelHelpers["extends"]({},f)),b[0]=f,b[1]=e):e=b[1];return e}g["default"]=a}),98);
__d("MWV2MessageListIsRowModalContext.react",["emptyFunction","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));e=h;f=e.createContext;var j=e.useContext;e.useMemo;var k=f({modal:"",setModal:c("emptyFunction")});function a(a){var b=d("react-compiler-runtime").c(6),c=a.children,e=a.modal;a=a.setModal;var f;b[0]!==e||b[1]!==a?(f={modal:e,setModal:a},b[0]=e,b[1]=a,b[2]=f):f=b[2];e=f;a=e;b[3]!==c||b[4]!==a?(f=i.jsx(k.Provider,{value:a,children:c}),b[3]=c,b[4]=a,b[5]=f):f=b[5];return f}function b(){return j(k)}g.MWV2MessageListIsRowModalContext=k;g.MWV2MessageListIsRowModalContextProvider=a;g.useMWV2MessageListIsRowModal=b}),98);
__d("MWXIconReply",["MWXSvgIcon","SVGIcon","cr:12555","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:12555")),c("gkx")("23219"));g["default"]=a}),98);
__d("useMWV2SetReply.react",["MWPReplyContext.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(){var a=i(d("MWPReplyContext.react").MWPReplyContext);a=a.setReply;return a}g["default"]=a}),98);
__d("MWV2ReplyButton.react",["fbt","MAWEditMessageContext.react","MWMessageActionButton.react","MWV2MessageListIsRowModalContext.react","MWV2MessageRowActionsContext.react","MWXIconReply","emptyFunction","react","useMWV2SetReply.react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useContext,m=b.useEffect;function a(a){var b=a.message;a=h._(/*BTDS*/"__JHASH__xFCj85w6vra__JHASH__");var e=c("useMWV2SetReply.react")(),f=l(d("MAWEditMessageContext.react").Context),g=f.editMessageData,i=f.setEditMessageData;f=d("MWV2MessageListIsRowModalContext.react").useMWV2MessageListIsRowModal();var n=f.setModal;f=function(){g!=null&&i(null),e({messageId:b.messageId,offlineThreadingId:b.offlineThreadingId,sendStatusV2:b.sendStatusV2,threadKey:b.threadKey,timestampMs:b.timestampMs},b.threadKey),n("")};var o=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext(),p=o.replyToMessage;p.current=f;var q=k(function(){p.current=c("emptyFunction");return},[p]);m(function(){return q},[q]);return j.jsx(c("MWMessageActionButton.react"),{icon:c("MWXIconReply"),label:a,loggingEvent:"message_reply",onPress:f,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("mwpMessageHasAttachment",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){if(!(h||(h=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(1))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(h||(h=d("I64"))).add((i||(i=d("LSIntEnum"))).ofNumber(1),(i||(i=d("LSIntEnum"))).ofNumber(8192)))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(i||(i=d("LSIntEnum"))).ofNumber(128))&&!(h||(h=d("I64"))).equal(a.displayedContentTypes,(h||(h=d("I64"))).add((i||(i=d("LSIntEnum"))).ofNumber(128),(i||(i=d("LSIntEnum"))).ofNumber(8192))))return!(h||(h=d("I64"))).equal(a.displayedContentTypes,h.add((i||(i=d("LSIntEnum"))).ofNumber(1),i.ofNumber(512)));else return!1}g["default"]=a}),98);
__d("useEnableBusinessMessageFeedbackOptions",["I64","MWPActor.react"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("MWPActor.react").useActor();b=(h||(h=d("I64"))).equal(a.senderId,b);if(a.metadataDataclass==null)return!1;a=JSON.parse(a.metadataDataclass);return a&&a.business_thread_response_feedback&&a.business_thread_response_feedback.is_feedback_button_enabled_for_message===!0?!b:!1}g["default"]=a}),98);
__d("useGenAIFeedbackSubmissionStatus",["I64","LSIntEnum","LSMailboxAIBotFeedbackSubmissionStatus","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){var b=d("react-compiler-runtime").c(6),e=(j||(j=c("useReStore")))(),g;b[0]!==a||b[1]!==e.tables.ai_bot_feedback_submission_status?(g=function(){var b;return d("ReQL").fromTableDescending(e.tables.ai_bot_feedback_submission_status).getKeyRange((b=a)!=null?b:"").filter(l).map(k)},b[0]=a,b[1]=e.tables.ai_bot_feedback_submission_status,b[2]=g):g=b[2];var h;b[3]!==a||b[4]!==e?(h=[e,a],b[3]=a,b[4]=e,b[5]=h):h=b[5];b=d("ReQLSuspense").useFirst(g,h,f.id+":25");return b}function k(a){return a.feedbackSubmissionStatus}function l(a){return(h||(h=d("I64"))).equal(a.feedbackSubmissionStatus,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxAIBotFeedbackSubmissionStatus").SUBMITTED))}g["default"]=a}),98);
__d("useIsGenAiFeedbackEnabled",["I64","LSContactTypeExact","LSIntEnum","MWPContactContext.react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){var e=d("react-compiler-runtime").c(2),f=d("MWPContactContext.react").useMWPContactStableContext();f=f.contact;if(a==null)return!1;if(!b)return!1;e[0]!==f?(a=f!=null&&(h||(h=d("I64"))).equal(f.contactTypeExact,(i||(i=d("LSIntEnum"))).ofNumber(c("LSContactTypeExact").GENERATIVE_AI_BOT)),e[0]=f,e[1]=a):a=e[1];return a}g["default"]=a}),98);
__d("useIsLastNonAdminMessage",["ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=10;function a(a,b){var e=d("react-compiler-runtime").c(6),g=(h||(h=c("useReStore")))(),k;e[0]!==g.tables.messages||e[1]!==a?(k=function(){return d("ReQL").fromTableDescending(g.tables.messages.index("messageDisplayOrder"),["messageId","isAdminMessage"]).getKeyRange(a).take(i).filter(j)},e[0]=g.tables.messages,e[1]=a,e[2]=k):k=e[2];var l;e[3]!==g||e[4]!==a?(l=[g,a],e[3]=g,e[4]=a,e[5]=l):l=e[5];e=d("ReQLSuspense").useFirst(k,l,f.id+":29");return(e==null?void 0:e.messageId)===b}function j(a){return a.isAdminMessage===!1}g["default"]=a}),98);
__d("useIsMessageIDInNewFormat",["justknobx","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;(h||d("react")).useMemo;var i="mid.$g",j="mid.$m",k="mid.$c",l="mid.$o";function a(a,b,e){var f=d("react-compiler-runtime").c(2),g;f[0]!==a?(g=a.startsWith(j)||a.startsWith(i)||a.startsWith(l)||a.startsWith(k),f[0]=a,f[1]=g):g=f[1];a=g;f=a;if(!c("justknobx")._("2481"))return!0;return b&&e?!0:f}g["default"]=a}),98);
__d("useMessageAttachment",["ReQL","ReQLSuspense","mwpMessageHasAttachment","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=d("react-compiler-runtime").c(8),e=(h||(h=c("useReStore")))(),g;b[0]!==a?(g=c("mwpMessageHasAttachment")(a),b[0]=a,b[1]=g):g=b[1];var i=g,j;b[2]!==e||b[3]!==i||b[4]!==a.messageId||b[5]!==a.threadKey?(g=function(){return i?d("ReQL").fromTableAscending(e.tables.attachments).getKeyRange(a.threadKey,a.messageId):d("ReQL").empty()},j=[e,a.threadKey,a.messageId,i],b[2]=e,b[3]=i,b[4]=a.messageId,b[5]=a.threadKey,b[6]=g,b[7]=j):(g=b[6],j=b[7]);return d("ReQLSuspense").useFirst(g,j,f.id+":23")}g["default"]=a}),98);
__d("useXMAV2Provider",["react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=d("react-compiler-runtime").c(4);if(a.length===0)return null;a=(a=a[0])==null?void 0:a.xmaDataclass;if(a==null)return null;var c,e,f;if(b[0]!==a){e=Symbol["for"]("react.early_return_sentinel");bb0:{f=JSON.parse(a);if(f==null){e=null;break bb0}var g=f.content;if(g==null){e=null;break bb0}c=!0;g=(g==null?void 0:g.__typename)==="XMSGXmaSingleContent"?[g]:g.list;g==null?void 0:g.forEach(function(a){a=a.custom_template_data;if(a==null){c=!1;return}})}b[0]=a;b[1]=c;b[2]=e;b[3]=f}else c=b[1],e=b[2],f=b[3];return e!==Symbol["for"]("react.early_return_sentinel")?e:c?f:null}g["default"]=a}),98);
__d("MWMessageRowActions.react",["$InternalEnum","AdsAIMessengerUtils","CometErrorBoundary.react","CometPlaceholder.react","I64","JSResourceForInteraction","LSBitFlag","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","MNLSXMALayoutType","MSGDataclassTypes.flow","MWBlockingProtectionContext.react","MWCMCreateSubthreadRowActionButton.react","MWCMIsSubthreadContext.react","MWCMThreadTypes.react","MWGroupBlockingProtectionUtils","MWLSThreadDisplayContext","MWMessageDeliveryStatus","MWPBaseMessageListRowActions.react","MWPThreadCapabilitiesContext","MWV2ContextualActionsButton.react","MWV2ForwardMessageButton.react","MWV2MessageReactionButton.react","MWV2MessageRowActionsContext.react","MWV2OneToOneThreadBlockedContext.react","MWV2ReplyButton.react","MWXMAUtils","MWXTooltipGroup.react","MessagingAttachmentType","MetaConfig","cr:1669","cr:1670","cr:895","emptyFunction","gkx","isFeatureLimitEnabled","isMWBumpMessage","lazyLoadComponent","mwCMIsAnyCMThread","mwpMessageHasAttachment","react","react-compiler-runtime","shouldHideMessagingActions","useEmptyFunction","useEnableBusinessMessageFeedbackOptions","useGenAIFeedbackSubmissionStatus","useGetMediaGroupInformation","useIsGenAiFeedbackEnabled","useIsLastNonAdminMessage","useIsMessageIDInNewFormat","useIsReadOnlyFeatureLimitedWithThreadType","useIsSecureMessage","useMWGetOtherUserContact","useMWHasForwardAction","useMWIsContactRestricted","useMWV2MessageForwardAction","useMessageAttachment","useReStore","useXMAV2Provider"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=k||(k=d("react"));e=k;var m=e.useCallback,n=e.useEffect,o=e.useState,p=c("lazyLoadComponent")(c("JSResourceForInteraction")("AdsOsmipChatMessageFeedbackButton.react").__setRef("MWMessageRowActions.react")),q=(e=b("cr:895"))!=null?e:c("useEmptyFunction"),aa=c("gkx")("26372"),r={shrinkSpaceForFeedbackActions:{maxWidth:"x1x67gh",$$css:!0}},s=b("$InternalEnum").Mirrored(["AI_STICKERS"]);function t(a){var e=a.canRemoveMessageGlobally,f=a.closeActionsMenu,g=a.containerThreadKey,k=a.dropForwardE2eeToggle,o=a.extraActions,q=a.learnMoreOnMessageRemove,r=a.mediaGroupInfo,t=a.message,u=a.onReactionsSendLogger,v=a.onRemoveMessageLogger,w=a.outgoing,x=a.reactionsPopoverResource,y=a.removeMessageDialogTitle,z=a.setMoreMenuOpen,A=a.setReactionsMenuOpen,B=a.shouldHideForwardOption,C=a.shouldHideHoverMenuReact,D=a.shouldShowAdsAIFeedbackButtons;D=D===void 0?!1:D;a=a.threadType;var E=d("MWCMIsSubthreadContext.react").useIsSubthreadContext();E=E.isSubthread;var F=d("MWV2OneToOneThreadBlockedContext.react").useIsBlocked(),G=(h||(h=c("useReStore")))();E=E&&t.subthreadKey!=null;var H=c("useMWGetOtherUserContact")(t.threadKey,a,d("LSContactBitOffset").contactCapabilityFields);H=c("useMWIsContactRestricted")(H);var I=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),J=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a);G=c("useIsSecureMessage")(G,t,{fallbackThreadType:a});var K=!(i||(i=d("I64"))).equal(t.displayedContentTypes,(j||(j=d("LSIntEnum"))).ofNumber(1)),L=c("shouldHideMessagingActions")(t.displayedContentTypes,d("MWMessageDeliveryStatus").getFromSendStatus(t.sendStatusV2)),M=c("mwCMIsAnyCMThread")(a)&&(i||(i=d("I64"))).equal(t.sendStatusV2,(j||(j=d("LSIntEnum"))).ofNumber(4)),N=c("useMessageAttachment")(t),O=N!=null?[N]:[];O=c("useXMAV2Provider")(O);O=(O==null?void 0:O.layout_type)===d("MSGDataclassTypes.flow").XmsgXmaLayoutType.Hscroll;var P=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();P=P.blurMediaEnabled;P=c("gkx")("24098")&&P;var Q=N!=null?(i||(i=d("I64"))).equal(N.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)):!1,R=N!=null?(i||(i=d("I64"))).equal(N.attachmentType,(j||(j=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)):!1;P=P&&(Q||R);R=i.equal((Q=t.displayedContentTypes)!=null?Q:(i||(i=d("I64"))).zero,j.ofNumber(128));Q=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();var S=Q.isPaused,T=Q.reactEnabled,ba=Q.reactionsV2WriteEnabled,U=Q.replyEnabled;Q=Q.subThreadCreationEnabled;var V=(N==null?void 0:N.xmaLayoutType)!=null&&(i||(i=d("I64"))).equal(N.xmaLayoutType,(j||(j=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").THREAD_SHORTCUT)),W=(N==null?void 0:N.mustacheText)!=null&&t.stickerId!=null;W=W?s.AI_STICKERS:null;V=!V&&!t.isUnsent||!K||R;K=c("useIsGenAiFeedbackEnabled")(t.botResponseId,aa);R=c("useGenAIFeedbackSubmissionStatus")(t.botResponseId);var X=K&&R==null,Y=X&&b("cr:1669")!=null;B=c("useMWHasForwardAction")(a,t,N,B,r,Y);Y=B.hasForwardAction;B=B.shouldShowForwardAction;var Z=c("useIsReadOnlyFeatureLimitedWithThreadType")(a)&&(!J||c("isFeatureLimitEnabled")());O=!F&&!H&&!t.isUnsent&&!M&&!O&&(T||ba);T=K&&R!=null;ba=c("useEnableBusinessMessageFeedbackOptions")(t);K=c("isMWBumpMessage")(t.replyType)&&t.replySourceId==null;R=c("useIsMessageIDInNewFormat")(t.messageId,J,G);var $=J&&!G;$=!$;M=!F&&!L&&!H&&!M&&U&&!t.isUnsent&&!E&&!Z&&!D&&!K&&R&&$;U=M&&!B&&!X;Z=!L&&O&&!C&&!D;R=Z&&!X;$=Z&&X;O=d("MWCMThreadTypes.react").isJoinedCMThread(a)&&!S&&Q&&!E&&V;C=t.ephemeralDurationInSec;Z=C!=null?(i||(i=d("I64"))).gt(C,(i||(i=d("I64"))).zero):!1;S=G&&!L&&!F&&!H&&!Z&&!K&&!t.isUnsent;Q=O&&I==="Inbox";V=c("useMWV2MessageForwardAction")(J,t,a);C=d("MWV2MessageRowActionsContext.react").useMessageRowActionsContext();var ca=C.forwardMessage;Y&&(ca.current=V);var da=m(function(){ca.current=c("emptyFunction");return},[ca]);n(function(){return da},[da]);G=t.messageId;F=t.offlineThreadingId;H=t.sendStatusV2;Z=t.threadKey;K=t.timestampMs;return l.jsxs(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsList,{outgoing:w,children:[B&&!P?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{showWith:"partial",children:l.jsx(c("MWV2ForwardMessageButton.react"),{dropForwardE2eeToggle:k,mediaGroupInfo:r,message:t,threadType:a})}):null,R?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("MWV2MessageReactionButton.react"),{closeActionsMenu:f,message:t,onReactionsSendLogger:u,reactionsPopoverResource:x,setReactionsMenuOpen:A,threadType:a})}):null,U&&!P?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("MWV2ReplyButton.react"),{message:{messageId:G,offlineThreadingId:F,sendStatusV2:H,threadKey:Z,timestampMs:K}})}):null,Q&&l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("MWCMCreateSubthreadRowActionButton.react"),{message:t})}),X&&b("cr:1670")?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{showWith:"partial",children:l.jsx(b("cr:1670"),{message:t})}):null,X&&b("cr:1669")?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{showWith:"partial",children:l.jsx(b("cr:1669"),{message:t})}):null,D&&p!=null?l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{showWith:"partial",children:l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(p,{message:t})})}):null,l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsListItem,{children:l.jsx(c("MWV2ContextualActionsButton.react"),{attachment:N,canRemoveMessageGlobally:e,closeActionsMenu:f,containerThreadKey:g,extraActions:o,isOutgoing:w,isSubthreadParentMessage:E,learnMoreDialogType:W,learnMoreOnMessageRemove:q,message:t,onRemoveMessageLogger:v,removeMessageDialogTitle:y,setMoreMenuOpen:z,shouldHideActions:L,showBumpActionInContextualMenu:S,showBusinessMessageFeedbackOptionsInContextualMenu:ba,showCreateSubthread:O&&!Q,showFeedbackOptionsInContextualMenu:T,showForwardActionInContextualMenu:!B&&Y,showLearnMoreInContextualMenu:W!==null&&c("gkx")("485"),showReactionInContextualMenu:$,showReplyActionInContextualMenu:!U&&M,threadType:a})})]})}t.displayName=t.name+" [from "+f.id+"]";function a(a){var b,e=d("react-compiler-runtime").c(30),f=a.ariaHidden,g=a.canRemoveMessageGlobally,h=a.containerThreadKey,k=a.dropForwardE2eeToggle,m=a.extraActions,n=a.focused,p=a.hidden,s=a.hovered,v=a.isSecureMessage,w=a.learnMoreOnMessageRemove,x=a.message,y=a.onMouseEnter,z=a.onMouseLeave,A=a.onReactionsSendLogger,B=a.onRemoveMessageLogger,C=a.outgoing,D=a.reactionsPopoverResource,E=a.removeMessageDialogTitle,F=a.shouldHideForwardOption,G=a.shouldHideHoverMenuReact,H=a.showPersistentGenAiFeedbackActionButtons;a=a.threadType;p=p===void 0?!1:p;F=F===void 0?!1:F;G=G===void 0?!1:G;H=H===void 0?!1:H;var I=o(!1),J=I[0];I=I[1];var K=o(!1),L=K[0];K=K[1];var M;e[0]!==x.displayedContentTypes?(M=d("LSBitFlag").has((j||(j=d("LSIntEnum"))).ofNumber(2),x.displayedContentTypes),e[0]=x.displayedContentTypes,e[1]=M):M=e[1];M=M;b=(b=q(x.threadKey,x.botResponseId,aa))!=null?b:!1;var N;e[2]!==x?(N=d("AdsAIMessengerUtils").isMessageFromAdsAI(x),e[2]=x,e[3]=N):N=e[3];N=N;var O=c("useIsLastNonAdminMessage")(x.threadKey,x.messageId);O=O&&N;v=c("useGetMediaGroupInformation")(x,v===!0);var P=v!=null&&(v==null?void 0:v.hasAllMessagesSent)===!1,Q=c("useMessageAttachment")(x);s=s||n||L||J;n=c("MWBlockingProtectionContext.react").useHook();L=n.findMessageId;J=d("MWGroupBlockingProtectionUtils").useMWIsMessageSentByBlockedContact(x.senderId,x.threadKey);if(J&&!L(x.messageId))return null;n=(i||(i=d("I64"))).to_string(x.threadKey)===c("MetaConfig")._("83")&&!C&&c("mwpMessageHasAttachment")(x);if(n)return null;J=(Q==null?void 0:Q.defaultCtaType)!=null&&d("MWXMAUtils").isRTCXMA(Q.defaultCtaType);L=!p&&!P&&!J&&(s||b||M||O);Q=(n=f)!=null?n:!1;p=s===!0?"full":"partial";P=H?r.shrinkSpaceForFeedbackActions:void 0;if(e[4]!==g||e[5]!==h||e[6]!==k||e[7]!==m||e[8]!==w||e[9]!==v||e[10]!==x||e[11]!==A||e[12]!==B||e[13]!==C||e[14]!==D||e[15]!==E||e[16]!==F||e[17]!==G||e[18]!==L||e[19]!==N||e[20]!==a){M=L?l.jsx(t,{canRemoveMessageGlobally:(J=g)!=null?J:!0,closeActionsMenu:c("emptyFunction"),containerThreadKey:h,dropForwardE2eeToggle:k,extraActions:(b=m)!=null?b:null,learnMoreOnMessageRemove:w,mediaGroupInfo:v,message:x,onReactionsSendLogger:A,onRemoveMessageLogger:B,outgoing:C,reactionsPopoverResource:D,removeMessageDialogTitle:E,setMoreMenuOpen:K,setReactionsMenuOpen:I,shouldHideForwardOption:F,shouldHideHoverMenuReact:G,shouldShowAdsAIFeedbackButtons:N,threadType:a}):null;e[4]=g;e[5]=h;e[6]=k;e[7]=m;e[8]=w;e[9]=v;e[10]=x;e[11]=A;e[12]=B;e[13]=C;e[14]=D;e[15]=E;e[16]=F;e[17]=G;e[18]=L;e[19]=N;e[20]=a;e[21]=M}else M=e[21];e[22]!==y||e[23]!==z||e[24]!==C||e[25]!==M||e[26]!==Q||e[27]!==p||e[28]!==P?(O=l.jsx(c("CometErrorBoundary.react"),{fallback:u,children:l.jsx(c("MWXTooltipGroup.react"),{children:l.jsx(d("MWPBaseMessageListRowActions.react").MWPBaseMessageListRowActionsContainer,{ariaHidden:Q,onMouseEnter:y,onMouseLeave:z,outgoing:C,visibility:p,xstyle:P,children:M})})}),e[22]=y,e[23]=z,e[24]=C,e[25]=M,e[26]=Q,e[27]=p,e[28]=P,e[29]=O):O=e[29];return O}function u(){return null}g.LearnMoreDialogType=s;g.MWMessageRowActions=a}),98);
__d("MWXMAAttachmentSharedStackConstants",[],(function(a,b,c,d,e,f){"use strict";a=213;b=160;f.STACK_ITEM_HEIGHT=a;f.STACK_ITEM_WIDTH=b}),66);
__d("RollCallContributionType",[],(function(a,b,c,d,e,f){a=Object.freeze({MEDIA:0,TEXT:1,LINK:2});f["default"]=a}),66);
__d("RollCallPromptType",[],(function(a,b,c,d,e,f){a=Object.freeze({MEDIA:0,TEXT:1,LINK:2});f["default"]=a}),66);
__d("MWPromptCreationUtils",["I64","LSAuthorityLevel","LSFactory","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure","LSMessagingThreadAttributionType","LSOptimisticContributeToTextPromptStoredProcedure","LSOptimisticCreateRollCallStoredProcedure","LSShape","LSVec","MWXMAAttachmentSharedStackConstants","MessagingAttachmentType","OfflineThreadingId","Promise","ReQL","RollCallContributionType","RollCallPromptType","XComposerPhotoUploader"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a,e,g,k){return new(j||(j=b("Promise")))(function(b,j){a.runInTransaction(function(a){return c("LSOptimisticCreateRollCallStoredProcedure")(c("LSFactory")(a),{prompt:g,promptType:(h||(h=d("LSIntEnum"))).ofNumber(k),threadKey:e})},"readwrite",void 0,void 0,f.id+":49").then(function(e){var f=e[0],g=d("ReQL").fromTableAscending(a.tables.roll_calls).subscribe(function(a,e){if(e.operation==="add"||e.operation==="put"){a=e.value.offlineThreadingId;var h=(i||(i=d("I64"))).to_int32(e.value.authorityLevel)>=c("LSAuthorityLevel").AUTHORITATIVE;h&&a!=null&&(i||(i=d("I64"))).equal(a,f)&&(g(),b(e.value.rollCallId))}})})["catch"](function(a){j(a)})})}function k(a,b,e,g,h){return a.runInTransaction(function(a){return c("LSOptimisticContributeToTextPromptStoredProcedure")(c("LSFactory")(a),{productAttribution:String(c("LSMessagingThreadAttributionType").ROLLCALL),promptId:(i||(i=d("I64"))).to_string(g),senderId:b,text:(a=h)!=null?a:"",threadKey:e})},"readwrite",void 0,void 0,f.id+":91")}function l(a,b,e,g,j,k,l,m){var n,o=d("OfflineThreadingId").createOfflineThreadingID(),p=(n=m==null?void 0:m.startsWith("video/"))!=null?n:!1;return a.runInTransaction(function(a){return c("LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure")(c("LSFactory")(a),{extraSendMessageParams:d("LSShape").ofRecord({attachments:c("LSVec").ofArray([d("LSShape").ofRecord({attachment_fbid:o,attachment_index:(i||(i=d("I64"))).zero,attachment_type:(h||(h=d("LSIntEnum"))).ofNumber(p?c("MessagingAttachmentType").VIDEO:c("MessagingAttachmentType").IMAGE),has_media:!0,has_xma:!0,offline_attachment_id:o,playable_url:p?l:void 0,preview_height:i.of_float(d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_HEIGHT),preview_url:p?void 0:l,preview_url_mime_type:p?void 0:m,preview_width:i.of_float(d("MWXMAAttachmentSharedStackConstants").STACK_ITEM_WIDTH)})]),contribution_type:h.ofNumber(c("RollCallContributionType").MEDIA),product_fbid:i.to_string(j),product_type:"roll_call",source:h.ofNumber(c("LSMessagingThreadAttributionType").ROLLCALL)}),senderId:b,text:k,threadKey:e,threadType:g})},"readwrite",void 0,void 0,f.id+":114").then(function(a){a=a[0];return a})}function e(a,d,e,f,g,h,i,m,n){switch(i){case c("RollCallPromptType").MEDIA:return l(a,d,e,f,g,h,m,n);case c("RollCallPromptType").TEXT:return k(a,d,e,g,h);default:return(j||(j=b("Promise"))).reject("Unsupported type")}}function m(a,b,e,f){var g=d("OfflineThreadingId").createOfflineThreadingID();a=a;a.uploadID=g;var h=new(c("XComposerPhotoUploader"))({onUploadFailure:function(a,b){},onUploadSuccess:function(a,b){},uploadEndpoint:"/messenger/upload_roll_call/"});h.getAsyncFileUploadRequest([a],[g],{data:{message_otid:e,roll_call_id:(i||(i=d("I64"))).to_string(b),thread_id:f}}).send()}g.createAuthoritiativeRollCall=a;g.createOptimisticRollCallMessage=e;g.startRollCallMediaUpload=m}),98);
__d("handleMWV2NoMessageOrTurn",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(){c("FBLogger")("gen_ai_feedback_actions").mustfix("Either message or turn must be provided")}g["default"]=a}),98);
__d("MetaBrandExclamationTriangleFilled24.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.203 2.088a2.028 2.028 0 0 1 3.594 0l8.956 16.86C23.486 20.326 22.5 22 20.956 22H3.044c-1.545 0-2.53-1.673-1.797-3.053l8.956-16.859zm3.048 14.91c0 .6-.417 1-1.25 1-.834 0-1.25-.4-1.25-1s.416-1 1.25-1c.833 0 1.25.4 1.25 1zm-.375-8.125a.875.875 0 0 0-1.75 0v4.975a.875.875 0 1 0 1.75 0V8.873z"})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("getToastDurationFromTextLength",[],(function(a,b,c,d,e,f){"use strict";function a(a){return Math.max(1e4,a.length*150)}f["default"]=a}),66);
__d("basePushToast",["BaseToasterStateManager","MetaConfig","getToastDurationFromTextLength"],(function(a,b,c,d,e,f,g){"use strict";var h=20*60*60*1e3,i=c("BaseToasterStateManager").getInstance();function a(a,b,d){d=(d=d)!=null?d:i;a=(a=a.message)==null?void 0:a.toString();a=c("getToastDurationFromTextLength")((a=a)!=null?a:"");d=d.push(b,a);return d}function b(a,b){b=(b=b)!=null?b:i;b=b.push(a,h);return b}function d(a){return a.action!=null||a.withoutCloseButton!==!0}function e(){return c("MetaConfig")._("191")}g.pushAlertToast=a;g.pushPersistentToast=b;g.isInteractiveToast=d;g.passesNewToastAPIGK=e}),98);
__d("cdsPushToast",["BaseToasterStateManager","CDSIcon.react","MetaBrandExclamationTriangleFilled24.svg.react","basePushToast","deferredLoadComponent","getToastDurationFromTextLength","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("BaseToasterStateManager").getInstance(),k=c("deferredLoadComponent")(c("requireDeferred")("CDSToast.react").__setRef("cdsPushToast"));function l(a,b){var e=(b=b)!=null?b:j;if(d("basePushToast").passesNewToastAPIGK())if(d("basePushToast").isInteractiveToast(a)){var f=d("basePushToast").pushPersistentToast(i.jsx(k,babelHelpers["extends"]({},a,{loadImmediately:!0,onDismiss:function(){return e.expire(f)}})),e);return f}else{a.action;b=babelHelpers.objectWithoutPropertiesLoose(a,["action"]);b=babelHelpers["extends"]({withoutCloseButton:!0},b);var g=d("basePushToast").pushAlertToast(babelHelpers["extends"]({},b),i.jsx(k,babelHelpers["extends"]({},b,{loadImmediately:!0,onDismiss:function(){return e.expire(g)}})),e);return g}else{b=c("getToastDurationFromTextLength")(a.message.toString());var h=e.push(i.jsx(k,babelHelpers["extends"]({},a,{loadImmediately:!0,onDismiss:function(){return e.expire(h)}})),b);return h}}function a(a){return l({message:a})}function b(a,b){return l(babelHelpers["extends"]({},a,{addOnStart:i.jsx(c("CDSIcon.react"),{icon:c("MetaBrandExclamationTriangleFilled24.svg.react"),size:24})}),b)}function e(a,b){var c=(b=b)!=null?b:j,d=c.push(i.jsx(k,babelHelpers["extends"]({},a,{loadImmediately:!0,onDismiss:function(){return c.expire(d)}})),Infinity);return d}g.pushToast=l;g.pushSimpleToast=a;g.pushErrorToast=b;g.pushPersistentToast=e}),98);
__d("useGenAiFeedbackSubmittedToast",["fbt","cdsPushToast","handleMWV2NoMessageOrTurn","react","react-compiler-runtime","useMWXPushToast"],(function(a,b,c,d,e,f,g,h){"use strict";var i;(i||d("react")).useCallback;function a(a,b){var e=d("react-compiler-runtime").c(2),f=c("useMWXPushToast")(),g=j,i;a?i=f:b?i=g:c("handleMWV2NoMessageOrTurn")();e[0]!==i?(a=function(){i&&i({title:h._(/*BTDS*/"__JHASH__4KuzIdTnRmp__JHASH__")})},e[0]=i,e[1]=a):a=e[1];i;return a}function j(a){a=a.title;d("cdsPushToast").pushToast({message:a})}g["default"]=a}),226);
__d("useMWV2SubmitFeedbackAction",["LSFactory","LSIntEnum","LSSubmitGenAIBotFeedbackStoredProcedure","promiseDone","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;(j||d("react")).useCallback;function a(a,b){var e=d("react-compiler-runtime").c(4),g=(h||(h=c("useReStore")))(),j;e[0]!==b||e[1]!==a||e[2]!==g?(j=function(e){c("promiseDone")(g.runInTransaction(function(b){return c("LSSubmitGenAIBotFeedbackStoredProcedure")(c("LSFactory")(b),{botFeedbackKind:(i||(i=d("LSIntEnum"))).ofNumber(e),botResponseId:a||"",feedbackKindType:i.ofNumber(e)})},"readwrite",void 0,void 0,f.id+":30"),b)},e[0]=b,e[1]=a,e[2]=g,e[3]=j):j=e[3];return j}g["default"]=a}),98);
__d("XFBBotFeedbackKind.facebook",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["BOT_FEEDBACK_NEGATIVE_ACCURATE","BOT_FEEDBACK_NEGATIVE_CLARITY","BOT_FEEDBACK_NEGATIVE_DOESNT_LOOK_LIKE_THE_PERSON","BOT_FEEDBACK_NEGATIVE_GENERIC","BOT_FEEDBACK_NEGATIVE_HALLUCINATION_INTERNAL_ONLY","BOT_FEEDBACK_NEGATIVE_HELPFUL","BOT_FEEDBACK_NEGATIVE_INTERESTING","BOT_FEEDBACK_NEGATIVE_NOT_RELEVANT_TO_TEXT","BOT_FEEDBACK_NEGATIVE_NOT_VISUALLY_APPEALING","BOT_FEEDBACK_NEGATIVE_OTHER","BOT_FEEDBACK_NEGATIVE_PERSONALIZED","BOT_FEEDBACK_NEGATIVE_REFUSED","BOT_FEEDBACK_NEGATIVE_SAFE","BOT_FEEDBACK_POSITIVE"]);c=a;f["default"]=c}),66);
__d("useUGCAgentsSubmitFeedbackMutation_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6987348644727826"}),null);
__d("useUGCAgentsSubmitFeedbackMutation.graphql",["useUGCAgentsSubmitFeedbackMutation_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"input"}],c=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],kind:"ScalarField",name:"xfb_gen_ai_persona_submit_feedback",storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"useUGCAgentsSubmitFeedbackMutation",selections:c,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"useUGCAgentsSubmitFeedbackMutation",selections:c},params:{id:b("useUGCAgentsSubmitFeedbackMutation_facebookRelayOperation"),metadata:{},name:"useUGCAgentsSubmitFeedbackMutation",operationKind:"mutation",text:null}}}();e.exports=a}),null);
__d("useUGCAgentsSubmitFeedbackMutation",["fbt","BotFeedbackKind","FBLogger","RelayHooks","XFBBotFeedbackKind.facebook","cdsPushToast","objectEntries","react","react-compiler-runtime","useUGCAgentsSubmitFeedbackMutation.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;(j||d("react")).useCallback;var k=i!==void 0?i:i=b("useUGCAgentsSubmitFeedbackMutation.graphql"),l=function(a){var b=c("objectEntries")(c("BotFeedbackKind")).find(function(b){b[0];b=b[1];return b===a});if(b==null){c("FBLogger")("ugc_personas").mustfix("ugc_personas_could_not_convert_bot_feedback_kind_type");return}b=c("XFBBotFeedbackKind.facebook").cast(b[0]);if(b==null){c("FBLogger")("ugc_personas").mustfix("ugc_personas_could_not_cast_bot_feedback_kind_type");return}return b};function a(a,b){var e=d("react-compiler-runtime").c(4),f=d("RelayHooks").useMutation(k),g=f[0];e[0]!==b||e[1]!==g||e[2]!==a?(f=function(e){a==null?void 0:a.setIsFeedbackSubmitted(!0);e=l(e);if(!e)return;g({onCompleted:function(a){b()},onError:function(b){c("FBLogger")("ugc_personas").event("ugc_personas_submit_feedback_error").catching(b),d("cdsPushToast").pushToast({message:h._(/*BTDS*/"__JHASH__2M6kSClZEXW__JHASH__")}),a==null?void 0:a.setIsFeedbackSubmitted(!1)},variables:{input:{bot_feedback_kind:e,response_id:(e=a==null?void 0:a.responseId)!=null?e:"",surface:"AI_STUDIO_WEB"}}})},e[0]=b,e[1]=g,e[2]=a,e[3]=f):f=e[3];return f}g["default"]=a}),226);
__d("useGenAiNegativeFeedback",["fbt","JSResourceForInteraction","handleMWV2NoMessageOrTurn","react-compiler-runtime","useGenAiFeedbackSubmittedToast","useMWV2SubmitFeedbackAction","useMWXLazyDialog","useUGCAgentsSubmitFeedbackMutation"],(function(a,b,c,d,e,f,g,h){"use strict";var i=c("JSResourceForInteraction")("MWV2SubmitNegativeFeedbackDialog.react").__setRef("useGenAiNegativeFeedback");function a(a,b){var e=d("react-compiler-runtime").c(8),f=c("useGenAiFeedbackSubmittedToast")(a,b),g="";if(a){var j;g=(j=a.botResponseId)!=null?j:""}else b?g=b.responseId:c("handleMWV2NoMessageOrTurn")();j=c("useMWV2SubmitFeedbackAction")(g,f);g=c("useUGCAgentsSubmitFeedbackMutation")(b,f);var k;a?k=j:b?k=g:c("handleMWV2NoMessageOrTurn")();f=c("useMWXLazyDialog")(i);var l=f[0];e[0]===Symbol["for"]("react.memo_cache_sentinel")?(j=h._(/*BTDS*/"__JHASH__HrskqaLxsoO__JHASH__"),e[0]=j):j=e[0];g=j;e[1]!==a||e[2]!==k||e[3]!==l||e[4]!==b?(f=function(){return l({message:a,onSubmit:k,turn:b})},e[1]=a,e[2]=k,e[3]=l,e[4]=b,e[5]=f):f=e[5];j=f;e[6]!==j?(f=[j,g],e[6]=j,e[7]=f):f=e[7];return f}g["default"]=a}),226);
__d("MWV2NegativeFeedbackMenuItem.react",["MWXMenuItem.react","react","react-compiler-runtime","useGenAiNegativeFeedback"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3);a=a.message;a=c("useGenAiNegativeFeedback")(a);var e=a[0];a=a[1];var f;b[0]!==e||b[1]!==a?(f=i.jsx(c("MWXMenuItem.react"),{"aria-label":a,onClick:e,primaryText:a,testid:void 0}),b[0]=e,b[1]=a,b[2]=f):f=b[2];return f}g["default"]=a}),98);
__d("useGenAiPositiveFeedback",["fbt","BotFeedbackKind","MWMessageListLoggingContext","MessengerWebUXLogger","handleMWV2NoMessageOrTurn","react","useGenAiFeedbackSubmittedToast","useMWV2SubmitFeedbackAction","useUGCAgentsSubmitFeedbackMutation"],(function(a,b,c,d,e,f,g,h){"use strict";var i;b=i||d("react");var j=b.useCallback,k=b.useMemo;function a(a,b){var e="";if(a){var f;e=(f=a.botResponseId)!=null?f:""}else b?e=b.responseId:c("handleMWV2NoMessageOrTurn")();f=c("useGenAiFeedbackSubmittedToast")(a,b);var g=c("useMWV2SubmitFeedbackAction")(e,f);f=c("useUGCAgentsSubmitFeedbackMutation")(b,f);var i;a?i=g:b?i=f:c("handleMWV2NoMessageOrTurn")();var l=d("MWMessageListLoggingContext").useFlowInstanceId(),m=k(function(){return{extraData:{botResponseId:e},flowInstanceId:l.current}},[e,l]),n=c("MessengerWebUXLogger").useInteractionLogger();a=j(function(){i(c("BotFeedbackKind").BOT_FEEDBACK_POSITIVE),n==null?void 0:n(babelHelpers["extends"]({eventName:"submit_positive_feedback"},m))},[i,n,m]);g=h._(/*BTDS*/"__JHASH__UiU1vrQt_qf__JHASH__");return[a,g]}g["default"]=a}),226);
__d("MWV2PositiveFeedbackMenuItem.react",["MWXMenuItem.react","react","react-compiler-runtime","useGenAiPositiveFeedback"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=d("react-compiler-runtime").c(3);a=a.message;a=c("useGenAiPositiveFeedback")(a);var e=a[0];a=a[1];var f;b[0]!==e||b[1]!==a?(f=i.jsx(c("MWXMenuItem.react"),{"aria-label":a,onClick:e,primaryText:a,testid:void 0}),b[0]=e,b[1]=a,b[2]=f):f=b[2];return f}g["default"]=a}),98);
__d("MWXScrollableArea.react",["MDSScrollableArea.react"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("MDSScrollableArea.react")}),98);
__d("getMWOtherUserFBID",["I64","LSMessagingThreadTypeUtil","ReQL","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,d){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){var f=d("LSMessagingThreadTypeUtil").isOneToOne(e);if(!f)return null;f=d("LSMessagingThreadTypeUtil").isArmadilloSecure(e);if(!f)return c;e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.participants,["contactId"]).getKeyRange(c).filter(function(a){a=a.contactId;return!(h||(h=d("I64"))).equal(a,b)}).take(1)));return e==null?void 0:e.contactId});return i.apply(this,arguments)}g.getMWOtherUserFBID=a}),98);
__d("useLogMAWEditMessage",["I64","LSMessagingThreadTypeUtil","LsFalcoEventEntryPoint","LsMessageActionFalcoEvent","MessengerWebUXLogger","react","react-compiler-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(h||d("react")).useCallback;function a(){var a=d("react-compiler-runtime").c(2),b=c("MessengerWebUXLogger").useInteractionLogger(),e;a[0]!==b?(e=function(a,e,f,g,h){d("LSMessagingThreadTypeUtil").isArmadilloSecure(a)?b==null?void 0:b({eventName:j(h)}):c("LsMessageActionFalcoEvent").log(function(){return{action:{type:k(h)},error:{message:void 0},extra:{is_community_chats:d("LSMessagingThreadTypeUtil").isPublicCMThread(a)?"1":"0"},message:{attachment_type:"",entry_point:d("LsFalcoEventEntryPoint").messageActions,id:f,recipient_id:(i||(i=d("I64"))).to_string(g)},thread:{group_size:i.to_string(i.zero),id:e!=null?(i||(i=d("I64"))).to_string(e):void 0,type:d("LSMessagingThreadTypeUtil").isGroup(a)?2:1}}})},a[0]=b,a[1]=e):e=a[1];return e}function j(a){switch(a){case"EDIT_MESSAGE":return"edit_message";case"EDIT_MESSAGE_CANCEL":return"edit_message_cancel";case"EDIT_MESSAGE_TAP":return"edit_message_tap"}}function k(a){switch(a){case"EDIT_MESSAGE":return 90;case"EDIT_MESSAGE_CANCEL":return 92;case"EDIT_MESSAGE_TAP":return 89}}g["default"]=a}),98);
__d("useMWFalcoFeatureEventLogger",["MWFalcoFeatureEventLogger","MWPActor.react","getMWOtherUserFBID","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;(i||d("react")).useCallback;function a(a,b){var e=d("react-compiler-runtime").c(5),f=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),i;e[0]!==g||e[1]!==f||e[2]!==a||e[3]!==b?(i=function(c,e){d("getMWOtherUserFBID").getMWOtherUserFBID(f,g,a,b).then(function(f){d("MWFalcoFeatureEventLogger").logEvent(c,e,f,a,b)})["catch"](j)},e[0]=g,e[1]=f,e[2]=a,e[3]=b,e[4]=i):i=e[4];return i}function j(){}g["default"]=a}),98);
__d("useSharedNUX",["CometNUXManagerContext","react","react-compiler-runtime","recoverableViolation","useNUXLoggers","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect,k=b.useState;function a(a){var b=d("react-compiler-runtime").c(9),e;b[0]!==a?(e=function(){return a},b[0]=a,b[1]=e):e=b[1];var f=c("useStable")(e);if(f!==a){c("recoverableViolation")("Error nux changed at runtime from "+((e=f)!=null?e:"null")+" to "+((e=a)!=null?e:"null")+", this is not supported and will lead to erratic behavior, we have continued to use your initially supplied nux","comet_ui")}e=k(!1);var g=e[0],h=e[1];e=i(c("CometNUXManagerContext"));var l=e.registerNUX;e=e.removeNUX;var m,n;b[2]!==f||b[3]!==l?(m=function(){if(f==null)return;return l(f,h,!0)},n=[f,l],b[2]=f,b[3]=l,b[4]=m,b[5]=n):(m=b[4],n=b[5]);j(m,n);m=c("useNUXLoggers")(f,e);b[6]!==g||b[7]!==m?(n=[g,m],b[6]=g,b[7]=m,b[8]=n):n=b[8];return n}g["default"]=a}),98);