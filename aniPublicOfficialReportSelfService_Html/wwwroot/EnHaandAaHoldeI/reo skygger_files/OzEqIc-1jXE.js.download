;/*FB_PKG_DELIM*/

__d("LSSetLoadingAfterOnMessageRanges",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sortBy(b.db.table(13).fetch([[[a[0]]]]),[["maxTimestampMs","DESC"]]).next().then(function(a,c){var d=a.done;a=a.value;return d?0:(c=a.item,b.forEach(b.filter(b.db.table(13).fetch([[[c.threadKey,c.minTimestampMs,c.minMessageId]]]),function(a){return b.i64.eq(a.threadKey,c.threadKey)&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(a.minTimestampMs,c.minTimestampMs)&&a.minMessageId===c.minMessageId}),function(a){var b=a.update;a.item;return b({isLoadingAfter:!0})}))})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxSetLoadingAfterOnMessageRangesStoredProcedure";a.__tables__=["messages_ranges_v2__generated"];e.exports=a}),null);
__d("LSReportThreadViewOpen",["LSIssueNewTaskWithExtraOperations","LSSetLoadingAfterOnMessageRanges"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[void 0,void 0],d[0]=c[0],d[1]=c[1],c):(b=a.item,c=[b.syncGroup,b.threadType],d[0]=c[0],d[1]=c[1],c)})},function(a){return c.i64.neq(d[0],void 0)?c.sequence([function(a){return c.db.table(1).fetch([[[d[0]]]]).next().then(function(a,b){var c=a.done;a=a.value;return c?d[14]=void 0:(b=a.item,d[14]=b.syncParams)})},function(a){return d[3]=d[14]}]):c.resolve(d[3]=void 0)},function(b){return c.islc(c.db.table(12).fetch([[[a[0],c.i64.cast([0,80])]],"messageDisplayOrderAuthority"]),0,c.i64.to_float(c.i64.cast([0,1]))).next().then(function(a,b){var c=a.done;a=a.value;return c?d[4]=void 0:(b=a.item,d[4]=b.timestampMs)})},function(b){return c.db.table(294).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?(e=[!1,c.i64.cast([0,0]),void 0],d[6]=e[0],d[7]=e[1],d[8]=e[2],e):(b=a.item,e=[b.isStale,b.threadQueueSequenceId,b.lastSelectiveSyncTimestampMs],d[6]=e[0],d[7]=e[1],d[8]=e[2],e)})},function(a){return d[6]?d[10]=!0:d[10]=!1,c.i64.neq(d[8],void 0)?(c.i64.eq(d[1],c.i64.cast([0,152]))?d[14]=c.i64.cast([0,0]):d[14]=c.i64.cast([0,0]),d[15]=c.i64.of_float(Date.now()),c.resolve()):c.resolve()},function(e){return d[11]=new c.Map(),d[11].set("thread_key",a[0]),d[11].set("is_stale",d[10]),d[11].set("client_seq_id",d[7]),d[11].set("sync_params_encoded",d[3]),d[11].set("client_last_sync_timestamp_ms",d[8]),d[11].set("sync_group",d[0]),d[11].set("last_message_timestamp_ms",d[4]),d[12]=d[11].get("thread_key"),d[13]=c.toJSON(d[11]),c.storedProcedure(b("LSIssueNewTaskWithExtraOperations"),["report_thread_view_open","_",c.i64.to_string(d[12])].join(""),c.i64.cast([0,605]),d[13],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),void 0,c.i64.cast([0,0]))}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxReportThreadViewOpenStoredProcedure";a.__tables__=["threads","sync_groups","messages","community_thread_sync_info"];e.exports=a}),null);
__d("LSReportThreadViewOpenStoredProcedure",["LSReportThreadViewOpen","LSSynchronousPromise","Promise","cr:8709"],(function(a,b,c,d,e,f,g){var h;function a(a,e){a=a.storedProcedure(c("LSReportThreadViewOpen"),e.threadKey);return(h||(h=b("Promise"))).resolve(d("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}g["default"]=a}),98);
__d("LSThreadPointQueryTTRCStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({COMPLETED:1,SKIPPED:2});f["default"]=a}),66);
__d("MWCMSelectiveSyncTTRCQPLLoggingUtils",["I64","QPLUserFlow","ReQL","ReQLSuspense","qpl","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("qpl")._(25310806,"1365");function a(a){var b,e=(i||(i=c("useReStore")))();b=(b=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(e.tables.messages.index("messageDisplayOrder")).getKeyRange(a).take(20)},[e,a],f.id+":35"))!=null?b:[];return b}function b(a){var b=d("react-compiler-runtime").c(6),e=(i||(i=c("useReStore")))(),g;b[0]!==e.tables.thread_point_query_ttrc||b[1]!==a?(g=function(){return d("ReQL").fromTableAscending(e.tables.thread_point_query_ttrc).getKeyRange(a)},b[0]=e.tables.thread_point_query_ttrc,b[1]=a,b[2]=g):g=b[2];var h;b[3]!==e||b[4]!==a?(h=[e,a],b[3]=e,b[4]=a,b[5]=h):h=b[5];b=d("ReQLSuspense").useFirst(g,h,f.id+":48");if(b!=null)return b}function e(a,b,d){c("QPLUserFlow").endSuccess(j,{annotations:{string:{hasMessageDataChanged:b,status:"completed"}},instanceKey:a,timestamp:(b=d)!=null?b:void 0})}function k(a,b,e,f){c("QPLUserFlow").start(j,{annotations:{string:{thread_id:(h||(h=d("I64"))).to_string(b),thread_subtype:f?(h||(h=d("I64"))).to_string(f):null,thread_type:h.to_string(e)}},instanceKey:a})}function l(a,b){c("QPLUserFlow").addPoint(j,b,{instanceKey:a})}function m(a){c("QPLUserFlow").addPoint(j,"selective_sync_remediation_end",{instanceKey:a}),c("QPLUserFlow").endSuccess(j,{annotations:{string:{status:"skipped"}},instanceKey:a})}function n(a,b){return a.length!==b.length?!1:!a.some(function(a,c){c=b[c];c.text;c=babelHelpers.objectWithoutPropertiesLoose(c,["text"]);a.text;a=babelHelpers.objectWithoutPropertiesLoose(a,["text"]);if(JSON.stringify(c)!==JSON.stringify(a))return!0})}g.useLast20Messages=a;g.useTPQEntry=b;g.logCompleteEndSuccess=e;g.logEventStreamStart=k;g.logPoint=l;g.logSkippedEndSuccess=m;g.isMessageDataUnchanged=n}),98);
__d("MWChatTypingIndicator.react",["MessengerWebUXLogger","react","react-compiler-runtime","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={dot:{alignItems:"x6s0dn4",animationDuration:"xmg6eyc",animationIterationCount:"xa4qsjk",animationName:"xwnhzmj",animationTimingFunction:"x4hg4is",backgroundColor:"x1iuwi03",borderTopStartRadius:"xm3z3ea",borderTopEndRadius:"x1x8b98j",borderBottomEndRadius:"x131883w",borderBottomStartRadius:"x16mih1h",display:"x78zum5",height:"xqu0tyb",marginStart:"xgzva0m",marginEnd:"xhhsvwb",marginLeft:null,marginRight:null,width:"x51ohtg",$$css:!0},dot1:{animationDelay:"x1t83zlg",$$css:!0},dot1Opacity:{animationDelay:"x1uzojwf",$$css:!0},dot2:{animationDelay:"x1x1c4bx",$$css:!0},dot2Opacity:{animationDelay:"xfjzax6",$$css:!0},dot3:{animationDelay:"x1xwhvez",$$css:!0},dot3Opacity:{animationDelay:"x1la68h3",$$css:!0},dotOpacity:{animationDuration:"xmg6eyc",animationIterationCount:"xa4qsjk",animationName:"x1bcwpiy",animationTimingFunction:"x4hg4is",opacity:"x1hc1fzr",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",height:"x1ta3ar0",$$css:!0}};function a(a){var b=d("react-compiler-runtime").c(10);a=a.threadType;var e;b[0]!==a?(e={eventName:"show_typing_indicators",threadType:a},b[0]=a,b[1]=e):e=b[1];a=c("MessengerWebUXLogger").useImpressionLoggerRef(e);b[2]===Symbol["for"]("react.memo_cache_sentinel")?(e=[j.dotOpacity,j.dot1Opacity],b[2]=e):e=b[2];b[3]===Symbol["for"]("react.memo_cache_sentinel")?(e=i.jsx(d("react-strict-dom").html.div,{style:e,children:i.jsx(d("react-strict-dom").html.div,{style:[j.dot,j.dot1]})}),b[3]=e):e=b[3];var f;b[4]===Symbol["for"]("react.memo_cache_sentinel")?(f=[j.dotOpacity,j.dot2Opacity],b[4]=f):f=b[4];b[5]===Symbol["for"]("react.memo_cache_sentinel")?(f=i.jsx(d("react-strict-dom").html.div,{style:f,children:i.jsx(d("react-strict-dom").html.div,{style:[j.dot,j.dot2]})}),b[5]=f):f=b[5];var g;b[6]===Symbol["for"]("react.memo_cache_sentinel")?(g=[j.dotOpacity,j.dot3Opacity],b[6]=g):g=b[6];b[7]===Symbol["for"]("react.memo_cache_sentinel")?(g=i.jsx(d("react-strict-dom").html.div,{style:g,children:i.jsx(d("react-strict-dom").html.div,{style:[j.dot,j.dot3]})}),b[7]=g):g=b[7];b[8]!==a?(e=i.jsxs(d("react-strict-dom").html.div,{ref:a,style:j.root,children:[e,f,g]}),b[8]=a,b[9]=e):e=b[9];return e}g["default"]=a}),98);
__d("SelectiveSyncTTRCLogger.react",["CometPlaceholder.react","I64","Int64Hooks","LSIntEnum","LSThreadPointQueryTTRCStatus","MWCMSelectiveSyncTTRCQPLLoggingUtils","Random","ReQL","ReQLSuspense","areEqual","react","react-compiler-runtime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=l||(l=d("react")),n=l.useRef;function o(a){var b=d("react-compiler-runtime").c(40),e=a.instanceKey,g=a.isReportThreadViewOpenSprocCalled,l=a.reportThreadViewOpenCalledTimestamp,m=a.setInstanceKey,o=a.threadKey,p=a.threadSubtype,q=a.threadType,r=n(!1);a=(h||(h=c("useReStore")))();var s;b[0]!==a.tables.messages||b[1]!==o?(s=d("ReQLSuspense").toArray(d("ReQL").fromTableDescending(a.tables.messages.index("messageDisplayOrder")).getKeyRange(o).take(20),f.id+":56"),b[0]=a.tables.messages,b[1]=o,b[2]=s):s=b[2];var t=s;b[3]!==a.tables.reactions||b[4]!==o?(s=d("ReQLSuspense").toArray(d("ReQL").fromTableDescending(a.tables.reactions).getKeyRange(o).take(20),f.id+":61"),b[3]=a.tables.reactions,b[4]=o,b[5]=s):s=b[5];var u=s;b[6]!==a.tables.reactions_v2||b[7]!==o?(s=d("ReQLSuspense").toArray(d("ReQL").fromTableDescending(a.tables.reactions_v2).getKeyRange(o).take(20),f.id+":64"),b[6]=a.tables.reactions_v2,b[7]=o,b[8]=s):s=b[8];var v=s;b[9]!==e||b[10]!==g||b[11]!==o||b[12]!==p||b[13]!==q?(a=function(){g===!1&&(r.current=!0,d("MWCMSelectiveSyncTTRCQPLLoggingUtils").logEventStreamStart(e,o,q,p))},b[9]=e,b[10]=g,b[11]=o,b[12]=p,b[13]=q,b[14]=a):a=b[14];b[15]!==e||b[16]!==g||b[17]!==l||b[18]!==o||b[19]!==p||b[20]!==q?(s=[e,g,l,o,p,q],b[15]=e,b[16]=g,b[17]=l,b[18]=o,b[19]=p,b[20]=q,b[21]=s):s=b[21];d("Int64Hooks").useEffectInt64(a,s);var w=n(t),x=n(u),y=n(v),z=d("MWCMSelectiveSyncTTRCQPLLoggingUtils").useTPQEntry(o);b[22]!==e||b[23]!==t||b[24]!==u||b[25]!==v||b[26]!==l||b[27]!==m||b[28]!==(z==null?void 0:z.dasmExecutionTimestampMs)||b[29]!==(z==null?void 0:z.deltaInsertionTimestampMs)||b[30]!==(z==null?void 0:z.status)?(a=function(){var a=z==null?void 0:z.status,b=z==null?void 0:z.deltaInsertionTimestampMs,f=z==null?void 0:z.dasmExecutionTimestampMs;if(r.current===!0&&l!==0)if(a&&(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSThreadPointQueryTTRCStatus").SKIPPED)))d("MWCMSelectiveSyncTTRCQPLLoggingUtils").logSkippedEndSuccess(e),r.current=!1,m(c("Random").uint32());else if(a!=null&&(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSThreadPointQueryTTRCStatus").COMPLETED))&&b!=null&&(j||(j=d("I64"))).to_float(b)>l){d("MWCMSelectiveSyncTTRCQPLLoggingUtils").logPoint(e,"selective_sync_remediation_end");a=!d("MWCMSelectiveSyncTTRCQPLLoggingUtils").isMessageDataUnchanged(w.current,t);var g=!(i||(i=c("areEqual")))(x.current,u),h=!i(y.current,v);a||g||h?d("MWCMSelectiveSyncTTRCQPLLoggingUtils").logCompleteEndSuccess(e,"true",f!=null?(j||(j=d("I64"))).to_float(f):void 0):d("MWCMSelectiveSyncTTRCQPLLoggingUtils").logCompleteEndSuccess(e,"false",b!=null?(j||(j=d("I64"))).to_float(b):void 0);w.current=t;x.current=u;y.current=v;r.current=!1;m(c("Random").uint32())}},b[22]=e,b[23]=t,b[24]=u,b[25]=v,b[26]=l,b[27]=m,b[28]=z==null?void 0:z.dasmExecutionTimestampMs,b[29]=z==null?void 0:z.deltaInsertionTimestampMs,b[30]=z==null?void 0:z.status,b[31]=a):a=b[31];b[32]!==e||b[33]!==t||b[34]!==u||b[35]!==v||b[36]!==l||b[37]!==m||b[38]!==z?(s=[e,t,u,v,l,m,z],b[32]=e,b[33]=t,b[34]=u,b[35]=v,b[36]=l,b[37]=m,b[38]=z,b[39]=s):s=b[39];d("Int64Hooks").useEffectInt64(a,s);return null}function a(a){var b=d("react-compiler-runtime").c(2),e;b[0]!==a?(e=m.jsx(c("CometPlaceholder.react"),{fallback:null,name:"SelectiveSyncTTRCLogger",children:m.jsx(o,babelHelpers["extends"]({},a))}),b[0]=a,b[1]=e):e=b[1];return e}g["default"]=a}),98);
__d("XGroupsC4GThreadViewControllerRouteBuilder",["jsRouteBuilder"],(function(a,b,c,d,e,f,g){a=c("jsRouteBuilder")("/groups/{idorvanity}/chats/{thread_id}/",Object.freeze({}),void 0);b=a;g["default"]=b}),98);
__d("useReportThreadViewOpenDebounced",["LSFactory","LSReportThreadViewOpenStoredProcedure","promiseDone","react-compiler-runtime","useDebouncedComet","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=d("react-compiler-runtime").c(5),g=(h||(h=c("useReStore")))(),i;e[0]!==g||e[1]!==a?(i=function(){c("promiseDone")(g.runInTransaction(function(b){return c("LSReportThreadViewOpenStoredProcedure")(c("LSFactory")(b),{threadKey:a})},"readwrite",void 0,void 0,f.id+":33"))},e[0]=g,e[1]=a,e[2]=i):i=e[2];var j;e[3]!==b?(j={leading:!0,wait:b},e[3]=b,e[4]=j):j=e[4];return c("useDebouncedComet")(i,j)}g["default"]=a}),98);
__d("useMWReportThreadOpenOnMountAndFocusWithLogger",["GroupsCometChatsEngagementLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","MWCMSelectiveSyncTTRCQPLLoggingUtils","MetaConfig","Random","SelectiveSyncTTRCLogger.react","ServerTime","VisibilityAPI","mwCMIsAnyCMThread","react","useReStore","useReportThreadViewOpenDebounced"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));b=j;var l=b.useRef,m=b.useState,n=c("MetaConfig")._("43");function a(a,b){var e=(h||(h=c("useReStore")))(),f=m(0),g=f[0],j=f[1];f=m(d("Random").uint32());var o=f[0];f=f[1];var p=c("mwCMIsAnyCMThread")(a.threadType),q=l(!1),r=p||c("MetaConfig")._("55")&&(d("LSMessagingThreadTypeUtil").isSocialChannelV2(a.threadType)||d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)),s=c("useReportThreadViewOpenDebounced")(a.threadKey,(b=b)!=null?b:n);d("Int64Hooks").useEffectInt64(function(){var b=null;r&&(b=d("VisibilityAPI").onVisibilityChange(function(){d("VisibilityAPI").isVisibilityHidden()||s()}),p&&d("GroupsCometChatsEngagementLogger").log({action:"background_effect",community_id:(i||(i=d("I64"))).to_string(a.parentThreadKey),event:"report_thread_view_open",source:"blended_threadlist_community_tab",surface:"thread_view",thread_id:(i||(i=d("I64"))).to_string(a.threadKey)}),q.current===!1&&(j(d("ServerTime").getMillis()),q.current=!0,d("MWCMSelectiveSyncTTRCQPLLoggingUtils").logPoint(o,"selective_sync_remediation_start"),s()));return function(){b!=null&&d("VisibilityAPI").removeVisibiltyChangeListener(b)}},[e,a.parentThreadKey,a.threadKey,a.threadType,p,o,r,s]);return r?k.jsx(c("SelectiveSyncTTRCLogger.react"),{instanceKey:o,isReportThreadViewOpenSprocCalled:q.current,reportThreadViewOpenCalledTimestamp:g,setInstanceKey:f,threadKey:a.threadKey,threadSubtype:a.threadSubtype,threadType:a.threadType}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);